!function(t){"use strict";t.fn.TouchSpin=function(o){return this.each(function(){function n(){if(!k.data("alreadyinitialized")){if(k.data("alreadyinitialized",!0),!k.is("input"))return void console.log("Must be an input.");e(),s(),i(),a(),u(),p()}}function e(){v=t.extend({min:0,max:100,step:1,decimals:0,stepinterval:100,stepintervaldelay:500,prefix:"",postfix:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0},o)}function i(){k.data("initvalue",k.val()).val(Number(k.val()).toFixed(v.decimals));var o='<div class="input-group bootstrap-touchspin" style=""><span class="input-group-btn"><button class="btn btn-default bootstrap-touchspin-down" type="button">-</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+v.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+v.postfix+'</span><span class="input-group-btn"><button class="btn btn-default bootstrap-touchspin-up" type="button">+</button></span></div>';m=t(o).insertBefore(k),t(".bootstrap-touchspin-prefix",m).after(k),t("<style type='text/css'>.bootstrap-touchspin-prefix:empty,.bootstrap-touchspin-postfix:empty{display:none;}</style>").appendTo("head"),k.addClass("form-control")}function a(){b={down:t(".bootstrap-touchspin-down",m),up:t(".bootstrap-touchspin-up",m),input:t("input",m),prefix:t(".bootstrap-touchspin-prefix",m),postfix:t(".bootstrap-touchspin-postfix",m)}}function u(){k.on("keydown",function(t){var o=t.keyCode||t.which;38===o?("up"!==C&&(c(),d()),t.preventDefault()):40===o&&("down"!==C&&(l(),f()),t.preventDefault())}),k.on("keyup",function(t){var o=t.keyCode||t.which;38===o?h():40===o?h():s()}),b.down.on("keydown",function(t){var o=t.keyCode||t.which;32!==o&&13!==o||("down"!==C&&(l(),f()),t.preventDefault())}),b.down.on("keyup",function(t){var o=t.keyCode||t.which;32!==o&&13!==o||h()}),b.up.on("keydown",function(t){var o=t.keyCode||t.which;32!==o&&13!==o||("up"!==C&&(c(),d()),t.preventDefault())}),b.up.on("keyup",function(t){var o=t.keyCode||t.which;32!==o&&13!==o||h()}),b.down.on("mousedown touchstart",function(t){l(),f(),t.preventDefault(),t.stopPropagation()}),b.up.on("mousedown touchstart",function(t){c(),d(),t.preventDefault(),t.stopPropagation()}),b.up.on("mouseout touchleave touchend touchcancel",function(t){C&&(t.stopPropagation(),h())}),b.down.on("mouseout touchleave touchend touchcancel",function(t){C&&(t.stopPropagation(),h())}),b.down.on("mousemove touchmove",function(t){C&&(t.stopPropagation(),t.preventDefault())}),b.up.on("mousemove touchmove",function(t){C&&(t.stopPropagation(),t.preventDefault())}),t(document).on("mouseup touchend touchcancel",function(t){C&&(t.preventDefault(),h())}),t(document).on("mousemove touchmove scroll scrollstart",function(t){C&&(t.preventDefault(),h())}),v.mousewheel&&k.bind("mousewheel DOMMouseScroll",function(t){var o=t.originalEvent.wheelDelta||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),0>o?l():c()})}function p(){k.on("touchspin.uponce",function(){h(),c()}),k.on("touchspin.downonce",function(){h(),l()}),k.on("touchspin.startupspin",function(){d()}),k.on("touchspin.startdownspin",function(){f()}),k.on("touchspin.stopspin",function(){h()})}function s(){var t,o,n;t=k.val(),v.decimals>0&&"."===t||(o=parseFloat(t),isNaN(o)&&(o=0),n=o,o.toString()!==t&&(n=o),o<v.min&&(n=v.min),o>v.max&&(n=v.max),Number(t).toString()!==n.toString()&&(k.val(n),k.trigger("change")))}function r(){if(v.booster){var t=Math.pow(2,Math.floor(N/v.boostat))*v.step;return v.maxboostedstep&&t>v.maxboostedstep&&(t=v.maxboostedstep,g=Math.round(g/t*t)),Math.max(v.step,t)}return v.step}function c(){g=parseFloat(b.input.val()),isNaN(g)&&(g=0);var t=g,o=r();g+=o,g>v.max&&(h(),g=v.max,k.trigger("touchspin.max")),b.input.val(Number(g).toFixed(v.decimals)),t!==g&&k.trigger("change")}function l(){g=parseFloat(b.input.val()),isNaN(g)&&(g=0);var t=g,o=r();g-=o,g<v.min&&(h(),g=v.min,k.trigger("touchspin.min")),b.input.val(g.toFixed(v.decimals)),t!==g&&k.trigger("change")}function f(){h(),N=0,C="down",y=setTimeout(function(){w=setInterval(function(){N++,l()},v.stepinterval)},v.stepintervaldelay)}function d(){h(),N=0,C="up",D=setTimeout(function(){x=setInterval(function(){N++,c()},v.stepinterval)},v.stepintervaldelay)}function h(){clearTimeout(y),clearTimeout(D),clearInterval(w),clearInterval(x),N=0,C=!1}var v,m,b,g,w,x,y,D,k=t(this),N=0,C=!1;n()})}}(jQuery);