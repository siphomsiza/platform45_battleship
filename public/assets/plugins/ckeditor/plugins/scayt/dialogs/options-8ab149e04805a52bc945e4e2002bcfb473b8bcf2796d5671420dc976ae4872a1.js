CKEDITOR.dialog.add("scaytcheck",function(t){function l(){return"undefined"!=typeof document.forms["optionsbar_"+u]?document.forms["optionsbar_"+u].options:[]}function s(t,e){if(t){var i=t.length;if(null==i)t.checked=t.value==e.toString();else for(var a=0;a<i;a++)t[a].checked=!1,t[a].value==e.toString()&&(t[a].checked=!0)}}function d(t){m.getById("dic_message_"+u).setHtml('<span style="color:red;">'+t+"</span>")}function c(t){m.getById("dic_message_"+u).setHtml('<span style="color:blue;">'+t+"</span>")}function r(t){for(var e=0,i=(t=(""+t).split(",")).length;e<i;e+=1)m.getById(t[e]).$.style.display="inline"}function _(t){for(var e=0,i=(t=(""+t).split(",")).length;e<i;e+=1)m.getById(t[e]).$.style.display="none"}function p(t){m.getById("dic_name_"+u).$.value=t}var g,e,y=!0,m=CKEDITOR.document,u=t.name,f=CKEDITOR.plugins.scayt.getUiTabs(t),i=[],h=0,v=["dic_create_"+u+",dic_restore_"+u,"dic_rename_"+u+",dic_delete_"+u],b=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"],a=[{id:"options",label:(e=t.lang.scayt).optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar_'+u+'"><div class="inner_options">\t<div class="messagebox"></div>\t<div style="display:none;">\t\t<input type="checkbox" name="options"  id="allCaps_'+u+'" />\t\t<label style = "display: inline" for="allCaps" id="label_allCaps_'+u+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="ignoreDomainNames_'+u+'" />\t\t<label style = "display: inline" for="ignoreDomainNames" id="label_ignoreDomainNames_'+u+'"></label>\t</div>\t<div style="display:none;">\t<input name="options" type="checkbox"  id="mixedCase_'+u+'" />\t\t<label style = "display: inline" for="mixedCase" id="label_mixedCase_'+u+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="mixedWithDigits_'+u+'" />\t\t<label style = "display: inline" for="mixedWithDigits" id="label_mixedWithDigits_'+u+'"></label>\t</div></div></form>'}]},{id:"langs",label:e.languagesTab,elements:[{type:"html",id:"langs",html:'<form name="languagesbar_'+u+'"><div class="inner_langs">\t<div class="messagebox"></div>\t   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol_'+u+'" ></div>   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol_'+u+'"></div></div></form>'}]},{id:"dictionaries",label:e.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar_'+u+'"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">\t<div style="margin:5px auto; width:95%;white-space:normal; overflow:hidden;" id="dic_message_'+u+'"> </div>\t<div style="margin:5px auto; width:95%;white-space:normal;">        <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>\t\t<span class="cke_dialog_ui_labeled_content" >\t\t\t<div class="cke_dialog_ui_input_text">\t\t\t\t<input id="dic_name_'+u+'" type="text" class="cke_dialog_ui_input_text" style = "height: 25px; background: none; padding: 0;"/>\t\t</div></span></div>\t\t<div style="margin:5px auto; width:95%;white-space:normal;">\t\t\t<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create_'+u+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete_'+u+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename_'+u+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore_'+u+'">\t\t\t\t</a>\t\t</div>\t<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info_'+u+'"></div></div></form>'}]},{id:"about",label:e.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div id="scayt_about_'+u+'"></div>'}]}],n={title:e.title,minWidth:360,minHeight:220,onShow:function(){var e=this;if(e.data=t.fire("scaytDialog",{}),e.options=e.data.scayt_control.option(),e.chosed_lang=e.sLang=e.data.scayt_control.sLang,e.data&&e.data.scayt&&e.data.scayt_control){var i=0;y?e.data.scayt.getCaption(t.langCode||"en",function(t){0<i++||(g=t,o.apply(e),k.apply(e),y=!1)}):k.apply(e),e.selectPage(e.data.tab)}else alert("Error loading application service"),e.hide()},onOk:function(){var t=this.data.scayt_control;t.option(this.options),t.setLang(this.chosed_lang),t.refresh()},onCancel:function(){var t,e=l();for(t in e)e[t].checked=!1;s(e="undefined"!=typeof document.forms["languagesbar_"+u]?document.forms["languagesbar_"+u].scayt_lang:[],"")},contents:i};for(CKEDITOR.plugins.scayt.getScayt(t),e=0;e<f.length;e++)1==f[e]&&(i[i.length]=a[e]);1==f[2]&&(h=1);var o=function(){function t(t){var e=m.getById("dic_name_"+u).getValue();if(!e)return d(" Dictionary name should not be empty. "),!1;try{var i=t.data.getTarget().getParent(),a=/(dic_\w+)_[\w\d]+/.exec(i.getId())[1];s[a].apply(null,[i,e,v])}catch(n){d(" Dictionary error. ")}return!0}var e,o=this,i=o.data.scayt.getLangList(),a=["dic_create","dic_delete","dic_rename","dic_restore"],n=[],l=[];if(h){for(e=0;e<a.length;e++)n[e]=a[e]+"_"+u,m.getById(n[e]).setHtml('<span class="cke_dialog_ui_button">'+g["button_"+a[e]]+"</span>");m.getById("dic_info_"+u).setHtml(g.dic_info)}if(1==f[0])for(e in b)a="label_"+b[e],void 0!==(n=m.getById(a+"_"+u))&&"undefined"!=typeof g[a]&&"undefined"!=typeof o.options[b[e]]&&(n.setHtml(g[a]),n.getParent().$.style.display="block");if(a='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p><p>'+g.version+window.scayt.getAboutInfo().version.toString()+"</p><p>"+g.about_throwt_copy+"</p>",m.getById("scayt_about_"+u).setHtml(a),a=function(t,e){var i=m.createElement("label");i.setAttribute("for","cke_option"+t),i.setStyle("display","inline"),i.setHtml(e[t]),o.sLang==t&&(o.chosed_lang=t);var a=m.createElement("div"),n=CKEDITOR.dom.element.createFromHtml('<input class = "cke_dialog_ui_radio_input" id="cke_option'+t+'" type="radio" '+(o.sLang==t?'checked="checked"':"")+' value="'+t+'" name="scayt_lang" />');return n.on("click",function(){this.$.checked=!0,o.chosed_lang=t}),a.append(n),a.append(i),{lang:e[t],code:t,radio:a}},1==f[1]){for(e in i.rtl)l[l.length]=a(e,i.ltr);for(e in i.ltr)l[l.length]=a(e,i.ltr);for(l.sort(function(t,e){return e.lang>t.lang?-1:1}),i=m.getById("scayt_lcol_"+u),a=m.getById("scayt_rcol_"+u),e=0;e<l.length;e++)(e<l.length/2?i:a).append(l[e].radio)}var s={dic_create:function(t,e,i){var a=i[0]+","+i[1],n=g.err_dic_create,o=g.succ_dic_create;window.scayt.createUserDictionary(e,function(t){_(a),r(i[1]),c(o=o.replace("%s",t.dname))},function(t){d((n=n.replace("%s",t.dname))+"( "+(t.message||"")+")")})},dic_rename:function(t,e){var i=g.err_dic_rename||"",a=g.succ_dic_rename||"";window.scayt.renameUserDictionary(e,function(t){a=a.replace("%s",t.dname),p(e),c(a)},function(t){i=i.replace("%s",t.dname),p(e),d(i+"( "+(t.message||"")+" )")})},dic_delete:function(t,e,i){var a=i[0]+","+i[1],n=g.err_dic_delete,o=g.succ_dic_delete;window.scayt.deleteUserDictionary(function(t){o=o.replace("%s",t.dname),_(a),r(i[0]),p(""),c(o)},function(t){d(n=n.replace("%s",t.dname))})}};for(s.dic_restore=o.dic_restore||function(t,e,i){var a=i[0]+","+i[1],n=g.err_dic_restore,o=g.succ_dic_restore;window.scayt.restoreUserDictionary(e,function(t){o=o.replace("%s",t.dname),_(a),r(i[1]),c(o)},function(t){d(n=n.replace("%s",t.dname))})},i=(l=(v[e=0]+","+v[1]).split(",")).length;e<i;e+=1)(a=m.getById(l[e]))&&a.on("click",t,this)},k=function(){var t=this;if(1==f[0])for(var e=l(),i=0,a=e.length;i<a;i++){var n=e[i].id,o=m.getById(n);o&&(e[i].checked=!1,1==t.options[n.split("_")[0]]&&(e[i].checked=!0),y)&&o.on("click",function(){t.options[this.getId().split("_")[0]]=this.$.checked?1:0})}1==f[1]&&s((e=m.getById("cke_option"+t.sLang)).$,t.sLang),h&&(window.scayt.getNameUserDictionary(function(t){t=t.dname,_(v[0]+","+v[1]),t?(m.getById("dic_name_"+u).setValue(t),r(v[1])):r(v[0])},function(){m.getById("dic_name_"+u).setValue("")}),c(""))};return n});