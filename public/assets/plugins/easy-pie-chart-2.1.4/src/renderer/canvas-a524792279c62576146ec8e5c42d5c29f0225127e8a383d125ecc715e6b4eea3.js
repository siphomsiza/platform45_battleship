var CanvasRenderer=function(e,r){var a,t=document.createElement("canvas");e.appendChild(t),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(t);var n=t.getContext("2d");t.width=t.height=r.size;var i=1;1<window.devicePixelRatio&&(i=window.devicePixelRatio,t.style.width=t.style.height=[r.size,"px"].join(""),t.width=t.height=r.size*i,n.scale(i,i)),n.translate(r.size/2,r.size/2),n.rotate((r.rotate/180-.5)*Math.PI);var o=(r.size-r.lineWidth)/2;r.scaleColor&&r.scaleLength&&(o-=r.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(e,t,a){var i=(a=Math.min(Math.max(-1,a||0),1))<=0;n.beginPath(),n.arc(0,0,o,0,2*Math.PI*a,i),n.strokeStyle=e,n.lineWidth=t,n.stroke()},l=function(){var e,t;n.lineWidth=1,n.fillStyle=r.scaleColor,n.save();for(var a=24;0<a;--a)a%6==0?(t=r.scaleLength,e=0):(t=.6*r.scaleLength,e=r.scaleLength-t),n.fillRect(-r.size/2+e,0,t,1),n.rotate(Math.PI/12);n.restore()},h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},c=function(){r.scaleColor&&l(),r.trackColor&&s(r.trackColor,r.lineWidth,1)};this.getCanvas=function(){return t},this.getCtx=function(){return n},this.clear=function(){n.clearRect(r.size/-2,r.size/-2,r.size,r.size)},this.draw=function(e){var t;r.scaleColor||r.trackColor?n.getImageData&&n.putImageData?a?n.putImageData(a,0,0):(c(),a=n.getImageData(0,0,r.size*i,r.size*i)):(this.clear(),c()):this.clear(),n.lineCap=r.lineCap,t="function"==typeof r.barColor?r.barColor(e):r.barColor,s(t,r.lineWidth,e/100)}.bind(this),this.animate=function(a,i){var n=Date.now();r.onStart(a,i);var o=function(){var e=Math.min(Date.now()-n,r.animate.duration),t=r.easing(this,e,a,i-a,r.animate.duration);this.draw(t),r.onStep(a,i,t),e>=r.animate.duration?r.onStop(a,i):h(o)}.bind(this);h(o)}.bind(this)};