var CanvasRenderer=function(t,e){var a,i=document.createElement("canvas");t.appendChild(i),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(i);var n=i.getContext("2d");i.width=i.height=e.size;var o=1;window.devicePixelRatio>1&&(o=window.devicePixelRatio,i.style.width=i.style.height=[e.size,"px"].join(""),i.width=i.height=e.size*o,n.scale(o,o)),n.translate(e.size/2,e.size/2),n.rotate((-0.5+e.rotate/180)*Math.PI);var r=(e.size-e.lineWidth)/2;e.scaleColor&&e.scaleLength&&(r-=e.scaleLength+2),Date.now=Date.now||function(){return+new Date};var s=function(t,e,a){a=Math.min(Math.max(-1,a||0),1);var i=0>=a;n.beginPath(),n.arc(0,0,r,0,2*Math.PI*a,i),n.strokeStyle=t,n.lineWidth=e,n.stroke()},l=function(){var t,a;n.lineWidth=1,n.fillStyle=e.scaleColor,n.save();for(var i=24;i>0;--i)i%6===0?(a=e.scaleLength,t=0):(a=.6*e.scaleLength,t=e.scaleLength-a),n.fillRect(-e.size/2+t,0,a,1),n.rotate(Math.PI/12);n.restore()},c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),h=function(){e.scaleColor&&l(),e.trackColor&&s(e.trackColor,e.lineWidth,1)};this.getCanvas=function(){return i},this.getCtx=function(){return n},this.clear=function(){n.clearRect(e.size/-2,e.size/-2,e.size,e.size)},this.draw=function(t){e.scaleColor||e.trackColor?n.getImageData&&n.putImageData?a?n.putImageData(a,0,0):(h(),a=n.getImageData(0,0,e.size*o,e.size*o)):(this.clear(),h()):this.clear(),n.lineCap=e.lineCap;var i;i="function"==typeof e.barColor?e.barColor(t):e.barColor,s(i,e.lineWidth,t/100)}.bind(this),this.animate=function(t,a){var i=Date.now();e.onStart(t,a);var n=function(){var o=Math.min(Date.now()-i,e.animate.duration),r=e.easing(this,o,t,a-t,e.animate.duration);this.draw(r),e.onStep(t,a,r),o>=e.animate.duration?e.onStop(t,a):c(n)}.bind(this);c(n)}.bind(this)};