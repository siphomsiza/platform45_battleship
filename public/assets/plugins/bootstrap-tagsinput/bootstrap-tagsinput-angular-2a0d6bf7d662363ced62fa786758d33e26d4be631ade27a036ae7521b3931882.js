angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function l(e,t){return t?angular.isFunction(e.$parent[t])?e.$parent[t]:function(e){return e[t]}:undefined}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(r,t,n){$(function(){angular.isArray(r.model)||(r.model=[]);var a=$("select",t);a.tagsinput({typeahead:{source:angular.isFunction(r.$parent[n.typeaheadSource])?r.$parent[n.typeaheadSource]:null},itemValue:l(r,n.itemvalue),itemText:l(r,n.itemtext),tagClass:angular.isFunction(r.$parent[n.tagclass])?r.$parent[n.tagclass]:function(){return n.tagclass}});for(var e=0;e<r.model.length;e++)a.tagsinput("add",r.model[e]);a.on("itemAdded",function(e){-1===r.model.indexOf(e.item)&&r.model.push(e.item)}),a.on("itemRemoved",function(e){var t=r.model.indexOf(e.item);-1!==t&&r.model.splice(t,1)});var i=r.model.slice();r.$watch("model",function(){var e,t=r.model.filter(function(e){return-1===i.indexOf(e)}),n=i.filter(function(e){return-1===r.model.indexOf(e)});for(i=r.model.slice(),e=0;e<n.length;e++)a.tagsinput("remove",n[e]);for(a.tagsinput("refresh"),e=0;e<t.length;e++)a.tagsinput("add",t[e])},!0)})}}}]);