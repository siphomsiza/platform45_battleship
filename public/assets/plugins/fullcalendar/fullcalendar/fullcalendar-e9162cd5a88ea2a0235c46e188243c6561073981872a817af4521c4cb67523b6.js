!function(Lt,_t){function t(t){Lt.extend(!0,k,t)}function i(e,o,t){function n(t){X?s()&&(h(),d(t)):r()}function r(){o.theme?"ui":"fc",e.addClass("fc"),o.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr"),o.theme&&e.addClass("ui-widget"),X=Lt("<div class='fc-content' style='position:relative'/>").prependTo(e),j=new rt(B,o),(I=j.render())&&e.prepend(I),c(o.defaultView),o.handleWindowResize&&Lt(window).resize(p),l()||a()}function a(){setTimeout(function(){!J.start&&l()&&f()},0)}function i(){J&&(Y("viewDestroy",J,J,J.element),J.triggerEventDestroy()),Lt(window).unbind("resize",p),j.destroy(),X.remove(),e.removeClass("fc fc-rtl ui-widget")}function s(){return e.is(":visible")}function l(){return Lt("body").is(":visible")}function c(t){J&&t==J.name||u(t)}function u(t){tt++,J&&(Y("viewDestroy",J,J,J.element),k(),J.triggerEventDestroy(),L(),J.element.remove(),j.deactivateButton(J.name)),j.activateButton(t),J=new gt[t](Lt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(X),B),f(),_(),tt--}function f(t){(!J.start||t||et<J.start||et>=J.end)&&s()&&d(t)}function d(t){tt++,J.start&&(Y("viewDestroy",J,J,J.element),k(),w()),L(),J.render(et,t||0),g(),_(),(J.afterRender||ft)(),S(),T(),Y("viewRender",J,J,J.element),J.trigger("viewDisplay",Q),tt--,D()}function v(){s()&&(k(),w(),h(),g(),b())}function h(){U=o.contentHeight?o.contentHeight:o.height?o.height-(I?I.height():0)-Vt(X):Math.round(X.width()/Math.max(o.aspectRatio,.5))}function g(){U===_t&&h(),tt++,J.setHeight(U),J.setWidth(X.width()),tt--,V=e.outerWidth()}function p(){if(!tt)if(J.start){var t=++K;setTimeout(function(){t==K&&!tt&&s()&&V!=(V=e.outerWidth())&&(tt++,v(),J.trigger("windowResize",Q),tt--)},200)}else a()}function m(){w(),C()}function y(t){w(),b(t)}function b(t){s()&&(J.setEventData(nt),J.renderEvents(nt,t),J.trigger("eventAfterAllRender"))}function w(){J.triggerEventDestroy(),J.clearEvents(),J.clearEventData()}function D(){!o.lazyFetching||G(J.visStart,J.visEnd)?C():b()}function C(){$(J.visStart,J.visEnd)}function M(t){nt=t,b()}function E(t){y(t)}function S(){j.updateTitle(J.title)}function T(){var t=new Date;t>=J.start&&t<J.end?j.disableButton("today"):j.enableButton("today")}function x(t,e,n){J.select(t,e,n===_t||n)}function k(){J&&J.unselect()}function H(){f(-1)}function F(){f(1)}function R(){ot(et,-1),f()}function N(){ot(et,1),f()}function z(){et=new Date,f()}function W(t,e,n){t instanceof Date?et=Bt(t):st(et,t,e,n),f()}function A(t,e,n){t!==_t&&ot(et,t),e!==_t&&it(et,e),n!==_t&&Pt(et,n),f()}function O(){return Bt(et)}function L(){X.css({width:"100%",height:X.height(),overflow:"hidden"})}function _(){X.css({width:"",height:"",overflow:""})}function P(){return J}function q(t,e){if(e===_t)return o[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(o[t]=e,v())}function Y(t,e){if(o[t])return o[t].apply(e||Q,Array.prototype.slice.call(arguments,2))}var B=this;B.options=o,B.render=n,B.destroy=i,B.refetchEvents=m,B.reportEvents=M,B.reportEventChange=E,B.rerenderEvents=y,B.changeView=c,B.select=x,B.unselect=k,B.prev=H,B.next=F,B.prevYear=R,B.nextYear=N,B.today=z,B.gotoDate=W,B.incrementDate=A,B.formatDate=function(t,e){return lt(t,e,o)},B.formatDates=function(t,e,n){return ct(t,e,n,o)},B.getDate=O,B.getView=P,B.option=q,B.trigger=Y,at.call(B,o,t);var j,I,X,J,V,U,Z,G=B.isFetchNeeded,$=B.fetchEvents,Q=e[0],K=0,tt=0,et=new Date,nt=[];st(et,o.year,o.month,o.date),o.droppable&&Lt(document).bind("dragstart",function(t,e){var n=t.target,r=Lt(n);if(!r.parents(".fc").length){var a=o.dropAccept;(Lt.isFunction(a)?a.call(n,r):r.is(a))&&(Z=n,J.dragStart(Z,t,e))}}).bind("dragstop",function(t,e){Z&&(J.dragStop(Z,t,e),Z=null)})}function rt(l,c){function t(){if(f=c.theme?"ui":"fc",c.header)return d=Lt("<table class='fc-header' style='width:100%'/>").append(Lt("<tr/>").append(n("left")).append(n("center")).append(n("right")))}function e(){d.remove()}function n(t){var s=Lt("<td class='fc-header-"+t+"'/>"),e=c.header[t];return e&&Lt.each(e.split(" "),function(t){var i;0<t&&s.append("<span class='fc-header-space'/>"),Lt.each(this.split(","),function(t,e){var n;if("title"==e)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(f+"-corner-right"),i=null;else if(l[e]?n=l[e]:gt[e]&&(n=function(){o.removeClass(f+"-state-hover"),l.changeView(e)}),n){var r=c.theme?J(c.buttonIcons,e):null,a=J(c.buttonText,e),o=Lt("<span class='fc-button fc-button-"+e+" "+f+"-state-default'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span>").click(function(){o.hasClass(f+"-state-disabled")||n()}).mousedown(function(){o.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){o.removeClass(f+"-state-down")}).hover(function(){o.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){o.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(s);Gt(o),i||o.addClass(f+"-corner-left"),i=o}}),i&&i.addClass(f+"-corner-right")}),s}function r(t){d.find("h2").html(t)}function a(t){d.find("span.fc-button-"+t).addClass(f+"-state-active")}function o(t){d.find("span.fc-button-"+t).removeClass(f+"-state-active")}function i(t){d.find("span.fc-button-"+t).addClass(f+"-state-disabled")}function s(t){d.find("span.fc-button-"+t).removeClass(f+"-state-disabled")}var u=this;u.render=t,u.destroy=e,u.updateTitle=r,u.activateButton=a,u.deactivateButton=o,u.disableButton=i,u.enableButton=s;var f,d=Lt([])}function at(v,t){function e(t,e){return!w||t<w||D<e}function n(t,e){w=t,D=e,F=[];var n=++x,r=T.length;k=r;for(var a=0;a<r;a++)o(T[a],n)}function o(n,r){h(n,function(t){if(r==x){if(t){v.eventDataTransform&&(t=Lt.map(t,v.eventDataTransform)),n.eventDataTransform&&(t=Lt.map(t,n.eventDataTransform));for(var e=0;e<t.length;e++)t[e].source=n,f(t[e]);F=F.concat(t)}--k||E(F)}})}function h(t,n){var e,r,a=W.sourceFetchers;for(e=0;e<a.length;e++){if(!0===(r=a[e](t,w,D,n)))return;if("object"==typeof r)return void h(r,n)}var o=t.events;if(o)Lt.isFunction(o)?(g(),o(Bt(w),Bt(D),function(t){n(t),p()})):Lt.isArray(o)?n(o):n();else if(t.url){var i,s=t.success,l=t.error,c=t.complete;i=Lt.isFunction(t.data)?t.data():t.data;var u=Lt.extend({},i||{}),f=V(t.startParam,v.startParam),d=V(t.endParam,v.endParam);f&&(u[f]=Math.round(+w/1e3)),d&&(u[d]=Math.round(+D/1e3)),g(),Lt.ajax(Lt.extend({},A,t,{data:u,success:function(t){t=t||[];var e=z(s,this,arguments);Lt.isArray(e)&&(t=e),n(t)},error:function(){z(l,this,arguments),n()},complete:function(){z(c,this,arguments),p()}}))}else n()}function r(t){(t=a(t))&&(k++,o(t,x))}function a(t){if(Lt.isFunction(t)||Lt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t)return d(t),T.push(t),t}function i(e){T=Lt.grep(T,function(t){return!m(t,e)}),F=Lt.grep(F,function(t){return!m(t.source,e)}),E(F)}function s(t){var e,n,r=F.length,a=M().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=F[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,f(n));f(t),E(F)}function l(t,e){f(t),t.source||(e&&(S.events.push(t),t.source=S),F.push(t)),E(F)}function c(t){if(t){if(!Lt.isFunction(t)){var e=t+"";t=function(t){return t._id==e}}F=Lt.grep(F,t,!0);for(n=0;n<T.length;n++)Lt.isArray(T[n].events)&&(T[n].events=Lt.grep(T[n].events,t,!0))}else{F=[];for(var n=0;n<T.length;n++)Lt.isArray(T[n].events)&&(T[n].events=[])}E(F)}function u(e){return Lt.isFunction(e)?Lt.grep(F,e):e?(e+="",Lt.grep(F,function(t){return t._id==e})):F}function g(){H++||C("loading",null,!0,M())}function p(){--H||C("loading",null,!1,M())}function f(t){var e=t.source||{},n=V(e.ignoreTimezone,v.ignoreTimezone);t._id=t._id||(t.id===_t?"_fc"+O++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=Bt(t.start=N(t.start,n)),t.end=N(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?Bt(t.end):null,t.allDay===_t&&(t.allDay=V(e.allDayDefault,v.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function d(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=W.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function m(t,e){return t&&e&&y(t)==y(e)}function y(t){return("object"==typeof t?t.events||t.url:"")||t}var b=this;b.isFetchNeeded=e,b.fetchEvents=n,b.addEventSource=r,b.removeEventSource=i,b.updateEvent=s,b.renderEvent=l,b.removeEvents=c,b.clientEvents=u,b.normalizeEvent=f;for(var w,D,C=b.trigger,M=b.getView,E=b.reportEvents,S={events:[]},T=[S],x=0,k=0,H=0,F=[],R=0;R<t.length;R++)a(t[R])}function ot(t,e,n){return t.setFullYear(t.getFullYear()+e),n||Yt(t),t}function it(t,e,n){if(+t){var r=t.getMonth()+e,a=Bt(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||Yt(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function Pt(t,e,n){if(+t){var r=t.getDate()+e,a=Bt(t);a.setHours(9),a.setDate(r),t.setDate(r),n||Yt(t),s(t,a)}return t}function s(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*R)}function qt(t,e){return t.setMinutes(t.getMinutes()+e),t}function Yt(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Bt(t,e){return e?Yt(new Date(+t)):new Date(+t)}function jt(){for(var t,e=0;(t=new Date(1970,e++,1)).getHours(););return t}function G(t,e){return Math.round((Bt(t,!0)-Bt(e,!0))/F)}function st(t,e,n,r){e!==_t&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),n!==_t&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),r!==_t&&t.setDate(r)}function N(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(e===_t&&(e=!0),ut(t,e)||(t?new Date(t):null)):null}function ut(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),s(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),s(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function It(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function lt(t,e,n){return ct(t,null,e,n)}function ct(t,e,n,r){r=r||k;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;a<u;a++)if("'"==(o=n.charAt(a))){for(i=a+1;i<u;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;i<u;i++)if(")"==n.charAt(i)){var d=lt(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i);(d=lt(l,v,r))!=lt(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;a<i;i--)if(s=L[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function e(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function $(t){return t.end?n(t.end,t.allDay):Pt(Bt(t.start),1)}function n(t,e){return t=Bt(t),e||t.getHours()||t.getMinutes()?Pt(t,1):Yt(t)}function Q(t,o,i){t.unbind("mouseover").mouseover(function(t){for(var e,n,r,a=t.target;a!=this;)a=(e=a).parentNode;(n=e._fci)!==_t&&(e._fci=_t,r=o[n],i(r.event,r.element,r),Lt(t.target).trigger(t)),t.stopPropagation()})}function Xt(t,e,n){for(var r,a=0;a<t.length;a++)(r=Lt(t[a])).width(Math.max(0,e-K(r,n)))}function Jt(t,e,n){for(var r,a=0;a<t.length;a++)(r=Lt(t[a])).height(Math.max(0,e-Vt(r,n)))}function K(t,e){return r(t)+o(t)+(e?a(t):0)}function r(t){return(parseFloat(Lt.css(t[0],"paddingLeft",!0))||0)+(parseFloat(Lt.css(t[0],"paddingRight",!0))||0)}function a(t){return(parseFloat(Lt.css(t[0],"marginLeft",!0))||0)+(parseFloat(Lt.css(t[0],"marginRight",!0))||0)}function o(t){return(parseFloat(Lt.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(Lt.css(t[0],"borderRightWidth",!0))||0)}function Vt(t,e){return l(t)+u(t)+(e?c(t):0)}function l(t){return(parseFloat(Lt.css(t[0],"paddingTop",!0))||0)+(parseFloat(Lt.css(t[0],"paddingBottom",!0))||0)}function c(t){return(parseFloat(Lt.css(t[0],"marginTop",!0))||0)+(parseFloat(Lt.css(t[0],"marginBottom",!0))||0)}function u(t){return(parseFloat(Lt.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(Lt.css(t[0],"borderBottomWidth",!0))||0)}function ft(){}function Ut(t,e){return t-e}function tt(t){return Math.max.apply(Math,t)}function f(t){return(t<10?"0":"")+t}function J(t,e){if(t[e]!==_t)return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;0<=a;a--)if((n=t[r[a].toLowerCase()])!==_t)return n;return t[""]}function Zt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Gt(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function $t(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function et(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function z(t,e,n){if(Lt.isFunction(t)&&(t=[t]),t){var r,a;for(r=0;r<t.length;r++)a=t[r].apply(e,n)||a;return a}}function V(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==_t)return arguments[t]}function d(t,e){function n(t,e){e&&(it(t,e),t.setDate(1));var n=u("firstDay"),r=Bt(t,!0);r.setDate(1);var a=it(Bt(r),1),o=Bt(r);Pt(o,-(o.getDay()-n+7)%7),d(o);var i=Bt(a);Pt(i,(7-i.getDay()+n)%7),d(i,-1,!0);var s=v(),l=Math.round(G(i,o)/7);"fixed"==u("weekMode")&&(Pt(i,7*(6-l)),l=6),c.title=h(r,u("titleFormat")),c.start=r,c.end=a,c.visStart=o,c.visEnd=i,f(l,s,!0)}var c=this;c.render=n,g.call(c,t,e,"month");var u=c.opt,f=c.renderBasic,d=c.skipHiddenDays,v=c.getCellsPerWeek,h=e.formatDate}function v(t,e){function n(t,e){e&&Pt(t,7*e);var n=Pt(Bt(t),-(t.getDay()-l("firstDay")+7)%7),r=Pt(Bt(n),7),a=Bt(n);u(a);var o=Bt(r);u(o,-1,!0);var i=f();s.start=n,s.end=r,s.visStart=a,s.visEnd=o,s.title=d(a,Pt(Bt(o),-1),l("titleFormat")),c(1,i,!1)}var s=this;s.render=n,g.call(s,t,e,"basicWeek");var l=s.opt,c=s.renderBasic,u=s.skipHiddenDays,f=s.getCellsPerWeek,d=e.formatDates}function h(t,e){function n(t,e){e&&Pt(t,e),s(t,e<0?-1:1);var n=Bt(t,!0),r=Pt(Bt(n),1);a.title=l(t,o("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,i(1,1,!1)}var a=this;a.render=n,g.call(a,t,e,"basicDay");var o=a.opt,i=a.renderBasic,s=a.skipHiddenDays,l=e.formatDate}function g(o,t,e){function n(t,e,n){j=t,I=e,X=n,r(),z||a(),i()}function r(){G=et("theme")?"ui":"fc",$=et("columnFormat"),Q=et("weekNumbers"),K=et("weekNumberTitle"),tt="iso"!=et("weekNumberCalculation")?"w":"W"}function a(){P=Lt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(o)}function i(){var t=s();F&&F.remove(),F=Lt(t).appendTo(o),R=F.find("thead"),N=R.find(".fc-day-header"),z=F.find("tbody"),W=z.find("tr"),A=z.find(".fc-day"),O=W.find("td:first-child"),L=W.eq(0).find(".fc-day > div"),_=W.eq(0).find(".fc-day-content > div"),$t(R.add(R.find("tr"))),$t(W),W.eq(0).addClass("fc-first"),W.filter(":last").addClass("fc-last"),A.each(function(t,e){var n=it(Math.floor(t/I),t%I);nt("dayRender",H,n,Lt(e))}),v(A)}function s(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+l()+c()+"</table>"}function l(){var t,e,n=G+"-widget-header",r="";for(r+="<thead><tr>",Q&&(r+="<th class='fc-week-number "+n+"'>"+Zt(K)+"</th>"),t=0;t<I;t++)e=it(0,t),r+="<th class='fc-day-header fc-"+oe[e.getDay()]+" "+n+"'>"+Zt(ct(e,$))+"</th>";return r+="</tr></thead>"}function c(){var t,e,n,r=G+"-widget-content",a="";for(a+="<tbody>",t=0;t<j;t++){for(a+="<tr class='fc-week'>",Q&&(n=it(t,0),a+="<td class='fc-week-number "+r+"'><div>"+Zt(ct(n,tt))+"</div></td>"),e=0;e<I;e++)a+=u(n=it(t,e));a+="</tr>"}return a+="</tbody>"}function u(t){var e=G+"-widget-content",n=H.start.getMonth(),r=Yt(new Date),a="",o=["fc-day","fc-"+oe[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",G+"-state-highlight"):t<r?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"' data-date='"+ct(t,"yyyy-MM-dd")+"'><div>",X&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function f(t){var n,r,a,e=t-R.height();"variable"==et("weekMode")?n=r=Math.floor(e/(1==j?2:6)):(n=Math.floor(e/j),r=e-n*(j-1)),O.each(function(t,e){t<j&&(a=Lt(e)).find("> div").css("min-height",(t==j-1?r:n)-Vt(a))})}function d(t){q=t,U.clear(),Z.clear(),B=0,Q&&(B=R.find("th.fc-week-number").outerWidth()),Y=Math.floor((q-B)/I),Xt(N.slice(0,-1),Y)}function v(t){t.click(h).mousedown(ot)}function h(t){if(!et("selectable")){var e=ut(Lt(this).data("date"));nt("dayClick",this,e,!0,t)}}function g(t,e,n){n&&J.build();for(var r=lt(t,e),a=0;a<r.length;a++){var o=r[a];v(p(o.row,o.leftCol,o.row,o.rightCol))}}function p(t,e,n,r){var a=J.rect(t,e,n,r,o);return rt(a,o)}function m(t){return Bt(t)}function y(t,e){g(t,Pt(Bt(e),1),!0)}function b(){at()}function w(t,e,n){var r=st(t),a=A[r.row*I+r.col];nt("dayClick",a,t,e,n)}function D(t,e){V.start(function(t){at(),t&&p(t.row,t.col,t.row,t.col)},e)}function C(t,e,n){var r=V.stop();if(at(),r){var a=it(r);nt("drop",t,a,!0,e,n)}}function M(t){return Bt(t.start)}function E(t){return U.left(t)}function S(t){return U.right(t)}function T(t){return Z.left(t)}function x(t){return Z.right(t)}function k(t){return W.eq(t)}var H=this;H.renderBasic=n,H.setHeight=f,H.setWidth=d,H.renderDayOverlay=g,H.defaultSelectionEnd=m,H.renderSelection=y,H.clearSelection=b,H.reportDayClick=w,H.dragStart=D,H.dragStop=C,H.defaultEventEnd=M,H.getHoverListener=function(){return V},H.colLeft=E,H.colRight=S,H.colContentLeft=T,H.colContentRight=x,H.getIsCellAllDay=function(){return!0},H.allDayRow=k,H.getRowCnt=function(){return j},H.getColCnt=function(){return I},H.getColWidth=function(){return Y},H.getDaySegmentContainer=function(){return P},Kt.call(H,o,t,e),ee.call(H),te.call(H),dt.call(H);var F,R,N,z,W,A,O,L,_,P,q,Y,B,j,I,X,J,V,U,Z,G,$,Q,K,tt,et=H.opt,nt=H.trigger,rt=H.renderOverlay,at=H.clearOverlays,ot=H.daySelectionMousedown,it=H.cellToDate,st=H.dateToCell,lt=H.rangeToSegments,ct=t.formatDate;Gt(o.addClass("fc-grid")),J=new ne(function(n,r){var a,o,i;N.each(function(t,e){a=Lt(e),o=a.offset().left,t&&(i[1]=o),i=[o],r[t]=i}),i[1]=o+a.outerWidth(),W.each(function(t,e){t<j&&(a=Lt(e),o=a.offset().top,t&&(i[1]=o),i=[o],n[t]=i)}),i[1]=o+a.outerHeight()}),V=new re(J),U=new ae(function(t){return L.eq(t)}),Z=new ae(function(t){return _.eq(t)})}function dt(){function t(t,e){n.renderDayEvents(t,e)}function e(){n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=t,n.clearEvents=e,Z.call(n)}function p(t,e){function n(t,e){e&&Pt(t,7*e);var n=Pt(Bt(t),-(t.getDay()-l("firstDay")+7)%7),r=Pt(Bt(n),7),a=Bt(n);u(a);var o=Bt(r);u(o,-1,!0);var i=f();s.title=d(a,Pt(Bt(o),-1),l("titleFormat")),s.start=n,s.end=r,s.visStart=a,s.visEnd=o,c(i)}var s=this;s.render=n,y.call(s,t,e,"agendaWeek");var l=s.opt,c=s.renderAgenda,u=s.skipHiddenDays,f=s.getCellsPerWeek,d=e.formatDates}function m(t,e){function n(t,e){e&&Pt(t,e),s(t,e<0?-1:1);var n=Bt(t,!0),r=Pt(Bt(n),1);a.title=l(t,o("titleFormat")),a.start=a.visStart=n,a.end=a.visEnd=r,i(1)}var a=this;a.render=n,y.call(a,t,e,"agendaDay");var o=a.opt,i=a.renderAgenda,s=a.skipHiddenDays,l=e.formatDate}function y(l,t,e){function n(t){ut=t,r(),_?c():a()}function r(){pt=Et("theme")?"ui":"fc",mt=Et("isRTL"),yt=It(Et("minTime")),bt=It(Et("maxTime")),wt=Et("columnFormat"),Dt=Et("weekNumbers"),Ct=Et("weekNumberTitle"),Mt="iso"!=Et("weekNumberCalculation")?"w":"W",st=Et("snapMinutes")||Et("slotMinutes")}function a(){var t,e,n,r,a,o=pt+"-widget-header",i=pt+"-widget-content",s=Et("slotMinutes")%15==0;for(c(),V=Lt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(l),Et("allDaySlot")?(U=Lt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(V),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Et("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",Z=Lt(t).appendTo(V),h((G=Z.find("tr")).find("td")),V.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):U=Lt([]),$=Lt("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(V),Q=Lt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo($),K=Lt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Q),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=qt(Bt(e=jt()),bt),qt(e,yt),n=ft=0;e<r;n++)t+="<tr class='fc-slot"+n+" "+((a=e.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(s&&a?"&nbsp;":At(e,Et("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",qt(e,Et("slotMinutes")),ft++;g((tt=Lt(t+="</tbody></table>").appendTo(Q)).find("td"))}function c(){var t=o();_&&_.remove(),_=Lt(t).appendTo(l),P=_.find("thead"),q=P.find("th").slice(1,-1),Y=_.find("tbody"),B=Y.find("td").slice(0,-1),j=B.find("> div"),I=B.find(".fc-day-content > div"),X=B.eq(0),J=j.eq(0),$t(P.add(P.find("tr"))),$t(Y.add(Y.find("tr")))}function o(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+i()+s()+"</table>"}function i(){var t,e,n,r=pt+"-widget-header",a="";for(a+="<thead><tr>",Dt?(t=Nt(0,0),e=At(t,Mt),mt?e+=Ct:e=Ct+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+Zt(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;n<ut;n++)t=Nt(0,n),a+="<th class='fc-"+oe[t.getDay()]+" fc-col"+n+" "+r+"'>"+Zt(At(t,wt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}function s(){var t,e,n,r,a=pt+"-widget-header",o=pt+"-widget-content",i=Yt(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",n="",e=0;e<ut;e++)t=Nt(0,e),r=["fc-col"+e,"fc-"+oe[t.getDay()],o],+t==+i?r.push(pt+"-state-highlight","fc-today"):t<i?r.push("fc-past"):r.push("fc-future"),n+="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";return s+=n,s+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}function u(t){t===_t&&(t=nt),nt=t,Ot={};var e=Y.position().top,n=$.position().top,r=Math.min(t-e,tt.height()+n+1);J.height(r-Vt(X)),V.css("top",e),$.height(r-n-1),it=tt.find("tr:first").height()+1,lt=Et("slotMinutes")/st,ct=it/lt}function f(t){t,ht.clear(),gt.clear();var e=P.find("th:first");Z&&(e=e.add(Z.find("th:first"))),e=e.add(tt.find("th:first")),rt=0,Xt(e.width("").each(function(t,e){rt=Math.max(rt,Lt(e).outerWidth())}),rt);var n=_.find(".fc-agenda-gutter");Z&&(n=n.add(Z.find("th.fc-agenda-gutter")));var r=$[0].clientWidth;(ot=$.width()-r)?(Xt(n,ot),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),at=Math.floor((r-rt)/ut),Xt(q.slice(0,-1),at)}function d(){function t(){$.scrollTop(r)}var e=jt(),n=Bt(e);n.setHours(Et("firstHour"));var r=T(e,n)+1;t(),setTimeout(t,0)}function v(){d()}function h(t){t.click(p).mousedown(Ft)}function g(t){t.click(p).mousedown(z)}function p(t){if(!Et("selectable")){var e=Math.min(ut-1,Math.floor((t.pageX-_.offset().left-rt)/at)),n=Nt(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Et("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+yt),St("dayClick",B[e],n,!1,t)}else St("dayClick",B[e],n,!0,t)}}function m(t,e,n){n&&dt.build();for(var r=Wt(t,e),a=0;a<r.length;a++){var o=r[a];h(y(o.row,o.leftCol,o.row,o.rightCol))}}function y(t,e,n,r){var a=dt.rect(t,e,n,r,V);return Tt(a,V)}function b(t,e){for(var n=0;n<ut;n++){var r=Nt(0,n),a=Pt(Bt(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=dt.rect(0,n,0,n,Q),l=T(r,o),c=T(r,i);s.top=l,s.height=c-l,g(Tt(s,Q))}}}function w(t){return ht.left(t)}function D(t){return gt.left(t)}function C(t){return ht.right(t)}function M(t){return gt.right(t)}function E(t){return Et("allDaySlot")&&!t.row}function S(t){var e=Nt(0,t.col),n=t.row;return Et("allDaySlot")&&n--,0<=n&&qt(e,yt+n*st),e}function T(t,e){if(e<qt(Bt(t=Bt(t,!0)),yt))return 0;if(e>=qt(Bt(t),bt))return tt.height();var n=Et("slotMinutes"),r=60*e.getHours()+e.getMinutes()-yt,a=Math.floor(r/n),o=Ot[a];return o===_t&&(o=Ot[a]=tt.find("tr").eq(a).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+it*(r%n/n)))}function x(){return G}function k(t){var e=Bt(t.start);return t.allDay?e:qt(e,Et("defaultEventMinutes"))}function H(t,e){return e?Bt(t):qt(Bt(t),Et("slotMinutes"))}function F(t,e,n){n?Et("allDaySlot")&&m(t,Pt(Bt(e),1),!0):R(t,e)}function R(t,e){var n=Et("selectHelper");if(dt.build(),n){var r=zt(t).col;if(0<=r&&r<ut){var a=dt.rect(0,r,0,r,Q),o=T(t,t),i=T(t,e);if(o<i){if(a.top=o,a.height=i-o,a.left+=2,a.width-=5,Lt.isFunction(n)){var s=n(t,e);s&&(a.position="absolute",et=Lt(s).css(a).appendTo(Q))}else a.isStart=!0,a.isEnd=!0,(et=Lt(Rt({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},a))).css("opacity",Et("dragOpacity"));et&&(g(et),Q.append(et),Xt(et,a.width,!0),Jt(et,a.height,!0))}}}else b(t,e)}function N(){xt(),et&&(et.remove(),et=null)}function z(t){var a;1==t.which&&Et("selectable")&&(Ht(t),vt.start(function(t,e){if(N(),t&&t.col==e.col&&!E(t)){var n=S(e),r=S(t);R((a=[n,qt(Bt(n),st),r,qt(Bt(r),st)].sort(Ut))[0],a[3])}else a=null},t),Lt(document).one("mouseup",function(t){vt.stop(),a&&(+a[0]==+a[1]&&W(a[0],!1,t),kt(a[0],a[3],!1,t))}))}function W(t,e,n){St("dayClick",B[zt(t).col],t,e,n)}function A(t,e){vt.start(function(t){if(xt(),t)if(E(t))y(t.row,t.col,t.row,t.col);else{var e=S(t);b(e,qt(Bt(e),Et("defaultEventMinutes")))}},e)}function O(t,e,n){var r=vt.stop();xt(),r&&St("drop",t,S(r),E(r),e,n)}var L=this;L.renderAgenda=n,L.setWidth=f,L.setHeight=u,L.afterRender=v,L.defaultEventEnd=k,L.timePosition=T,L.getIsCellAllDay=E,L.allDayRow=x,L.getCoordinateGrid=function(){return dt},L.getHoverListener=function(){return vt},L.colLeft=w,L.colRight=C,L.colContentLeft=D,L.colContentRight=M,L.getDaySegmentContainer=function(){return U},L.getSlotSegmentContainer=function(){return K},L.getMinMinute=function(){return yt},L.getMaxMinute=function(){return bt},L.getSlotContainer=function(){return Q},L.getRowCnt=function(){return 1},L.getColCnt=function(){return ut},L.getColWidth=function(){return at},L.getSnapHeight=function(){return ct},L.getSnapMinutes=function(){return st},L.defaultSelectionEnd=H,L.renderDayOverlay=m,L.renderSelection=F,L.clearSelection=N,L.reportDayClick=W,L.dragStart=A,L.dragStop=O,Kt.call(L,l,t,e),ee.call(L),te.call(L),Qt.call(L);var _,P,q,Y,B,j,I,X,J,V,U,Z,G,$,Q,K,tt,et,nt,rt,at,ot,it,st,lt,ct,ut,ft,dt,vt,ht,gt,pt,mt,yt,bt,wt,Dt,Ct,Mt,Et=L.opt,St=L.trigger,Tt=L.renderOverlay,xt=L.clearOverlays,kt=L.reportSelection,Ht=L.unselect,Ft=L.daySelectionMousedown,Rt=L.slotSegHtml,Nt=L.cellToDate,zt=L.dateToCell,Wt=L.rangeToSegments,At=t.formatDate,Ot={};Gt(l.addClass("fc-agenda")),dt=new ne(function(t,n){function e(t){return Math.max(s,Math.min(l,t))}var r,a,o;q.each(function(t,e){r=Lt(e),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),Et("allDaySlot")&&(a=(r=G).offset().top,t[0]=[a,a+r.outerHeight()]);for(var i=Q.offset().top,s=$.offset().top,l=s+$.outerHeight(),c=0;c<ft*lt;c++)t.push([e(i+ct*c),e(i+ct*(c+1))])}),vt=new re(dt),ht=new ae(function(t){return j.eq(t)}),gt=new ae(function(t){return I.eq(t)})}function Qt(){function t(t,e){var n,r=t.length,a=[],o=[];for(n=0;n<r;n++)t[n].allDay?a.push(t[n]):o.push(t[n]);S("allDaySlot")&&(w(a,e),h()),s(i(o),e)}function e(){r().empty(),x().empty()}function i(t){var e,n,r,a,o,i=z(),s=m(),l=p(),c=Lt.map(t,d),u=[];for(n=0;n<i;n++)for(qt(e=N(0,n),s),o=X(o=f(t,c,e,qt(Bt(e),l-s))),r=0;r<o.length;r++)(a=o[r]).col=n,u.push(a);return u}function f(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],v=t.length;for(a=0;a<v;a++)i=(o=t[a]).start,n<(s=e[a])&&i<r&&(i<n?(l=Bt(n),u=!1):(l=i,u=!0),r<s?(c=Bt(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(U)}function d(t){return t.end?Bt(t.end):qt(Bt(t.start),S("defaultEventMinutes"))}function s(t,e){var n,r,a,o,i,s,l,c,u,f,d,v,h,g,p,m,y=t.length,b="",w=x(),D=S("isRTL");for(n=0;n<y;n++)a=(r=t[n]).event,o=k(r.start,r.start),i=k(r.start,r.end),s=F(r.col),l=R(r.col),u=(c=(l-=.025*(c=l-s))-s)*(r.forwardCoord-r.backwardCoord),S("slotEventOverlap")&&(u=Math.max(2*(u-10),u)),D?f=(d=l-r.backwardCoord*c)-u:d=(f=s+r.backwardCoord*c)+u,f=Math.max(f,s),u=(d=Math.min(d,l))-f,r.top=o,r.left=f,r.outerWidth=u,r.outerHeight=i-o,b+=C(a,r);for(w[0].innerHTML=b,v=w.children(),n=0;n<y;n++)a=(r=t[n]).event,h=Lt(v[n]),!1===(g=T("eventRender",a,a,h))?h.remove():(g&&!0!==g&&(h.remove(),h=Lt(g).css({position:"absolute",top:r.top,left:r.left}).appendTo(w)),r.element=h,a._id===e?M(a,h,r):h[0]._fci=n,L(a,h));for(Q(w,t,M),n=0;n<y;n++)(h=(r=t[n]).element)&&(r.vsides=Vt(h,!0),r.hsides=K(h,!0),(p=h.find(".fc-event-title")).length&&(r.contentTop=p[0].offsetTop));for(n=0;n<y;n++)(h=(r=t[n]).element)&&(h[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",m=Math.max(0,r.outerHeight-r.vsides),h[0].style.height=m+"px",a=r.event,r.contentTop!==_t&&m-r.contentTop<10&&(h.find("div.fc-event-time").text(j(a.start,S("timeFormat"))+" - "+a.title),h.find("div.fc-event-title").remove()),T("eventAfterRender",a,a,h))}function C(t,e){var n="<",r=t.url,a=et(t,S),o=["fc-event","fc-event-vert"];return l(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+Zt(t.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Zt(I(t.start,t.end,S("timeFormat")))+"</div><div class='fc-event-title'>"+Zt(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&c(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function M(t,e,n){var r=e.find("div.fc-event-time");l(t)&&a(t,e,r),n.isEnd&&c(t)&&o(t,e,r),v(t,e)}function n(a,o,t){function i(){u||(o.width(n).height("").draggable("option","grid",null),u=!0)}var n,s,l,c=t.isStart,u=!0,r=g(),f=W(),d=A(),v=O(),h=m();o.draggable({opacity:S("dragOpacity","month"),revertDuration:S("dragRevertDuration"),start:function(t,e){T("eventDragStart",o,a,t,e),P(a,o),n=o.width(),r.start(function(t,e){if(B(),t){s=!1;var n=N(0,e.col),r=N(0,t.col);l=G(r,n),t.row?c?u&&(o.width(f-10),Jt(o,d*Math.round((a.end?(a.end-a.start)/pt:S("defaultEventMinutes"))/v)),o.draggable("option","grid",[f,1]),u=!1):s=!0:(Y(Pt(Bt(a.start),l),Pt($(a),l)),i()),s=s||u&&!l}else i(),s=!0;o.draggable("option","revert",s)},t,"drag")},stop:function(t,e){if(r.stop(),B(),T("eventDragStop",o,a,t,e),s)i(),o.css("filter",""),_(a,o);else{var n=0;u||(n=Math.round((o.offset().top-y().offset().top)/d)*v+h-(60*a.start.getHours()+a.start.getMinutes())),q(this,a,l,n,u,t,e)}}})}function a(r,i,a){function s(){B(),u&&(d?(a.hide(),i.draggable("option","grid",null),Y(Pt(Bt(r.start),p),Pt($(r),p))):(t(m),a.css("display",""),i.draggable("option","grid",[D,C])))}function t(t){var e,n=qt(Bt(r.start),t);r.end&&(e=qt(Bt(r.end),t)),a.text(I(n,e,S("timeFormat")))}var l,c,u,f,d,v,h,g,p,m,y,b=E.getCoordinateGrid(),w=z(),D=W(),C=A(),M=O();i.draggable({scroll:!1,grid:[D,C],axis:1==w&&"y",opacity:S("dragOpacity"),revertDuration:S("dragRevertDuration"),start:function(t,e){T("eventDragStart",i,r,t,e),P(r,i),b.build(),l=i.position(),c=b.cell(
t.pageX,t.pageY),u=f=!0,d=v=H(c),h=g=0,m=y=p=0},drag:function(t,e){var n=b.cell(t.pageX,t.pageY);if(u=!!n){if(d=H(n),(h=Math.round((e.position.left-l.left)/D))!=g){var r=N(0,c.col),a=c.col+h;a=Math.max(0,a),a=Math.min(w-1,a);var o=N(0,a);p=G(o,r)}d||(m=Math.round((e.position.top-l.top)/C)*M)}u==f&&d==v&&h==g&&m==y||(s(),f=u,v=d,g=h,y=m),i.draggable("option","revert",!u)},stop:function(t,e){B(),T("eventDragStop",i,r,t,e),u&&(d||p||m)?q(this,r,p,d?0:m,d,t,e):(d=!(u=!0),m=p=h=0,s(),i.css("filter",""),i.css(l),_(r,i))}})}function o(n,r,a){var o,i,s=A(),l=O();r.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(t,e){o=i=0,P(n,r),T("eventResizeStart",this,n,t,e)},resize:function(t,e){(o=Math.round((Math.max(s,r.height())-e.originalSize.height)/s))!=i&&(a.text(I(n.start,o||n.end?qt(u(n),l*o):null,S("timeFormat"))),i=o)},stop:function(t,e){T("eventResizeStop",this,n,t,e),o?b(this,n,0,l*o,t,e):_(n,r)}})}var E=this;E.renderEvents=t,E.clearEvents=e,E.slotSegHtml=C,Z.call(E);var S=E.opt,T=E.trigger,l=E.isEventDraggable,c=E.isEventResizable,u=E.eventEnd,v=E.eventElementHandlers,h=E.setHeight,r=E.getDaySegmentContainer,x=E.getSlotSegmentContainer,g=E.getHoverListener,p=E.getMaxMinute,m=E.getMinMinute,k=E.timePosition,H=E.getIsCellAllDay,F=E.colContentLeft,R=E.colContentRight,N=E.cellToDate,z=E.getColCnt,W=E.getColWidth,A=E.getSnapHeight,O=E.getSnapMinutes,y=E.getSlotContainer,L=E.reportEventElement,_=E.showEvents,P=E.hideEvents,q=E.eventDrop,b=E.eventResize,Y=E.renderDayOverlay,B=E.clearOverlays,w=E.renderDayEvents,D=E.calendar,j=D.formatDate,I=D.formatDates;E.draggableDayEvent=n}function X(t){var e,n=b(t),r=n[0];if(w(n),r){for(e=0;e<r.length;e++)D(r[e]);for(e=0;e<r.length;e++)C(r[e],0,0)}return M(n)}function b(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&E(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function w(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)E(a,t[o],a.forwardSegs)}function D(t){var e,n,r=t.forwardSegs,a=0;if(t.forwardPressure===_t){for(e=0;e<r.length;e++)D(n=r[e]),a=Math.max(a,1+n.forwardPressure);t.forwardPressure=a}}function C(t,e,n){var r,a=t.forwardSegs;if(t.forwardCoord===_t)for(a.length?(a.sort(T),C(a[0],e+1,n),t.forwardCoord=a[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),r=0;r<a.length;r++)C(a[r],0,t.forwardCoord)}function M(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}function E(t,e,n){n=n||[];for(var r=0;r<e.length;r++)S(t,e[r])&&n.push(e[r]);return n}function S(t,e){return t.end>e.start&&t.start<e.end}function T(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||U(t,e)}function U(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function Kt(t,n,r){function a(t,e){var n=P[t];return Lt.isPlainObject(n)?J(n,e||r):n}function c(t,e){return n.trigger.apply(n,[t,e||N].concat(Array.prototype.slice.call(arguments,2),[N]))}function e(t){var e=t.source||{};return V(t.startEditable,e.startEditable,a("eventStartEditable"),t.editable,e.editable,a("editable"))&&!a("disableDragging")}function o(t){var e=t.source||{};return V(t.durationEditable,e.durationEditable,a("eventDurationEditable"),t.editable,e.editable,a("editable"))&&!a("disableResizing")}function i(t){O={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],O[n._id]?O[n._id].push(n):O[n._id]=[n]}function s(){O={},L={},_=[]}function l(t){return t.end?Bt(t.end):z(t)}function u(t,e){_.push({event:t,element:e}),L[t._id]?L[t._id].push(e):L[t._id]=[e]}function f(){Lt.each(_,function(t,e){N.trigger("eventDestroy",e.event,e.event,e.element)})}function d(e,n){n.click(function(t){if(!n.hasClass("ui-draggable-dragging")&&!n.hasClass("ui-resizable-resizing"))return c("eventClick",this,e,t)}).hover(function(t){c("eventMouseover",this,e,t)},function(t){c("eventMouseout",this,e,t)})}function v(t,e){g(t,e,"show")}function h(t,e){g(t,e,"hide")}function g(t,e,n){var r,a=L[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function p(t,e,n,r,a,o,i){var s=e.allDay,l=e._id;y(O[l],n,r,a),c("eventDrop",t,e,n,r,a,function(){y(O[l],-n,-r,s),A(l)},o,i),A(l)}function m(t,e,n,r,a,o){var i=e._id;b(O[i],n,r),c("eventResize",t,e,n,r,function(){b(O[i],-n,-r),A(i)},a,o),A(i)}function y(t,e,n,r){n=n||0;for(var a,o=t.length,i=0;i<o;i++)a=t[i],r!==_t&&(a.allDay=r),qt(Pt(a.start,e,!0),n),a.end&&(a.end=qt(Pt(a.end,e,!0),n)),W(a,P)}function b(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=qt(Pt(l(r),e,!0),n),W(r,P)}function w(t){return"object"==typeof t&&(t=t.getDay()),B[t]}function D(){return q}function C(t,e,n){for(e=e||1;B[(t.getDay()+(n?e:0)+7)%7];)Pt(t,e)}function M(){return T(S(E.apply(null,arguments)))}function E(t,e){var n=N.getColCnt(),r=X?-1:1,a=X?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function S(t){var e=N.visStart.getDay();return t+=j[e],7*Math.floor(t/q)+I[(t%q+q)%q]-e}function T(t){var e=Bt(N.visStart);return Pt(e,t),e}function x(t){return F(H(k(t)))}function k(t){return G(t,N.visStart)}function H(t){var e=N.visStart.getDay();return t+=e,Math.floor(t/7)*q+j[(t%7+7)%7]-j[e]}function F(t){var e=N.getColCnt(),n=X?-1:1,r=X?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}function R(t,e){for(var n=N.getRowCnt(),r=N.getColCnt(),a=[],o=k(t),i=k(e),s=H(o),l=H(i)-1,c=0;c<n;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(d<=v){var h=F(d),g=F(v),p=[h.col,g.col].sort(),m=S(d)==o,y=S(v)+1==i;a.push({row:c,leftCol:p[0],rightCol:p[1],isStart:m,isEnd:y})}}return a}var N=this;N.element=t,N.calendar=n,N.name=r,N.opt=a,N.trigger=c,N.isEventDraggable=e,N.isEventResizable=o,N.setEventData=i,N.clearEventData=s,N.eventEnd=l,N.reportEventElement=u,N.triggerEventDestroy=f,N.eventElementHandlers=d,N.showEvents=v,N.hideEvents=h,N.eventDrop=p,N.eventResize=m;var z=N.defaultEventEnd,W=n.normalizeEvent,A=n.reportEventChange,O={},L={},_=[],P=n.options;N.isHiddenDay=w,N.skipHiddenDays=C,N.getCellsPerWeek=D,N.dateToCell=x,N.dateToDayOffset=k,N.dayOffsetToCellOffset=H,N.cellOffsetToCell=F,N.cellToDate=M,N.cellToCellOffset=E,N.cellOffsetToDayOffset=S,N.dayOffsetToDate=T,N.rangeToSegments=R;var q,Y=a("hiddenDays")||[],B=[],j=[],I=[],X=a("isRTL");!function(){!1===a("weekends")&&Y.push(0,6);for(var t=0,e=0;t<7;t++)j[t]=e,B[t]=-1!=Lt.inArray(t,Y),B[t]||(I[e]=t,e++);if(!(q=e))throw"invalid hiddenDays"}()}function Z(){function t(t,e){var n=o(t,!1,!0);vt(n,function(t,e){S(t.event,e)}),m(n,e),vt(n,function(t,e){D("eventAfterRender",t.event,t.event,e)})}function v(t,n,r){var e=o([t],!0,!1),a=[];return vt(e,function(t,e){t.row===n&&e.css("top",r),a.push(e[0])}),a}function o(t,e,n){var r,a,o=_(),i=e?Lt("<div/>"):o,s=l(t);return c(s),r=u(s),i[0].innerHTML=r,a=i.children(),e&&o.append(a),f(s,a),vt(s,function(t,e){t.hsides=K(e,!0)}),vt(s,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),vt(s,function(t,e){t.outerHeight=e.outerHeight(!0)}),d(s,n),s}function l(t){for(var e=[],n=0;n<t.length;n++){var r=a(t[n]);e.push.apply(e,r)}return e}function a(t){for(var e=t.start,n=$(t),r=I(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function c(t){for(var e=w("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?O:W,o=(e?r.isStart:r.isEnd)?L:A,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function u(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n]);return e}function r(t){var e="",n=w("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];C(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=et(r,w);return e+=a?"<a href='"+Zt(a)+"'":"<div",e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+Zt(P(r.start,r.end,w("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+Zt(r.title||"")+"</span></div>",t.isEnd&&M(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(a?"a":"div")+">"}function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.event,o=e.eq(n),i=D("eventRender",a,a,o);!1===i?o.remove():(i&&!0!==i&&(i=Lt(i).css({position:"absolute",left:r.left}),o.replaceWith(i),o=i),r.element=o)}}function d(t,e){var n=i(t),r=p(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(o=0;o<r.length;o++)a.push(r[o].position().top);vt(t,function(t,e){e.css("top",a[t.row]+t.top)})}function i(t){for(var e=R(),n=N(),r=[],a=h(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=tt(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(tt(s))}return r}function h(t){var e,n,r,a=R(),o=[];for(e=0;e<t.length;e++)r=(n=t[e]).row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=s(o[r]||[]);return o}function s(t){for(var e=[],n=g(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function g(t){t.sort(ht);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&nt(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function p(){var t,e=R(),n=[];for(t=0;t<e;t++)n[t]=z(t).find("div.fc-day-content > div");return n}function m(t,a){var e=_();vt(t,function(t,e,n){var r=t.event;r._id===a?y(r,e,t):e[0]._fci=n}),Q(e,t,y)}function y(t,e,n){C(t)&&b.draggableDayEvent(t,e,n),n.isEnd&&M(t)&&b.resizableDayEvent(t,e,n),T(t,e)}function e(i,s){var l,n=j();s.draggable({delay:50,opacity:w("dragOpacity"),revertDuration:w("dragRevertDuration"),start:function(t,e){D("eventDragStart",s,i,t,e),k(i,s),n.start(function(t,e,n,r){if(s.draggable("option","revert",!t||!n&&!r),Y(),t){var a=X(e),o=X(t);l=G(o,a),q(Pt(Bt(i.start),l),Pt($(i),l))}else l=0},t,"drag")},stop:function(t,e){n.stop(),Y(),D("eventDragStop",s,i,t,e),l?H(this,i,l,0,i.allDay,t,e):(s.css("filter",""),x(i,s))}})}function n(u,r,f){var d=w("isRTL")?"w":"e",t=r.find(".ui-resizable-"+d),a=!1;Gt(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){a&&(t.preventDefault(),t.stopImmediatePropagation())}),t.mousedown(function(t){function e(t){D("eventResizeStop",this,u,t),Lt("body").css("cursor",""),n.stop(),Y(),o&&F(this,u,o,0,t),setTimeout(function(){a=!1},0)}if(1==t.which){a=!0;var o,i,n=j(),s=(R(),N(),r.css("top")),l=Lt.extend({},u),c=Z(U(u.start));B(),Lt("body").css("cursor",d+"-resize").one("mouseup",e),D("eventResizeStart",this,u,t),n.start(function(t,e){if(t){var n=J(e),r=J(t);if(r=Math.max(r,c),o=V(r)-V(n)){l.end=Pt(E(u),o,!0);var a=i;i=v(l,f.row,s),(i=Lt(i)).find("*").css("cursor",d+"-resize"),a&&a.remove(),k(u)}else i&&(x(u),i.remove(),i=null);Y(),q(u.start,Pt($(u),o))}},t)}})}var b=this;b.renderDayEvents=t,b.draggableDayEvent=e,b.resizableDayEvent=n;var w=b.opt,D=b.trigger,C=b.isEventDraggable,M=b.isEventResizable,E=b.eventEnd,S=b.reportEventElement,T=b.eventElementHandlers,x=b.showEvents,k=b.hideEvents,H=b.eventDrop,F=b.eventResize,R=b.getRowCnt,N=b.getColCnt,z=(b.getColWidth,b.allDayRow),W=b.colLeft,A=b.colRight,O=b.colContentLeft,L=b.colContentRight,_=(b.dateToCell,b.getDaySegmentContainer),P=b.calendar.formatDates,q=b.renderDayOverlay,Y=b.clearOverlays,B=b.clearSelection,j=b.getHoverListener,I=b.rangeToSegments,X=b.cellToDate,J=b.cellToCellOffset,V=b.cellOffsetToDayOffset,U=b.dateToDayOffset,Z=b.dayOffsetToCellOffset}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function vt(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ht(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function te(){function t(t,e,n){i(),e||(e=r(t,n)),u(t,e,n),s(t,e,n)}function i(t){o&&(o=!1,f(),a("unselect",null,t))}function s(t,e,n,r){o=!0,a("select",null,t,e,n,r)}function e(t){var n=l.cellToDate,r=l.getIsCellAllDay,e=l.getHoverListener(),a=l.reportDayClick;if(1==t.which&&c("selectable")){i(t);var o;e.start(function(t,e){f(),t&&r(t)?(o=[n(e),n(t)].sort(Ut),u(o[0],o[1],!0)):o=null},t),Lt(document).one("mouseup",function(t){e.stop(),o&&(+o[0]==+o[1]&&a(o[0],!0,t),s(o[0],o[1],!0,t))})}}var l=this;l.select=t,l.unselect=i,l.reportSelection=s,l.daySelectionMousedown=e;var c=l.opt,a=l.trigger,r=l.defaultSelectionEnd,u=l.renderSelection,f=l.clearSelection,o=!1;c("selectable")&&c("unselectAuto")&&Lt(document).mousedown(function(t){var e=c("unselectCancel");e&&Lt(t.target).parents(e).length||i(t)})}function ee(){function t(t,e){var n=a.shift();return n||(n=Lt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=e[0]&&n.appendTo(e),r.push(n.css(t).show()),n}function e(){for(var t;t=r.shift();)a.push(t.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=e;var r=[],a=[]}function ne(t){var s,l,e=this;e.build=function(){t(s=[],l=[])},e.cell=function(t,e){var n,r=s.length,a=l.length,o=-1,i=-1;for(n=0;n<r;n++)if(e>=s[n][0]&&e<s[n][1]){o=n;break}for(n=0;n<a;n++)if(t>=l[n][0]&&t<l[n][1]){i=n;break}return 0<=o&&0<=i?{row:o,col:i}:null},e.rect=function(t,e,n,r,a){var o=a.offset();return{top:s[t][0]-o.top,left:l[e][0]-o.left,width:l[r][1]-l[e][0],height:s[n][1]-s[t][0]}}}function re(r){function a(t){x(t);var e=r.cell(t.pageX,t.pageY);(!e!=!l||e&&(e.row!=l.row||e.col!=l.col))&&(e?(s||(s=e),i(e,s,e.row-s.row,e.col-s.col)):i(e,s),l=e)}var o,i,s,l,t=this;t.start=function(t,e,n){i=t,s=l=null,r.build(),a(e),o=n||"mousemove",Lt(document).bind(o,a)},t.stop=function(){return Lt(document).unbind(o,a),l}}function x(t){t.pageX===_t&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ae(e){function n(t){return a[t]=a[t]||e(t)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===_t?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===_t?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var k={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},H={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},W=Lt.fullCalendar={version:"1.6.4"},gt=W.views={};Lt.fn.fullCalendar=function(a){if("string"==typeof a){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=Lt.data(this,"fullCalendar");if(t&&Lt.isFunction(t[a])){var e=t[a].apply(t,r);n===_t&&(n=e),"destroy"==a&&Lt.removeData(this,"fullCalendar")}}),n!==_t?n:this}var o=(a=a||{}).eventSources||[];return delete a.eventSources,a.events&&(o.push(a.events),delete a.events),a=Lt.extend(!0,{},k,a.isRTL||a.isRTL===_t&&k.isRTL?H:{},a),this.each(function(t,e){var n=Lt(e),r=new i(n,a,o);n.data("fullCalendar",r),r.render()}),this},W.sourceNormalizers=[];var A={dataType:"json",cache:!(W.sourceFetchers=[])},O=1;W.addDays=Pt,W.cloneDate=Bt,W.parseDate=N,W.parseISO8601=ut,W.parseTime=It,W.formatDate=lt,W.formatDates=ct;var oe=["sun","mon","tue","wed","thu","fri","sat"],F=864e5,R=36e5,pt=6e4,L={s:function(t){return t.getSeconds()},ss:function(t){return f(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return f(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return f(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return f(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return f(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return f(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return lt(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return 10<e&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return e(t)}};W.dateFormatters=L,W.applyAll=z,gt.month=d,gt.basicWeek=v,gt.basicDay=h,t({weekMode:"fixed"}),gt.agendaWeek=p,gt.agendaDay=m,t({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);