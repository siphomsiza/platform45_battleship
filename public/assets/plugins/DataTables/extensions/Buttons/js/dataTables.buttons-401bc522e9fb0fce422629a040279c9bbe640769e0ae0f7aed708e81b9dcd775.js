!function(h,b,p){var t=function(d,i){"use strict";var o,e=0,l=0,c=i.ext.buttons,f=function(t,n){!0===n&&(n={}),d.isArray(n)&&(n={buttons:n}),this.c=d.extend(!0,{},f.defaults,n),n.buttons&&(this.c.buttons=n.buttons),this.s={dt:new i.Api(t),buttons:[],subButtons:[],listenKeys:"",namespace:"dtb"+e++},this.dom={container:d("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};f.prototype={action:function(t,n){var e=this._indexToButton(t).conf;return n===p?e.action:(e.action=n,this)},active:function(t,n){return this._indexToButton(t).node.toggleClass(this.c.dom.button.active,n===p||n),this},add:function(t,n){if("string"==typeof t&&-1!==t.indexOf("-")){var e=t.split("-");this.c.buttons[1*e[0]].buttons.splice(1*e[1],0,n)}else this.c.buttons.splice(1*t,0,n);return this.dom.container.empty(),this._buildButtons(this.c.buttons),this},container:function(){return this.dom.container},disable:function(t){return this._indexToButton(t).node.addClass(this.c.dom.button.disabled),this},destroy:function(){d("body").off("keyup."+this.s.namespace);var t,n,e,i=this.s.buttons,o=this.s.subButtons;for(t=0,n=i.length;t<n;t++)for(this.removePrep(t),e=0,o[t].length;e<0;e++)this.removePrep(t+"-"+e);this.removeCommit(),this.dom.container.remove();var s=this.s.dt.settings()[0];for(t=0,n=s.length;t<n;t++)if(s.inst===this){s.splice(t,1);break}return this},enable:function(t,n){return!1===n?this.disable(t):(this._indexToButton(t).node.removeClass(this.c.dom.button.disabled),this)},name:function(){return this.c.name},node:function(t){return this._indexToButton(t).node},removeCommit:function(){var t,n,e,i=this.s.buttons,o=this.s.subButtons;for(t=i.length-1;0<=t;t--)null===i[t]&&(i.splice(t,1),o.splice(t,1),this.c.buttons.splice(t,1));for(t=0,n=o.length;t<n;t++)for(e=o[t].length-1;0<=e;e--)null===o[t][e]&&(o[t].splice(e,1),this.c.buttons[t].buttons.splice(e,1));return this},removePrep:function(t){var n,e=this.s.dt;if("number"==typeof t||-1===t.indexOf("-"))(n=this.s.buttons[1*t]).conf.destroy&&n.conf.destroy.call(e.button(t),e,n,n.conf),n.node.remove(),this._removeKey(n.conf),this.s.buttons[1*t]=null;else{var i=t.split("-");(n=this.s.subButtons[1*i[0]][1*i[1]]).conf.destroy&&n.conf.destroy.call(e.button(t),e,n,n.conf),n.node.remove(),this._removeKey(n.conf),this.s.subButtons[1*i[0]][1*i[1]]=null}return this},text:function(t,n){var e=this._indexToButton(t),i=this.c.dom.buttonLiner.tag,o=this.s.dt,s=function(t){return"function"==typeof t?t(o,e.node,e.conf):t};return n===p?s(e.conf.text):(e.conf.text=n,i?e.node.children(i).html(s(n)):e.node.html(s(n)),this)},toIndex:function(t){var n,e,i,o,s=this.s.buttons,r=this.s.subButtons;for(n=0,e=s.length;n<e;n++)if(s[n].node[0]===t)return n+"";for(n=0,e=r.length;n<e;n++)for(i=0,o=r[n].length;i<o;i++)if(r[n][i].node[0]===t)return n+"-"+i},_constructor:function(){var e=this,t=this.s.dt,n=t.settings()[0];n._buttons||(n._buttons=[]),n._buttons.push({inst:this,name:this.c.name}),this._buildButtons(this.c.buttons),t.on("destroy",function(){e.destroy()}),d("body").on("keyup."+this.s.namespace,function(t){if(!b.activeElement||b.activeElement===b.body){var n=String.fromCharCode(t.keyCode).toLowerCase();-1!==e.s.listenKeys.toLowerCase().indexOf(n)&&e._keypress(n,t)}})},_addKey:function(t){t.key&&(this.s.listenKeys+=d.isPlainObject(t.key)?t.key.key:t.key)},_buildButtons:function(t,n,e){var i=this.s.dt;n||(n=this.dom.container,this.s.buttons=[],this.s.subButtons=[]);for(var o=0,s=t.length;o<s;o++){var r=this._resolveExtends(t[o]);if(r)if(d.isArray(r))this._buildButtons(r,n,e);else{var a=this._buildButton(r,e!==p);if(a){var u=a.node;if(n.append(a.inserter),e===p?(this.s.buttons.push({node:u,conf:r,inserter:a.inserter}),this.s.subButtons.push([])):this.s.subButtons[e].push({node:u,conf:r,inserter:a.inserter}),r.buttons){var c=this.c.dom.collection;r._collection=d("<"+c.tag+"/>").addClass(c.className),this._buildButtons(r.buttons,r._collection,o)}r.init&&r.init.call(i.button(u),i,u,r)}}}},_buildButton:function(n,t){var e=this.c.dom.button,i=this.c.dom.buttonLiner,o=this.c.dom.collection,s=this.s.dt,r=function(t){return"function"==typeof t?t(s,a,n):t};if(t&&o.button&&(e=o.button),t&&o.buttonLiner&&(i=o.buttonLiner),n.available&&!n.available(s,n))return!1;var a=d("<"+e.tag+"/>").addClass(e.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(t){t.preventDefault(),!a.hasClass(e.disabled)&&n.action&&n.action.call(s.button(a),t,s,a,n),a.blur()}).on("keyup.dtb",function(t){13===t.keyCode&&!a.hasClass(e.disabled)&&n.action&&n.action.call(s.button(a),t,s,a,n)});i.tag?a.append(d("<"+i.tag+"/>").html(r(n.text)).addClass(i.className)):a.html(r(n.text)),!1===n.enabled&&a.addClass(e.disabled),n.className&&a.addClass(n.className),n.namespace||(n.namespace=".dt-button-"+l++);var u,c=this.c.dom.buttonContainer;return u=c?d("<"+c.tag+"/>").addClass(c.className).append(a):a,this._addKey(n),{node:a,inserter:u}},_indexToButton:function(t){if("number"==typeof t||-1===t.indexOf("-"))return this.s.buttons[1*t];var n=t.split("-");return this.s.subButtons[1*n[0]][1*n[1]]},_keypress:function(e,i){var t,n,o,s,r=this.s.buttons,a=this.s.subButtons,u=function(t,n){if(t.key)if(t.key===e)n.click();else if(d.isPlainObject(t.key)){if(t.key.key!==e)return;if(t.key.shiftKey&&!i.shiftKey)return;if(t.key.altKey&&!i.altKey)return;if(t.key.ctrlKey&&!i.ctrlKey)return;if(t.key.metaKey&&!i.metaKey)return;n.click()}};for(t=0,n=r.length;t<n;t++)u(r[t].conf,r[t].node);for(t=0,n=a.length;t<n;t++)for(o=0,s=a[t].length;o<s;o++)u(a[t][o].conf,a[t][o].node)},_removeKey:function(t){if(t.key){var n=d.isPlainObject(t.key)?t.key.key:t.key,e=this.s.listenKeys.split(""),i=d.inArray(n,e);e.splice(i,1),this.s.listenKeys=e.join("")}},_resolveExtends:function(e){var t,n,i=this.s.dt,o=function(t){for(var n=0;!d.isPlainObject(t)&&!d.isArray(t);){if("function"==typeof t){if(!(t=t(i,e)))return!1}else if("string"==typeof t){if(!c[t])throw"Unknown button type: "+t;t=c[t]}if(30<++n)throw"Buttons: Too many iterations"}return d.isArray(t)?t:d.extend({},t)};for(e=o(e);e&&e.extend;){var s=o(c[e.extend]);if(d.isArray(s))return s;var r=s.className;e=d.extend({},s,e),r&&e.className!==r&&(e.className=r+" "+e.className);var a=e.postfixButtons;if(a){for(e.buttons||(e.buttons=[]),t=0,n=a.length;t<n;t++)e.buttons.push(a[t]);e.postfixButtons=null}var u=e.prefixButtons;if(u){for(e.buttons||(e.buttons=[]),t=0,n=u.length;t<n;t++)e.buttons.splice(t,0,u[t]);e.prefixButtons=null}e.extend=s.extend}return e}},f.background=function(t,n,e){e===p&&(e=400),t?d("<div/>").addClass(n).css("display","none").appendTo("body").fadeIn(e):d("body > div."+n).fadeOut(e,function(){d(this).remove()})},f.instanceSelector=function(t,o){if(!t)return d.map(o,function(t){return t.inst});var s=[],r=d.map(o,function(t){return t.name}),a=function(t){if(d.isArray(t))for(var n=0,e=t.length;n<e;n++)a(t[n]);else if("string"==typeof t)if(-1!==t.indexOf(","))a(t.split(","));else{var i=d.inArray(d.trim(t),r);-1!==i&&s.push(o[i].inst)}else"number"==typeof t&&s.push(o[t].inst)};return a(t),s},f.buttonSelector=function(t,n){for(var c=[],l=function(t,n){var e,i,o=[];d.each(n.s.buttons,function(t,n){null!==n&&o.push({node:n.node[0],name:n.name})}),d.each(n.s.subButtons,function(t,n){d.each(n,function(t,n){null!==n&&o.push({node:n.node[0],name:n.name})})});var s=d.map(o,function(t){return t.node});if(d.isArray(t)||t instanceof d)for(e=0,i=t.length;e<i;e++)l(t[e],n);else if(null===t||t===p||"*"===t)for(e=0,i=o.length;e<i;e++)c.push({inst:n,idx:n.toIndex(o[e].node)});else if("number"==typeof t)c.push({inst:n,idx:t});else if("string"==typeof t)if(-1!==t.indexOf(",")){var r=t.split(",");for(e=0,i=r.length;e<i;e++)l(d.trim(r[e]),n)}else if(t.match(/^\d+(\-\d+)?$/))c.push({inst:n,idx:t});else if(-1!==t.indexOf(":name")){var a=t.replace(":name","");for(e=0,i=o.length;e<i;e++)o[e].name===a&&c.push({inst:n,idx:n.toIndex(o[e].node)})}else d(s).filter(t).each(function(){c.push({inst:n,idx:n.toIndex(this)})});else if("object"==typeof t&&t.nodeName){var u=d.inArray(t,s);-1!==u&&c.push({inst:n,idx:n.toIndex(s[u])})}},e=0,i=t.length;e<i;e++){var o=t[e];l(n,o)}return c},f.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},f.version="1.0.0",d.extend(c,{collection:{text:function(t){return t.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(t,n,e,i){var o=e,s=o.offset(),r=d(n.table().container());if(i._collection.addClass(i.collectionLayout).css("display","none").appendTo("body").fadeIn(i.fade),"absolute"===i._collection.css("position")){i._collection.css({top:s.top+o.outerHeight(),left:s.left});var a=s.left+i._collection.outerWidth(),u=r.offset().left+r.width();u<a&&i._collection.css("left",s.left-(a-u))}else{var c=i._collection.height()/2;c>d(h).height()/2&&(c=d(h).height()/2),i._collection.css("marginTop",-1*c)}i.background&&f.background(!0,i.backgroundClassName,i.fade),setTimeout(function(){d(b).on("click.dtb-collection",function(t){d(t.target).parents().andSelf().filter(i._collection).length||(i._collection.fadeOut(i.fade,function(){i._collection.detach()}),f.background(!1,i.backgroundClassName,i.fade),d(b).off("click.dtb-collection"))})},10)},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",fade:400},copy:function(t,n){return n.preferHtml&&c.copyHtml5?"copyHtml5":c.copyFlash&&c.copyFlash.available(t,n)?"copyFlash":c.copyHtml5?"copyHtml5":void 0},csv:function(t,n){return c.csvHtml5&&c.csvHtml5.available(t,n)?"csvHtml5":c.csvFlash&&c.csvFlash.available(t,n)?"csvFlash":void 0},excel:function(t,n){return c.excelHtml5&&c.excelHtml5.available(t,n)?"excelHtml5":c.excelFlash&&c.excelFlash.available(t,n)?"excelFlash":void 0},pdf:function(t,n){return c.pdfHtml5&&c.pdfHtml5.available(t,n)?"pdfHtml5":c.pdfFlash&&c.pdfFlash.available(t,n)?"pdfFlash":void 0}}),i.Api.register("buttons()",function(n,e){return e===p&&(e=n,n=p),this.iterator(!0,"table",function(t){if(t._buttons)return f.buttonSelector(f.instanceSelector(n,t._buttons),e)},!0)}),i.Api.register("button()",function(t,n){var e=this.buttons(t,n);return 1<e.length&&e.splice(1,e.length),e}),i.Api.register(["buttons().active()","button().active()"],function(n){return this.each(function(t){t.inst.active(t.idx,n)})}),i.Api.registerPlural("buttons().action()","button().action()",function(n){return n===p?this.map(function(t){return t.inst.action(t.idx)}):this.each(function(t){t.inst.action(t.idx,n)})}),i.Api.register(["buttons().enable()","button().enable()"],function(n){return this.each(function(t){t.inst.enable(t.idx,n)})}),i.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(t){t.inst.disable(t.idx)})}),i.Api.registerPlural("buttons().nodes()","button().node()",function(){var n=d();return d(this.each(function(t){n=n.add(t.inst.node(t.idx))})),n}),i.Api.registerPlural("buttons().text()","button().text()",function(n){return n===p?this.map(function(t){return t.inst.text(t.idx)}):this.each(function(t){t.inst.text(t.idx,n)})}),i.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(t){t.inst.node(t.idx).trigger("click")})}),i.Api.registerPlural("buttons().containers()","buttons().container()",function(){var n=d();return d(this.each(function(t){n=n.add(t.inst.container())})),n}),i.Api.register("button().add()",function(t,n){return 1===this.length&&this[0].inst.add(t,n),this.button(t)}),i.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(t){t.destroy()}),this}),i.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(t){t.inst.removePrep(t.idx)}),this.pluck("inst").unique().each(function(t){t.removeCommit()}),this}),i.Api.register("buttons.info()",function(t,n,e){var i=this;return!1===t?(d("#datatables_buttons_info").fadeOut(function(){d(this).remove()}),clearTimeout(o),o=null):(o&&clearTimeout(o),d("#datatables_buttons_info").length&&d("#datatables_buttons_info").remove(),t=t?"<h2>"+t+"</h2>":"",d('<div id="datatables_buttons_info" class="dt-button-info"/>').html(t).append(d("<div/>")["string"==typeof n?"html":"append"](n)).css("display","none").appendTo("body").fadeIn(),e!==p&&0!==e&&(o=setTimeout(function(){i.buttons.info(!1)},e))),this}),i.Api.register("buttons.exportData()",function(t){if(this.context.length)return n(new i.Api(this.context[0]),t)});var n=function(n,t){var e=d.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,trim:!0},t),i=function(t){return e.stripHtml&&(t=t.replace(/<.*?>/g,"")),e.trim&&(t=t.replace(/^\s+|\s+$/g,"")),e.trim&&(t=t.replace(/\n/g," ")),t};return{header:n.columns(e.columns).indexes().map(function(t){return i(n.column(t).header().innerHTML)}).toArray(),footer:n.table().footer()?n.columns(e.columns).indexes().map(function(t){return i(n.column(t).footer().innerHTML)}).toArray():null,body:n.rows(e.rows,e.modifier).indexes().map(function(t){return n.cells(t,e.columns).indexes().map(function(t){return i(n.cell(t).render(e.orthogonal))}).toArray()}).toArray()}};return d.fn.dataTable.Buttons=f,d.fn.DataTable.Buttons=f,d(b).on("init.dt.dtb",function(t,n){if("dt"===t.namespace){var e=n.oInit.buttons||i.defaults.buttons;e&&!n._buttons&&new f(n,e).container()}}),i.ext.feature.push({fnInit:function(t){var n=new i.Api(t),e=n.init().buttons;return new f(n,e).container()},cFeature:"B"}),f};"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.Buttons&&t(jQuery,jQuery.fn.dataTable)}(window,document);