!function(t,e){var o=function(o,r){"use strict";var s=function(t,e){if(!r.versionCheck||!r.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=o.extend(!0,{},r.defaults.rowReorder,s.defaults,e),this.s={bodyTop:null,dt:new r.Api(t),getDataFn:r.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,setDataFn:r.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null};var n=this.s.dt.settings()[0],i=n.rowreorder;return i?i:(n.rowreorder=this,void this._constructor())};return s.prototype={_constructor:function(){var t=this,e=this.s.dt,r=o(e.table().node());"static"===r.css("position")&&r.css("position","relative"),o(r).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(r){var s=o(this).closest("tr");return e.row(s).any()?(t._mouseDown(r,s),!1):void 0}),e.on("destroy",function(){r.off("mousedown.rowReorder")})},_cachePositions:function(){var e=this.s.dt,r=o(e.table().node()).find("thead").outerHeight(),s=o.unique(e.rows({page:"current"}).nodes().toArray()),n=o.map(s,function(t){return o(t).position().top-r}),i=o.map(n,function(t,r){return n.length<r-1?(t+n[r+1])/2:(t+t+o(e.row(":last-child").node()).outerHeight())/2});this.s.middles=i,this.s.bodyTop=o(e.table().body()).offset().top,this.s.windowHeight=o(t).height()},_clone:function(t){var e=this.s.dt,r=o(e.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),s=t.outerWidth(),n=t.outerHeight(),i=t.children().map(function(){return o(this).width()});r.width(s).height(n).find("tr").children().each(function(t){this.style.width=i[t]+"px"}),r.appendTo("body"),this.dom.clone=r},_clonePosition:function(t){var e,o=this.s.start,r=this._eventToPage(t,"Y")-o.top,s=this._eventToPage(t,"X")-o.left,n=this.c.snapX;e=n===!0?o.offsetLeft:"number"==typeof n?o.offsetLeft+n:s+o.offsetLeft,this.dom.clone.css({top:r+o.offsetTop,left:e})},_emitEvent:function(t,e){this.s.dt.iterator("table",function(r){o(r.nTable).triggerHandler(t+".dt",e)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(r,s){var n=this,i=this.s.dt,a=this.s.start,d=s.offset();a.top=this._eventToPage(r,"Y"),a.left=this._eventToPage(r,"X"),a.offsetTop=d.top,a.offsetLeft=d.left,a.nodes=o.unique(i.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(s),this._clonePosition(r),this.dom.target=s,s.addClass("dt-rowReorder-moving"),o(e).on("mouseup.rowReorder touchend.rowReorder",function(t){n._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){n._mouseMove(t)}),o(t).width()===o(e).width()&&o(e.body).addClass("dt-rowReorder-noOverflow")},_mouseMove:function(t){this._clonePosition(t);for(var r=this._eventToPage(t,"Y")-this.s.bodyTop,s=this.s.middles,n=null,i=this.s.dt,a=i.table().body(),d=0,l=s.length;l>d;d++)if(r<s[d]){n=d;break}if(null===n&&(n=s.length),null===this.s.lastInsert||this.s.lastInsert!==n){if(0===n)this.dom.target.prependTo(a);else{var h=o.unique(i.rows({page:"current"}).nodes().toArray());n>this.s.lastInsert?this.dom.target.before(h[n-1]):this.dom.target.after(h[n])}this._cachePositions(),this.s.lastInsert=n}var c=this._eventToPage(t,"Y")-e.body.scrollTop,u=this.s.scrollInterval;65>c?u||(this.s.scrollInterval=setInterval(function(){e.body.scrollTop-=5},15)):this.s.windowHeight-c<65?u||(this.s.scrollInterval=setInterval(function(){e.body.scrollTop+=5},15)):(clearInterval(u),this.s.scrollInterval=null)},_mouseUp:function(){var t,r,s=this.s.dt;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),o(e).off(".rowReorder"),o(e.body).removeClass("dt-rowReorder-noOverflow");var n=this.s.start.nodes,i=o.unique(s.rows({page:"current"}).nodes().toArray()),a={},d=[],l=[],h=this.s.getDataFn,c=this.s.setDataFn;for(t=0,r=n.length;r>t;t++)if(n[t]!==i[t]){var u=s.row(i[t]).id(),f=s.row(i[t]).data(),w=s.row(n[t]).data();u&&(a[u]=h(w)),d.push({node:i[t],oldData:h(f),newData:h(w),newPosition:t,oldPosition:o.inArray(i[t],n)}),l.push(i[t])}if(this._emitEvent("row-reorder",[d,{dataSrc:this.c.dataSrc,nodes:l,values:a}]),this.c.editor&&this.c.editor.edit(l,!1,{submit:"changed"}).multiSet(this.c.dataSrc,a).submit(),this.c.update){for(t=0,r=d.length;r>t;t++){var p=s.row(d[t].node),v=p.data();c(v,d[t].newData),p.invalidate("data")}s.draw(!1)}}},s.defaults={dataSrc:0,editor:null,selector:"td:first-child",snapX:!1,update:!0},s.version="1.0.0",o.fn.dataTable.RowReorder=s,o.fn.DataTable.RowReorder=s,o(e).on("init.dt.dtr",function(t,e){if("dt"===t.namespace){var n=e.oInit.rowReorder,i=r.defaults.rowReorder;if(n||i){var a=o.extend({},n,i);n!==!1&&new s(e,a)}}}),s};"function"==typeof define&&define.amd?define(["jquery","datatables"],o):"object"==typeof exports?o(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.RowReorder&&o(jQuery,jQuery.fn.dataTable)}(window,document);