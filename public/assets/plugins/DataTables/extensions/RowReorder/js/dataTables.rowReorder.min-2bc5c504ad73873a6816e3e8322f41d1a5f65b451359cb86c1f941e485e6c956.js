!function(i,w){var t=function(f,s){var n=function(t,e){if(!s.versionCheck||!s.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=f.extend(!0,{},s.defaults.rowReorder,n.defaults,e),this.s={bodyTop:null,dt:new s.Api(t),getDataFn:s.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,setDataFn:s.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null};var o=this.s.dt.settings()[0],r=o.rowreorder;if(r)return r;(o.rowreorder=this)._constructor()};return n.prototype={_constructor:function(){var o=this,r=this.s.dt,t=f(r.table().node());"static"===t.css("position")&&t.css("position","relative"),f(t).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(t){var e=f(this).closest("tr");if(r.row(e).any())return o._mouseDown(t,e),!1}),r.on("destroy",function(){t.off("mousedown.rowReorder")})},_cachePositions:function(){var o=this.s.dt,e=f(o.table().node()).find("thead").outerHeight(),t=f.unique(o.rows({page:"current"}).nodes().toArray()),r=f.map(t,function(t){return f(t).position().top-e});t=f.map(r,function(t,e){return r.length<e-1?(t+r[e+1])/2:(t+t+f(o.row(":last-child").node()).outerHeight())/2});this.s.middles=t,this.s.bodyTop=f(o.table().body()).offset().top,this.s.windowHeight=f(i).height()},_clone:function(t){var e=f(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),o=t.outerWidth(),r=t.outerHeight(),s=t.children().map(function(){return f(this).width()});e.width(o).height(r).find("tr").children().each(function(t){this.style.width=s[t]+"px"}),e.appendTo("body"),this.dom.clone=e},_clonePosition:function(t){var e=this.s.start,o=this._eventToPage(t,"Y")-e.top,r=(t=this._eventToPage(t,"X")-e.left,this.c.snapX);this.dom.clone.css({top:o+e.offsetTop,left:!0===r?e.offsetLeft:"number"==typeof r?e.offsetLeft+r:t+e.offsetLeft})},_emitEvent:function(e,o){this.s.dt.iterator("table",function(t){f(t.nTable).triggerHandler(e+".dt",o)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(t,e){var o=this,r=this.s.dt,s=this.s.start,n=e.offset();s.top=this._eventToPage(t,"Y"),s.left=this._eventToPage(t,"X"),s.offsetTop=n.top,s.offsetLeft=n.left,s.nodes=f.unique(r.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(t),(this.dom.target=e).addClass("dt-rowReorder-moving"),f(w).on("mouseup.rowReorder touchend.rowReorder",function(t){o._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){o._mouseMove(t)}),f(i).width()===f(w).width()&&f(w.body).addClass("dt-rowReorder-noOverflow")},_mouseMove:function(t){this._clonePosition(t);for(var e=this._eventToPage(t,"Y")-this.s.bodyTop,o=this.s.middles,r=null,s=this.s.dt,n=s.table().body(),i=0,a=o.length;i<a;i++)if(e<o[i]){r=i;break}null===r&&(r=o.length),null!==this.s.lastInsert&&this.s.lastInsert===r||(0===r?this.dom.target.prependTo(n):(e=f.unique(s.rows({page:"current"}).nodes().toArray()),r>this.s.lastInsert?this.dom.target.before(e[r-1]):this.dom.target.after(e[r])),this._cachePositions(),this.s.lastInsert=r),t=this._eventToPage(t,"Y")-w.body.scrollTop,r=this.s.scrollInterval,t<65?r||(this.s.scrollInterval=setInterval(function(){w.body.scrollTop=w.body.scrollTop-5},15)):this.s.windowHeight-t<65?r||(this.s.scrollInterval=setInterval(function(){w.body.scrollTop=w.body.scrollTop+5},15)):(clearInterval(r),this.s.scrollInterval=null)},_mouseUp:function(){var t,e,o=this.s.dt;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),f(w).off(".rowReorder"),f(w.body).removeClass("dt-rowReorder-noOverflow");var r=this.s.start.nodes,s=f.unique(o.rows({page:"current"}).nodes().toArray()),n={},i=[],a=[],d=this.s.getDataFn,l=this.s.setDataFn;for(t=0,e=r.length;t<e;t++)if(r[t]!==s[t]){var h=o.row(s[t]).id(),c=o.row(s[t]).data(),u=o.row(r[t]).data();h&&(n[h]=d(u)),i.push({node:s[t],oldData:d(c),newData:d(u),newPosition:t,oldPosition:f.inArray(s[t],r)}),a.push(s[t])}if(this._emitEvent("row-reorder",[i,{dataSrc:this.c.dataSrc,nodes:a,values:n}]),this.c.editor&&this.c.editor.edit(a,!1,{submit:"changed"}).multiSet(this.c.dataSrc,n).submit(),this.c.update){for(t=0,e=i.length;t<e;t++)l(s=(r=o.row(i[t].node)).data(),i[t].newData),r.invalidate("data");o.draw(!1)}}},n.defaults={dataSrc:0,editor:null,selector:"td:first-child",snapX:!1,update:!0},n.version="1.0.0",f.fn.dataTable.RowReorder=n,f.fn.DataTable.RowReorder=n,f(w).on("init.dt.dtr",function(t,e){if("dt"===t.namespace){var o=e.oInit.rowReorder,r=s.defaults.rowReorder;(o||r)&&(r=f.extend({},o,r),!1!==o&&new n(e,r))}}),n};"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.RowReorder&&t(jQuery,jQuery.fn.dataTable)}(window,document);