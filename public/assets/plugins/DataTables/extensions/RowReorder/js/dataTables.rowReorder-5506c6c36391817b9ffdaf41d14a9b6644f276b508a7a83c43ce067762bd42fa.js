!function(a,p){var t=function(w,n){"use strict";var i=function(t,e){if(!n.versionCheck||!n.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=w.extend(!0,{},n.defaults.rowReorder,i.defaults,e),this.s={bodyTop:null,dt:new n.Api(t),getDataFn:n.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,setDataFn:n.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0},this.dom={clone:null};var o=this.s.dt.settings()[0],r=o.rowreorder;if(r)return r;(o.rowreorder=this)._constructor()};return i.prototype={_constructor:function(){var o=this,r=this.s.dt,t=w(r.table().node());"static"===t.css("position")&&t.css("position","relative"),w(t).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(t){var e=w(this).closest("tr");if(r.row(e).any())return o._mouseDown(t,e),!1}),r.on("destroy",function(){t.off("mousedown.rowReorder")})},_cachePositions:function(){var o=this.s.dt,e=w(o.table().node()).find("thead").outerHeight(),t=w.unique(o.rows({page:"current"}).nodes().toArray()),r=w.map(t,function(t){return w(t).position().top-e}),s=w.map(r,function(t,e){return r.length<e-1?(t+r[e+1])/2:(t+t+w(o.row(":last-child").node()).outerHeight())/2});this.s.middles=s,this.s.bodyTop=w(o.table().body()).offset().top,this.s.windowHeight=w(a).height()},_clone:function(t){var e=this.s.dt,o=w(e.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(t.clone(!1)),r=t.outerWidth(),s=t.outerHeight(),n=t.children().map(function(){return w(this).width()});o.width(r).height(s).find("tr").children().each(function(t){this.style.width=n[t]+"px"}),o.appendTo("body"),this.dom.clone=o},_clonePosition:function(t){var e,o=this.s.start,r=this._eventToPage(t,"Y")-o.top,s=this._eventToPage(t,"X")-o.left,n=this.c.snapX;e=!0===n?o.offsetLeft:"number"==typeof n?o.offsetLeft+n:s+o.offsetLeft,this.dom.clone.css({top:r+o.offsetTop,left:e})},_emitEvent:function(e,o){this.s.dt.iterator("table",function(t){w(t.nTable).triggerHandler(e+".dt",o)})},_eventToPage:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0]["page"+e]:t["page"+e]},_mouseDown:function(t,e){var o=this,r=this.s.dt,s=this.s.start,n=e.offset();s.top=this._eventToPage(t,"Y"),s.left=this._eventToPage(t,"X"),s.offsetTop=n.top,s.offsetLeft=n.left,s.nodes=w.unique(r.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(e),this._clonePosition(t),(this.dom.target=e).addClass("dt-rowReorder-moving"),w(p).on("mouseup.rowReorder touchend.rowReorder",function(t){o._mouseUp(t)}).on("mousemove.rowReorder touchmove.rowReorder",function(t){o._mouseMove(t)}),w(a).width()===w(p).width()&&w(p.body).addClass("dt-rowReorder-noOverflow")},_mouseMove:function(t){this._clonePosition(t);for(var e=this._eventToPage(t,"Y")-this.s.bodyTop,o=this.s.middles,r=null,s=this.s.dt,n=s.table().body(),i=0,a=o.length;i<a;i++)if(e<o[i]){r=i;break}if(null===r&&(r=o.length),null===this.s.lastInsert||this.s.lastInsert!==r){if(0===r)this.dom.target.prependTo(n);else{var d=w.unique(s.rows({page:"current"}).nodes().toArray());r>this.s.lastInsert?this.dom.target.before(d[r-1]):this.dom.target.after(d[r])}this._cachePositions(),this.s.lastInsert=r}var l=this._eventToPage(t,"Y")-p.body.scrollTop,h=this.s.scrollInterval;l<65?h||(this.s.scrollInterval=setInterval(function(){p.body.scrollTop-=5},15)):this.s.windowHeight-l<65?h||(this.s.scrollInterval=setInterval(function(){p.body.scrollTop+=5},15)):(clearInterval(h),this.s.scrollInterval=null)},_mouseUp:function(){var t,e,o=this.s.dt;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),w(p).off(".rowReorder"),w(p.body).removeClass("dt-rowReorder-noOverflow");var r=this.s.start.nodes,s=w.unique(o.rows({page:"current"}).nodes().toArray()),n={},i=[],a=[],d=this.s.getDataFn,l=this.s.setDataFn;for(t=0,e=r.length;t<e;t++)if(r[t]!==s[t]){var h=o.row(s[t]).id(),c=o.row(s[t]).data(),u=o.row(r[t]).data();h&&(n[h]=d(u)),i.push({node:s[t],oldData:d(c),newData:d(u),newPosition:t,oldPosition:w.inArray(s[t],r)}),a.push(s[t])}if(this._emitEvent("row-reorder",[i,{dataSrc:this.c.dataSrc,nodes:a,values:n}]),this.c.editor&&this.c.editor.edit(a,!1,{submit:"changed"}).multiSet(this.c.dataSrc,n).submit(),this.c.update){for(t=0,e=i.length;t<e;t++){var f=o.row(i[t].node);l(f.data(),i[t].newData),f.invalidate("data")}o.draw(!1)}}},i.defaults={dataSrc:0,editor:null,selector:"td:first-child",snapX:!1,update:!0},i.version="1.0.0",w.fn.dataTable.RowReorder=i,w.fn.DataTable.RowReorder=i,w(p).on("init.dt.dtr",function(t,e){if("dt"===t.namespace){var o=e.oInit.rowReorder,r=n.defaults.rowReorder;if(o||r){var s=w.extend({},o,r);!1!==o&&new i(e,s)}}}),i};"function"==typeof define&&define.amd?define(["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.RowReorder&&t(jQuery,jQuery.fn.dataTable)}(window,document);