!function(d){var t,r,e,i,s,l="0.9.3",p={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return!!t&&parseInt(t[2],10)},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isPlainObject,isUndefined:function(t){return void 0===t},bind:d.proxy,bindAll:function(t){var e;for(var i in t)d.isFunction(e=t[i])&&(t[i]=d.proxy(e,t))},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},each:d.each,map:d.map,filter:d.grep,every:function(i,n){var s=!0;return i?(d.each(i,function(t,e){if(!(s=n.call(null,e,t,i)))return!1}),!!s):s},some:function(i,n){var s=!1;return i?(d.each(i,function(t,e){if(s=n.call(null,e,t,i))return!1}),!!s):s},mixin:d.extend,getUniqueId:(t=0,function(){return t++}),defer:function(t){setTimeout(t,0)},debounce:function(s,r,o){var u,a;return function(){var t,e,i=this,n=arguments;return t=function(){u=null,o||(a=s.apply(i,n))},e=o&&!u,clearTimeout(u),u=setTimeout(t,r),e&&(a=s.apply(i,n)),a}},throttle:function(i,n){var s,r,o,u,a,c;return a=0,c=function(){a=new Date,o=null,u=i.apply(s,r)},function(){var t=new Date,e=n-(t-a);return s=this,r=arguments,e<=0?(clearTimeout(o),o=null,a=t,u=i.apply(s,r)):o||(o=setTimeout(c,e)),u}},tokenizeQuery:function(t){return d.trim(t).toLowerCase().split(/[\s]+/)},tokenizeText:function(t){return d.trim(t).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},a=(r=/\s+/,{on:function(t,e){var i;if(!e)return this;for(this._callbacks=this._callbacks||{},t=t.split(r);i=t.shift();)this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push(e);return this},trigger:function(t,e){var i,n;if(!this._callbacks)return this;for(t=t.split(r);i=t.shift();)if(n=this._callbacks[i])for(var s=0;s<n.length;s+=1)n[s].call(this,{type:i,data:e});return this}}),o=function(){function t(t){t&&t.el||d.error("EventBus initialized without el"),this.$el=d(t.el)}var i="typeahead:";return p.mixin(t.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(i+t,e)}}),t}(),n=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function s(t){return JSON.stringify(p.isUndefined(t)?null:t)}function i(t){return JSON.parse(t)}var r,e;try{(r=window.localStorage).setItem("~~~","!"),r.removeItem("~~~")}catch(o){r=null}return e=r&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),i(r.getItem(this._prefix(t)))},set:function(t,e,i){return p.isNumber(i)?r.setItem(this._ttlKey(t),s(n()+i)):r.removeItem(this._ttlKey(t)),r.setItem(this._prefix(t),s(e))},remove:function(t){return r.removeItem(this._ttlKey(t)),r.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],n=r.length;for(t=0;t<n;t++)(e=r.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var e=i(r.getItem(this._ttlKey(t)));return!!(p.isNumber(e)&&n()>e)}}:{get:p.noop,set:p.noop,remove:p.noop,clear:p.noop,isExpired:p.noop},p.mixin(t.prototype,e),t}(),c=function(){function t(t){p.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return p.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),u=function(){function t(t){p.bindAll(this),t=p.isString(t)?{url:t}:t,o=o||new c,i=p.isNumber(t.maxParallelRequests)?t.maxParallelRequests:i||6,this.url=t.url,this.wildcard=t.wildcard||"%QUERY",this.filter=t.filter,this.replace=t.replace,this.ajaxSettings={type:"get",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend},this._get=(/^throttle$/i.test(t.rateLimitFn)?p.throttle:p.debounce)(this._get,t.rateLimitWait||300)}function s(){n++}function r(){n--}function e(){return n<i}var i,o,n=0,u={};return p.mixin(t.prototype,{_get:function(i,n){function t(t){var e=s.filter?s.filter(t):t;n&&n(e),o.set(i,t)}var s=this;e()?this._sendRequest(i).done(t):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(t){function e(){r(),u[t]=null,i.onDeckRequestArgs&&(i._get.apply(i,i.onDeckRequestArgs),i.onDeckRequestArgs=null)}var i=this,n=u[t];return n||(s(),n=u[t]=d.ajax(t,this.ajaxSettings).always(e)),n},get:function(t,e){var i,n,s=this,r=encodeURIComponent(t||"");return e=e||p.noop,i=this.replace?this.replace(this.url,r):this.url.replace(this.wildcard,r),(n=o.get(i))?p.defer(function(){e(s.filter?s.filter(n):n)}):this._get(i,e),!!n}}),t}(),h=function(){function t(t){p.bindAll(this),p.isString(t.template)&&!t.engine&&d.error("no template engine specified"),t.local||t.prefetch||t.remote||d.error("one of local, prefetch, or remote is required"),this.name=t.name||p.getUniqueId(),this.limit=t.limit||5,this.minLength=t.minLength||1,this.header=t.header,this.footer=t.footer,this.valueKey=t.valueKey||"value",this.template=e(t.template,t.engine,this.valueKey),this.local=t.local,this.prefetch=t.prefetch,this.remote=t.remote,this.itemHash={},this.adjacencyList={},this.storage=t.name?new n(t.name):null}function e(t,e,i){var n,s;return p.isFunction(t)?n=t:p.isString(t)?(s=e.compile(t),n=p.bind(s.render,s)):n=function(t){return"<p>"+t[i]+"</p>"},n}var h={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return p.mixin(t.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(r){function t(t){var e=r.filter?r.filter(t):t,i=a._processData(e),n=i.itemHash,s=i.adjacencyList;a.storage&&(a.storage.set(h.itemHash,n,r.ttl),a.storage.set(h.adjacencyList,s,r.ttl),a.storage.set(h.thumbprint,c,r.ttl),a.storage.set(h.protocol,p.getProtocol(),r.ttl)),a._mergeProcessedData(i)}var e,i,n,s,o,u,a=this,c=l+(r.thumbprint||"");return this.storage&&(e=this.storage.get(h.thumbprint),i=this.storage.get(h.protocol),n=this.storage.get(h.itemHash),s=this.storage.get(h.adjacencyList)),o=e!==c||i!==p.getProtocol(),(r=p.isString(r)?{url:r}:r).ttl=p.isNumber(r.ttl)?r.ttl:864e5,n&&s&&!o?(this._mergeProcessedData({itemHash:n,adjacencyList:s}),u=d.Deferred().resolve()):u=d.getJSON(r.url).done(t),u},_transformDatum:function(t){var e=p.isString(t)?t:t[this.valueKey],i={value:e,tokens:t.tokens||p.tokenizeText(e)};return p.isString(t)?(i.datum={},i.datum[this.valueKey]=t):i.datum=t,i.tokens=p.filter(i.tokens,function(t){return!p.isBlankString(t)}),i.tokens=p.map(i.tokens,function(t){return t.toLowerCase()}),i},_processData:function(t){var n=this,r={},o={};return p.each(t,function(t,e){var i=n._transformDatum(e),s=p.getUniqueId(i.value);r[s]=i,p.each(i.tokens,function(t,e){var i=e.charAt(0),n=o[i]||(o[i]=[s]);!~p.indexOf(n,s)&&n.push(s)})}),{itemHash:r,adjacencyList:o}},_mergeProcessedData:function(t){var n=this;p.mixin(this.itemHash,t.itemHash),p.each(t.adjacencyList,function(t,e){var i=n.adjacencyList[t];n.adjacencyList[t]=i?i.concat(e):e})},_getLocalSuggestions:function(n){var s,r=this,o=[],u=[],a=[];return p.each(n,function(t,e){var i=e.charAt(0);!~p.indexOf(o,i)&&o.push(i)}),p.each(o,function(t,e){var i=r.adjacencyList[e];if(!i)return!1;u.push(i),(!s||i.length<s.length)&&(s=i)}),u.length<o.length?[]:(p.each(s,function(t,e){var i=r.itemHash[e];p.every(u,function(t){return~p.indexOf(t,e)})&&p.every(n,function(e){return p.some(i.tokens,function(t){return 0===t.indexOf(e)})})&&a.push(i)}),a)},initialize:function(){var t;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new u(this.remote):null,t=this.prefetch?this._loadPrefetchData(this.prefetch):d.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return t},t},getSuggestions:function(t,e){function i(t){s=s.slice(0),p.each(t,function(t,e){var i=r._transformDatum(e);return!p.some(s,function(t){return i.value===t.value})&&s.push(i),s.length<r.limit}),e&&e(s)}var n,s,r=this,o=!1;t.length<this.minLength||(n=p.tokenizeQuery(t),(s=this._getLocalSuggestions(n).slice(0,this.limit)).length<this.limit&&this.transport&&(o=this.transport.get(t,i)),!o&&e&&e(s))}}),t}(),g=function(){function t(t){var e=this;p.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=d(t.hint),this.$input=d(t.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),p.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){e.specialKeyCodeMap[t.which||t.keyCode]||p.defer(e._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return d("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function n(t,e){return(t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "))===(e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "))}return p.mixin(t.prototype,a,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=n(this.query,t);!!e&&this.query.length!==t.length?this.trigger("whitespaceChanged",{value:this.query}):e||this.trigger("queryChanged",{value:this.query=t})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,i=this.$input[0].selectionStart;return p.isNumber(i)?i===e:!document.selection||((t=document.selection.createRange()).moveStart("character",-e),e===t.text.length)}}),t}(),f=function(){function t(t){p.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=d(t.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function r(t){return t.data("suggestion")}var h={suggestionsList:'<span class="tt-suggestions"></span>'},l={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return p.mixin(t.prototype,a,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(t){var e=d(t.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),e.addClass("tt-is-under-cursor")},_handleSelection:function(t){var e=d(t.currentTarget);this.trigger("suggestionSelected",r(e))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var e,i,n,s;this.isVisible()&&((i=(e=this._getSuggestions()).filter(".tt-is-under-cursor")).removeClass("tt-is-under-cursor"),-1!==(n=((n=e.index(i)+t)+1)%(e.length+1)-1)?(n<-1&&(n=e.length-1),s=e.eq(n).addClass("tt-is-under-cursor"),this._ensureVisibility(s),this.trigger("cursorMoved",r(s))):this.trigger("cursorRemoved"))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),n=t.position().top,s=n+t.outerHeight(!0);n<0?this.$menu.scrollTop(i+n):e<s&&this.$menu.scrollTop(i+(s-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){var e={left:"0",right:"auto"},i={left:"auto",right:" 0"};"ltr"===t?this.$menu.css(e):this.$menu.css(i)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return 0<t.length?r(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return 0<t.length?r(t):null},renderSuggestions:function(i,t){var n,e,s,r,o,u="tt-dataset-"+i.name,a='<div class="tt-suggestion">%body</div>',c=this.$menu.find("."+u);0===c.length&&(e=d(h.suggestionsList).css(l.suggestionsList),c=d("<div></div>").addClass(u).append(i.header).append(e).append(i.footer).appendTo(this.$menu)),0<t.length?(this.isEmpty=!1,this.isOpen&&this._show(),s=document.createElement("div"),r=document.createDocumentFragment(),p.each(t,function(t,e){e.dataset=i.name,n=i.template(e.datum),s.innerHTML=a.replace("%body",n),(o=d(s.firstChild).css(l.suggestion).data("suggestion",e)).children().each(function(){d(this).css(l.suggestionChild)}),r.appendChild(o[0])}),c.show().find(".tt-suggestions").html(r)):this.clearSuggestions(i.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t):this.$menu.find('[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),t}(),m=function(){function t(t){var e,i,n;p.bindAll(this),this.$node=s(t.input),this.datasets=t.datasets,this.dir=null,this.eventBus=t.eventBus,e=this.$node.find(".tt-dropdown-menu"),i=this.$node.find(".tt-query"),n=this.$node.find(".tt-hint"),this.dropdownView=new f({menu:e}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new g({input:i,hint:n}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function s(t){var e=d(o.wrapper),i=d(o.dropdown),n=d(t),s=d(o.hint);e=e.css(u.wrapper),i=i.css(u.dropdown),s.css(u.hint).css({backgroundAttachment:n.css("background-attachment"),backgroundClip:n.css("background-clip"),backgroundColor:n.css("background-color"),backgroundImage:n.css("background-image"),backgroundOrigin:n.css("background-origin"),backgroundPosition:n.css("background-position"),backgroundRepeat:n.css("background-repeat"),backgroundSize:n.css("background-size")}),n.data("ttAttrs",{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(u.query);try{!n.attr("dir")&&n.attr("dir","auto")}catch(r){}return n.wrap(e).parent().prepend(s).append(i)}function e(t){var i=t.find(".tt-query");p.each(i.data("ttAttrs"),function(t,e){p.isUndefined(e)?i.removeAttr(t):i.attr(t,e)}),i.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(t),t.remove()}var o={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},u={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return p.isMsie()&&p.mixin(u.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),p.isMsie()&&p.isMsie()<=7&&(p.mixin(u.wrapper,{display:"inline",zoom:"1"}),p.mixin(u.query,{marginTop:"-1px"})),p.mixin(t.prototype,a,{_managePreventDefault:function(t){var e,i,n=t.data,s=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),s=e&&e!==i;break;case"upKeyed":case"downKeyed":s=!n.shiftKey&&!n.ctrlKey&&!n.metaKey}s&&n.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var t,e,i,n,s=this.dropdownView.getFirstSuggestion(),r=s?s.value:null,o=this.dropdownView.isVisible(),u=this.inputView.isOverflow();r&&o&&!u&&(e=(t=this.inputView.getInputValue()).replace(/\s{2,}/g," ").replace(/^\s+/g,""),i=p.escapeRegExChars(e),n=new RegExp("^(?:"+i+")(.*$)","i").exec(r),this.inputView.setHintValue(t+(n?n[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="suggestionSelected"===t.type,i=e?t.data:this.dropdownView.getSuggestionUnderCursor();i&&(this.inputView.setInputValue(i.value),e?this.inputView.focus():t.data.preventDefault(),e&&p.isMsie()?p.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",i.datum,i.dataset))},_getSuggestions:function(){var i=this,n=this.inputView.getQuery();p.isBlankString(n)||p.each(this.datasets,function(t,e){e.getSuggestions(n,function(t){n===i.inputView.getQuery()&&i.dropdownView.renderSuggestions(e,t)})})},_autocomplete:function(t){var e,i,n,s,r;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(n=this.inputView.getQuery(),""!==(s=this.inputView.getHintValue())&&n!==s&&(r=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.datum,r.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),e(this.$node),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),t}();i={},s="ttView",e={initialize:function(t){function e(){var t,e=d(this),i=new o({el:e});t=p.map(n,function(t){return t.initialize()}),e.data(s,new m({input:e,eventBus:i=new o({el:e}),datasets:n})),d.when.apply(d,t).always(function(){p.defer(function(){i.trigger("initialized")})})}var n;return 0===(t=p.isArray(t)?t:[t]).length&&d.error("no datasets provided"),n=p.map(t,function(t){var e=i[t.name]?i[t.name]:new h(t);return t.name&&(i[t.name]=e),e}),this.each(e)},destroy:function(){function t(){var t=d(this),e=t.data(s);e&&(e.destroy(),t.removeData(s))}return this.each(t)},setQuery:function(e){function t(){var t=d(this).data(s);t&&t.setQuery(e)}return this.each(t)}},jQuery.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)}}(window.jQuery);