!function(E){jQuery.fn.extend({slimScroll:function(S){var t={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},z=E.extend(t,S);return this.each(function(){function t(t){if(s){var e=0;(t=t||window.event).wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;E(i).closest("."+z.wrapperClass).is(w.parent())&&a(e,!0),t.preventDefault&&!v&&t.preventDefault(),v||(t.returnValue=!1)}}function a(t,e,i){var a=t,s=w.outerHeight()-H.outerHeight();if(e&&(a=parseInt(H.css("top"))+t*parseInt(z.wheelStep)/100*H.outerHeight(),a=Math.min(Math.max(a,0),s),a=0<t?Math.ceil(a):Math.floor(a),H.css({top:a+"px"})),a=(p=parseInt(H.css("top"))/(w.outerHeight()-H.outerHeight()))*(w[0].scrollHeight-w.outerHeight()),i){var o=(a=t)/w[0].scrollHeight*w.outerHeight();o=Math.min(Math.max(o,0),s),H.css({top:o+"px"})}w.scrollTop(a),w.trigger("slimscrolling",~~a),r(),l()}function e(){window.addEventListener?(this.addEventListener("DOMMouseScroll",t,!1),this.addEventListener("mousewheel",t,!1)):document.attachEvent("onmousewheel",t)}function i(){u=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),f),H.css({height:u+"px"});var t=u==w.outerHeight()?"none":"block";H.css({display:t})}function r(){if(i(),clearTimeout(h),p==~~p){if(v=z.allowPageScroll,d!=p){var t=0==~~p?"top":"bottom";w.trigger("slimscroll",t)}}else v=!1;d=p,u>=w.outerHeight()?v=!0:(H.stop(!0,!0).fadeIn("fast"),z.railVisible&&C.stop(!0,!0).fadeIn("fast"))}function l(){z.alwaysVisible||(h=setTimeout(function(){z.disableFadeOut&&s||o||n||(H.fadeOut("slow"),C.fadeOut("slow"))},1e3))}var s,o,n,h,c,u,p,d,g="<div></div>",f=30,v=!1,w=E(this);if(w.parent().hasClass(z.wrapperClass)){var b=w.scrollTop();if(H=w.parent().find("."+z.barClass),C=w.parent().find("."+z.railClass),i(),E.isPlainObject(S)){if("height"in S&&"auto"==S.height){w.parent().css("height","auto"),w.css("height","auto");var m=w.parent().parent().height();w.parent().css("height",m),w.css("height",m)}if("scrollTo"in S)b=parseInt(z.scrollTo);else if("scrollBy"in S)b+=parseInt(z.scrollBy);else if("destroy"in S)return H.remove(),C.remove(),void w.unwrap();a(b,!1,!0)}}else{z.height="auto"==z.height?w.parent().height():z.height;var y=E(g).addClass(z.wrapperClass).css({position:"relative",overflow:"hidden",width:z.width,height:z.height});w.css({overflow:"hidden",width:z.width,height:z.height});var C=E(g).addClass(z.railClass).css({width:z.size,height:"100%",position:"absolute",top:0,display:z.alwaysVisible&&z.railVisible?"block":"none","border-radius":z.size,background:z.railColor,opacity:z.railOpacity,zIndex:90}),H=E(g).addClass(z.barClass).css({background:z.color,width:z.size,position:"absolute",top:0,opacity:z.opacity,display:z.alwaysVisible?"block":"none","border-radius":z.size,BorderRadius:z.size,MozBorderRadius:z.size,WebkitBorderRadius:z.size,zIndex:99}),x="right"==z.position?{right:z.distance}:{left:z.distance};C.css(x),H.css(x),w.wrap(y),w.parent().append(H),w.parent().append(C),z.railDraggable&&E.ui&&"function"==typeof E.ui.draggable&&H.draggable({axis:"y",containment:"parent",start:function(){n=!0},stop:function(){n=!1,l()},drag:function(){a(0,E(this).position().top,!1)}}),C.hover(function(){r()},function(){l()}),H.hover(function(){o=!0},function(){o=!1}),w.hover(function(){s=!0,r(),l()},function(){s=!1,l()}),w.bind("touchstart",function(t){t.originalEvent.touches.length&&(c=t.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(t){(t.originalEvent.preventDefault(),t.originalEvent.touches.length)&&a((c-t.originalEvent.touches[0].pageY)/z.touchScrollStep,!0)}),"bottom"===z.start?(H.css({top:w.outerHeight()-H.outerHeight()}),a(0,!0)):"top"!==z.start&&(a(E(z.start).position().top,null,!0),z.alwaysVisible||H.hide()),e(),i()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);