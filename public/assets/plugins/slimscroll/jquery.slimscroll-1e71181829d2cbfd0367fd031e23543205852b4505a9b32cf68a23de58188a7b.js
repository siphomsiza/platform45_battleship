!function(t){jQuery.fn.extend({slimScroll:function(e){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},a=t.extend(i,e);return this.each(function(){function i(e){if(h){var e=e||window.event,i=0;e.wheelDelta&&(i=-e.wheelDelta/120),e.detail&&(i=e.detail/3);var o=e.target||e.srcTarget||e.srcElement;t(o).closest("."+a.wrapperClass).is(y.parent())&&s(i,!0),e.preventDefault&&!m&&e.preventDefault(),m||(e.returnValue=!1)}}function s(t,e,i){var s=t,o=y.outerHeight()-z.outerHeight();if(e&&(s=parseInt(z.css("top"))+t*parseInt(a.wheelStep)/100*z.outerHeight(),s=Math.min(Math.max(s,0),o),s=t>0?Math.ceil(s):Math.floor(s),z.css({top:s+"px"})),f=parseInt(z.css("top"))/(y.outerHeight()-z.outerHeight()),s=f*(y[0].scrollHeight-y.outerHeight()),i){s=t;var r=s/y[0].scrollHeight*y.outerHeight();r=Math.min(Math.max(r,0),o),z.css({top:r+"px"})}y.scrollTop(s),y.trigger("slimscrolling",~~s),l(),n()}function o(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function r(){g=Math.max(y.outerHeight()/y[0].scrollHeight*y.outerHeight(),b),z.css({height:g+"px"});var t=g==y.outerHeight()?"none":"block";z.css({display:t})}function l(){if(r(),clearTimeout(p),f==~~f){if(m=a.allowPageScroll,v!=f){var t=0==~~f?"top":"bottom";y.trigger("slimscroll",t)}}else m=!1;return v=f,g>=y.outerHeight()?void(m=!0):(z.stop(!0,!0).fadeIn("fast"),void(a.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function n(){a.alwaysVisible||(p=setTimeout(function(){a.disableFadeOut&&h||c||u||(z.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var h,c,u,p,d,g,f,v,w="<div></div>",b=30,m=!1,y=t(this);if(y.parent().hasClass(a.wrapperClass)){var C=y.scrollTop();if(z=y.parent().find("."+a.barClass),S=y.parent().find("."+a.railClass),r(),t.isPlainObject(e)){if("height"in e&&"auto"==e.height){y.parent().css("height","auto"),y.css("height","auto");var H=y.parent().parent().height();y.parent().css("height",H),y.css("height",H)}if("scrollTo"in e)C=parseInt(a.scrollTo);else if("scrollBy"in e)C+=parseInt(a.scrollBy);else if("destroy"in e)return z.remove(),S.remove(),void y.unwrap();s(C,!1,!0)}}else{a.height="auto"==a.height?y.parent().height():a.height;var x=t(w).addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});y.css({overflow:"hidden",width:a.width,height:a.height});var S=t(w).addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.size,background:a.railColor,opacity:a.railOpacity,zIndex:90}),z=t(w).addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.size,BorderRadius:a.size,MozBorderRadius:a.size,WebkitBorderRadius:a.size,zIndex:99}),E="right"==a.position?{right:a.distance}:{left:a.distance};S.css(E),z.css(E),y.wrap(x),y.parent().append(z),y.parent().append(S),a.railDraggable&&t.ui&&"function"==typeof t.ui.draggable&&z.draggable({axis:"y",containment:"parent",start:function(){u=!0},stop:function(){u=!1,n()},drag:function(){s(0,t(this).position().top,!1)}}),S.hover(function(){l()},function(){n()}),z.hover(function(){c=!0},function(){c=!1}),y.hover(function(){h=!0,l(),n()},function(){h=!1,n()}),y.bind("touchstart",function(t){t.originalEvent.touches.length&&(d=t.originalEvent.touches[0].pageY)}),y.bind("touchmove",function(t){if(t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(d-t.originalEvent.touches[0].pageY)/a.touchScrollStep;s(e,!0)}}),"bottom"===a.start?(z.css({top:y.outerHeight()-z.outerHeight()}),s(0,!0)):"top"!==a.start&&(s(t(a.start).position().top,null,!0),a.alwaysVisible||z.hide()),o(),r()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);