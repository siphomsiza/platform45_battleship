!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(n){"use strict";var i=n.blueimp.fileupload.prototype.options.add;n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{processQueue:[],add:function(e,s){var r=n(this);s.process(function(){return r.fileupload("process",s)}),i.call(this,e,s)}},processActions:{},_processFile:function(e,i){var o=this,t=n.Deferred().resolveWith(o,[e]).promise();return this._trigger("process",null,e),n.each(e.processQueue,function(e,s){var r=function(e){return i.errorThrown?n.Deferred().rejectWith(o,[i]).promise():o.processActions[s.action].call(o,e,s)};t=t.pipe(r,s.always&&r)}),t.done(function(){o._trigger("processdone",null,e),o._trigger("processalways",null,e)}).fail(function(){o._trigger("processfail",null,e),o._trigger("processalways",null,e)}),t},_transformProcessQueue:function(o){var s=[];n.each(o.processQueue,function(){var r={},e=this.action,i=!0===this.prefix?e:this.prefix;n.each(this,function(e,s){"string"===n.type(s)&&"@"===s.charAt(0)?r[e]=o[s.slice(1)||(i?i+e.charAt(0).toUpperCase()+e.slice(1):e)]:r[e]=s}),s.push(r)}),o.processQueue=s},processing:function(){return this._processing},process:function(i){var o=this,t=n.extend({},this.options,i);return t.processQueue&&t.processQueue.length&&(this._transformProcessQueue(t),0===this._processing&&this._trigger("processstart"),n.each(i.files,function(e){var s=e?n.extend({},t):t,r=function(){return i.errorThrown?n.Deferred().rejectWith(o,[i]).promise():o._processFile(s,i)};s.index=e,o._processing+=1,o._processingQueue=o._processingQueue.pipe(r,r).always(function(){o._processing-=1,0===o._processing&&o._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=n.Deferred().resolveWith(this).promise()}})});