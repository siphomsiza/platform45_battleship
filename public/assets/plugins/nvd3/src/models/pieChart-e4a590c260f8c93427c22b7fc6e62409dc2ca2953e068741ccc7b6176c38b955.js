nv.models.pieChart=function(){"use strict";function t(i){return h.reset(),h.models(e),i.each(function(i){var s=d3.select(this);nv.utils.initSVG(s);var p=nv.utils.availableWidth(o,s,a),f=nv.utils.availableHeight(r,s,a);if(t.update=function(){s.transition().call(t)},t.container=this,u.setter(m(i),t.update).getter(g(i)).update(),u.disabled=i.map(function(t){return!!t.disabled}),!c){var h;c={};for(h in u)u[h]instanceof Array?c[h]=u[h].slice(0):c[h]=u[h]}if(!i||!i.length)return nv.utils.noData(t,s),t;s.selectAll(".nv-noData").remove();var b=s.selectAll("g.nv-wrap.nv-pieChart").data([i]),w=b.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),C=b.select("g");if(w.append("g").attr("class","nv-pieWrap"),w.append("g").attr("class","nv-legendWrap"),l)if("top"===d)n.width(p).key(e.x()),b.select(".nv-legendWrap").datum(i).call(n),a.top!=n.height()&&(a.top=n.height(),f=nv.utils.availableHeight(r,s,a)),b.select(".nv-legendWrap").attr("transform","translate(0,"+-a.top+")");else if("right"===d){var W=nv.models.legend().width();W>p/2&&(W=p/2),n.height(f).key(e.x()),n.width(W),p-=n.width(),b.select(".nv-legendWrap").datum(i).call(n).attr("transform","translate("+p+",0)")}b.attr("transform","translate("+a.left+","+a.top+")"),e.width(p).height(f);var y=C.select(".nv-pieWrap").datum([i]);d3.transition(y).call(e),n.dispatch.on("stateChange",function(e){for(var n in e)u[n]=e[n];v.stateChange(u),t.update()}),v.on("changeState",function(e){"undefined"!=typeof e.disabled&&(i.forEach(function(t,n){t.disabled=e.disabled[n]}),u.disabled=e.disabled),t.update()})}),h.renderEnd("pieChart immediate"),t}var e=nv.models.pie(),n=nv.models.legend(),i=nv.models.tooltip(),a={top:30,right:20,bottom:20,left:20},o=null,r=null,l=!0,d="top",s=nv.utils.defaultColor(),u=nv.utils.state(),c=null,p=null,f=250,v=d3.dispatch("stateChange","changeState","renderEnd");i.duration(0).headerEnabled(!1).valueFormatter(function(t,n){return e.valueFormat()(t,n)});var h=nv.utils.renderWatch(v),g=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},m=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color},i.data(e).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(){i.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(){i()}),t.legend=n,t.dispatch=v,t.pie=e,t.tooltip=i,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return l},set:function(t){l=t}},legendPosition:{get:function(){return d},set:function(t){d=t}},defaultState:{get:function(){return c},set:function(t){c=t}},color:{get:function(){return s},set:function(t){s=t,n.color(s),e.color(s)}},duration:{get:function(){return f},set:function(t){f=t,h.reset(f)}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}}}),nv.utils.inheritOptions(t,e),nv.utils.initOptions(t),t};