nv.models.multiBarHorizontal=function(){"use strict";function t(f){return T.reset(),f.each(function(t){var f=s-l.left-l.right,E=c-l.top-l.bottom;d=d3.select(this),nv.utils.initSVG(d),k&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(p)(t)),t.forEach(function(t,n){t.values.forEach(function(e){e.series=n,e.key=t.key})}),k&&t[0].values.map(function(n,e){var r=0,o=0;t.map(function(t){var n=t.values[e];n.size=Math.abs(n.y),n.y<0?(n.y1=o-n.size,o-=n.size):(n.y1=r,r+=n.size)})});var A=e&&r?[]:t.map(function(t){return t.values.map(function(t,n){return{x:m(t,n),y:p(t,n),y0:t.y0,y1:t.y1}})});g.domain(e||d3.merge(A).map(function(t){return t.x})).rangeBands(o||[0,E],B),h.domain(r||d3.extent(d3.merge(A).map(function(t){return k?t.y>0?t.y1+t.y:t.y1:t.y}).concat(y))),M&&!k?h.range(a||[h.domain()[0]<0?w:0,f-(h.domain()[1]>0?w:0)]):h.range(a||[0,f]),i=i||g,u=u||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);var D=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),H=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),j=(H.append("defs"),H.append("g"));D.select("g");j.append("g").attr("class","nv-groups"),D.attr("transform","translate("+l.left+","+l.top+")");var P=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,n){return n});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),P.exit().watchTransition(T,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),P.attr("class",function(t,n){return"nv-group nv-series-"+n}).classed("hover",function(t){return t.hover}).style("fill",function(t,n){return b(t,n)}).style("stroke",function(t,n){return b(t,n)}),P.watchTransition(T,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var F=P.selectAll("g.nv-bar").data(function(t){return t.values});F.exit().remove();var O=F.enter().append("g").attr("transform",function(n,e,r){return"translate("+u(k?n.y0:0)+","+(k?0:r*g.rangeBand()/t.length+g(m(n,e)))+")"});O.append("rect").attr("width",0).attr("height",g.rangeBand()/(k?1:t.length)),F.on("mouseover",function(t,n){d3.select(this).classed("hover",!0),S.elementMouseover({data:t,index:n,color:d3.select(this).style("fill")})}).on("mouseout",function(t,n){d3.select(this).classed("hover",!1),S.elementMouseout({data:t,index:n,color:d3.select(this).style("fill")})}).on("mouseout",function(t,n){S.elementMouseout({data:t,index:n,color:d3.select(this).style("fill")})}).on("mousemove",function(t,n){S.elementMousemove({data:t,index:n,color:d3.select(this).style("fill")})}).on("click",function(t,n){S.elementClick({data:t,index:n,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}).on("dblclick",function(t,n){S.elementDblClick({data:t,index:n,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),v(t[0],0)&&(O.append("polyline"),F.select("polyline").attr("fill","none").attr("points",function(n,e){var r=v(n,e),o=.8*g.rangeBand()/(2*(k?1:t.length));r=r.length?r:[-Math.abs(r),Math.abs(r)],r=r.map(function(t){return h(t)-h(0)});var a=[[r[0],-o],[r[0],o],[r[0],0],[r[1],0],[r[1],-o],[r[1],o]];return a.map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(n,e){var r=g.rangeBand()/(2*(k?1:t.length));return"translate("+(p(n,e)<0?0:h(p(n,e))-h(0))+", "+r+")"})),O.append("text"),M&&!k?(F.select("text").attr("text-anchor",function(t,n){return p(t,n)<0?"end":"start"}).attr("y",g.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,n){var e=C(p(t,n)),r=v(t,n);return void 0===r?e:r.length?e+"+"+C(Math.abs(r[1]))+"-"+C(Math.abs(r[0])):e+"\xb1"+C(Math.abs(r))}),F.watchTransition(T,"multibarhorizontal: bars").select("text").attr("x",function(t,n){return p(t,n)<0?-4:h(p(t,n))-h(0)+4})):F.selectAll("text").text(""),z&&!k?(O.append("text").classed("nv-bar-label",!0),F.select("text.nv-bar-label").attr("text-anchor",function(t,n){return p(t,n)<0?"start":"end"}).attr("y",g.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,n){return m(t,n)}),F.watchTransition(T,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,n){return p(t,n)<0?h(0)-h(p(t,n))+4:-4})):F.selectAll("text.nv-bar-label").text(""),F.attr("class",function(t,n){return p(t,n)<0?"nv-bar negative":"nv-bar positive"}),x&&(n||(n=t.map(function(){return!0})),F.style("fill",function(t,e,r){return d3.rgb(x(t,e)).darker(n.map(function(t,n){return n}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(x(t,e)).darker(n.map(function(t,n){return n}).filter(function(t,e){return!n[e]})[r]).toString()})),k?F.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(t,n){return"translate("+h(t.y1)+","+g(m(t,n))+")"}).select("rect").attr("width",function(t,n){return Math.abs(h(p(t,n)+t.y0)-h(t.y0))||0}).attr("height",g.rangeBand()):F.watchTransition(T,"multibarhorizontal: bars").attr("transform",function(n,e){return"translate("+h(p(n,e)<0?p(n,e):0)+","+(n.series*g.rangeBand()/t.length+g(m(n,e)))+")"}).select("rect").attr("height",g.rangeBand()/t.length).attr("width",function(t,n){return Math.max(Math.abs(h(p(t,n))-h(0)),1)||0}),i=g.copy(),u=h.copy()}),T.renderEnd("multibarHorizontal immediate"),t}var n,e,r,o,a,i,u,l={top:0,right:0,bottom:0,left:0},s=960,c=500,f=Math.floor(1e4*Math.random()),d=null,g=d3.scale.ordinal(),h=d3.scale.linear(),m=function(t){return t.x},p=function(t){return t.y},v=function(t){return t.yErr},y=[0],b=nv.utils.defaultColor(),x=null,k=!1,M=!1,z=!1,w=60,B=.1,C=d3.format(",.2f"),E=250,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=nv.utils.renderWatch(S,E);return t.dispatch=S,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return m},set:function(t){m=t}},y:{get:function(){return p},set:function(t){p=t}},yErr:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return g},set:function(t){g=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return k},set:function(t){k=t}},showValues:{get:function(){return M},set:function(t){M=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return C},set:function(t){C=t}},valuePadding:{get:function(){return w},set:function(t){w=t}},groupSpacing:{get:function(){return B},set:function(t){B=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return E},set:function(t){E=t,T.reset(E)}},color:{get:function(){return b},set:function(t){b=nv.utils.getColor(t)}},barColor:{get:function(){return x},set:function(t){x=t?nv.utils.getColor(t):null}}}),nv.utils.initOptions(t),t};