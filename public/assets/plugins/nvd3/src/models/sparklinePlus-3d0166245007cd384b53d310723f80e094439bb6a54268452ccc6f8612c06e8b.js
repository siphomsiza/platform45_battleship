nv.models.sparklinePlus=function(){"use strict";function t(h){return h.each(function(h){function d(){if(!s){var t=w.selectAll(".nv-hoverValue").data(i),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(a.x()(h[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),i.length&&(n.append("line").attr("x1",0).attr("y1",-r.top).attr("x2",0).attr("y2",m),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-r.top).attr("text-anchor","end").attr("dy",".9em"),w.select(".nv-hoverValue .nv-xValue").text(u(a.x()(h[i[0]],i[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-r.top).attr("text-anchor","start").attr("dy",".9em"),w.select(".nv-hoverValue .nv-yValue").text(c(a.y()(h[i[0]],i[0]))))}}function g(){function t(t,e){for(var n=Math.abs(a.x()(t[0],0)-e),r=0,l=0;l<t.length;l++)Math.abs(a.x()(t[l],l)-e)<n&&(n=Math.abs(a.x()(t[l],l)-e),r=l);return r}if(!s){var n=d3.mouse(this)[0]-r.left;i=[t(h,Math.round(e.invert(n)))],d()}}var y=d3.select(this);nv.utils.initSVG(y);var x=nv.utils.availableWidth(l,y,r),m=nv.utils.availableHeight(o,y,r);if(t.update=function(){y.call(t)},t.container=this,!h||!h.length)return nv.utils.noData(t,y),t;y.selectAll(".nv-noData").remove();var V=a.y()(h[h.length-1],h.length-1);e=a.xScale(),n=a.yScale();var k=y.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),b=k.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),A=b.append("g"),w=k.select("g");A.append("g").attr("class","nv-sparklineWrap"),A.append("g").attr("class","nv-valueWrap"),A.append("g").attr("class","nv-hoverArea"),k.attr("transform","translate("+r.left+","+r.top+")");var W=w.select(".nv-sparklineWrap");if(a.width(x).height(m),W.call(a),v){var M=w.select(".nv-valueWrap"),D=M.selectAll(".nv-currentValue").data([V]);D.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),D.attr("x",x+(f?r.right:0)).attr("y",p?function(t){return n(t)}:0).style("fill",a.color()(h[h.length-1],h.length-1)).text(c(V))}A.select(".nv-hoverArea").append("rect").on("mousemove",g).on("click",function(){s=!s}).on("mouseout",function(){i=[],d()}),w.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-r.left+","+-r.top+")"}).attr("width",x+r.left+r.right).attr("height",m+r.top)}),t}var e,n,a=nv.models.sparkline(),r={top:15,right:100,bottom:10,left:50},l=null,o=null,i=[],s=!1,u=d3.format(",r"),c=d3.format(",.2f"),v=!0,p=!0,f=!1,h=null;return t.sparkline=a,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return o},set:function(t){o=t}},xTickFormat:{get:function(){return u},set:function(t){u=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return v},set:function(t){v=t}},alignValue:{get:function(){return p},set:function(t){p=t}},rightAlignValue:{get:function(){return f},set:function(t){f=t}},noData:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}}}),nv.utils.inheritOptions(t,a),nv.utils.initOptions(t),t};