nv.models.scatter=function(){"use strict";function n(t){return K.reset(),t.each(function(s){function t(){if(J=!1,!T)return!1;if(!0===q){var e=d3.merge(s.map(function(t,i){return t.values.map(function(t,n){var e=M(t,n),o=P(t,n);return[w(e)+1e-4*Math.random(),A(o)+1e-4*Math.random(),i,n,t]}).filter(function(t,n){return O(t[4],n)})}));if(0==e.length)return!1;e.length<3&&(e.push([w.range()[0]-20,A.range()[0]-20,null,null]),e.push([w.range()[1]+20,A.range()[1]+20,null,null]),e.push([w.range()[0]-20,A.range()[0]+20,null,null]),e.push([w.range()[1]+20,A.range()[1]-20,null,null]));var o=d3.geom.polygon([[-10,-10],[-10,y+10],[h+10,y+10],[h+10,-10]]),t=d3.geom.voronoi(e).map(function(t,n){return{data:o.clip(t),series:e[n][2],point:e[n][3]}});u.select(".nv-point-paths").selectAll("path").remove();var n=u.select(".nv-point-paths").selectAll("path").data(t),i=n.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,n){return"nv-path-"+n}).attr("clip-path",function(t,n){return"url(#nv-clip-"+b+"-"+n+")"});if(j&&i.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),_){u.select(".nv-point-clips").selectAll("*").remove();u.select(".nv-point-clips").selectAll("clipPath").data(e).enter().append("svg:clipPath").attr("id",function(t,n){return"nv-clip-"+b+"-"+n}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",H)}var r=function(t,n){if(J)return 0;var e=s[t.series];if(e!==undefined){var o=e.values[t.point];o.color=x(e,t.series),o.x=M(o),o.y=P(o);var i=k.node().getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,u=window.pageXOffset||document.documentElement.scrollLeft;n({point:o,series:e,pos:{left:w(M(o,t.point))+i.left+u+m.left+10,top:A(P(o,t.point))+i.top+r+m.top+10},relativePos:[w(M(o,t.point))+m.left,A(P(o,t.point))+m.top],seriesIndex:t.series,pointIndex:t.point})}};n.on("click",function(t){r(t,Z.elementClick)}).on("dblclick",function(t){r(t,Z.elementDblClick)}).on("mouseover",function(t){r(t,Z.elementMouseover)}).on("mouseout",function(t){r(t,Z.elementMouseout)})}else u.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,n){if(J||!s[t.series])return 0;var e=s[t.series],o=e.values[n];Z.elementClick({point:o,series:e,pos:[w(M(o,n))+m.left,A(P(o,n))+m.top],relativePos:[w(M(o,n))+m.left,A(P(o,n))+m.top],seriesIndex:t.series,pointIndex:n})}).on("dblclick",function(t,n){if(J||!s[t.series])return 0;var e=s[t.series],o=e.values[n];Z.elementDblClick({point:o,series:e,pos:[w(M(o,n))+m.left,A(P(o,n))+m.top],relativePos:[w(M(o,n))+m.left,A(P(o,n))+m.top],seriesIndex:t.series,pointIndex:n})}).on("mouseover",function(t,n){if(J||!s[t.series])return 0;var e=s[t.series],o=e.values[n];Z.elementMouseover({point:o,series:e,pos:[w(M(o,n))+m.left,A(P(o,n))+m.top],relativePos:[w(M(o,n))+m.left,A(P(o,n))+m.top],seriesIndex:t.series,pointIndex:n,color:x(t,n)})}).on("mouseout",function(t,n){if(J||!s[t.series])return 0;var e=s[t.series],o=e.values[n];Z.elementMouseout({point:o,series:e,pos:[w(M(o,n))+m.left,A(P(o,n))+m.top],relativePos:[w(M(o,n))+m.left,A(P(o,n))+m.top],seriesIndex:t.series,pointIndex:n,color:x(t,n)})})}k=d3.select(this);var n=nv.utils.availableWidth(h,k,m),e=nv.utils.availableHeight(y,k,m);nv.utils.initSVG(k),s.forEach(function(t,n){t.values.forEach(function(t){t.series=n})});var o=W&&X&&F?[]:d3.merge(s.map(function(t){return t.values.map(function(t,n){return{x:M(t,n),y:P(t,n),size:C(t,n)}})}));w.domain(W||d3.extent(o.map(function(t){return t.x}).concat(E))),R&&s[0]?w.range(Y||[(n*N+n)/(2*s[0].values.length),n-n*(1+N)/(2*s[0].values.length)]):w.range(Y||[0,n]),A.domain(X||d3.extent(o.map(function(t){return t.y}).concat(z))).range(B||[e,0]),I.domain(F||d3.extent(o.map(function(t){return t.size}).concat(S))).range(G||Q),L=w.domain()[0]===w.domain()[1]||A.domain()[0]===A.domain()[1],w.domain()[0]===w.domain()[1]&&(w.domain()[0]?w.domain([w.domain()[0]-.01*w.domain()[0],w.domain()[1]+.01*w.domain()[1]]):w.domain([-1,1])),A.domain()[0]===A.domain()[1]&&(A.domain()[0]?A.domain([A.domain()[0]-.01*A.domain()[0],A.domain()[1]+.01*A.domain()[1]]):A.domain([-1,1])),isNaN(w.domain()[0])&&w.domain([-1,1]),isNaN(A.domain()[0])&&A.domain([-1,1]),p=p||w,d=d||A,v=v||I;var u=k.selectAll("g.nv-wrap.nv-scatter").data([s]),i=u.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+b),r=i.append("defs"),l=i.append("g"),c=u.select("g");u.classed("nv-single-point",L),l.append("g").attr("class","nv-groups"),l.append("g").attr("class","nv-point-paths"),i.append("g").attr("class","nv-point-clips"),u.attr("transform","translate("+m.left+","+m.top+")"),r.append("clipPath").attr("id","nv-edge-clip-"+b).append("rect"),u.select("#nv-edge-clip-"+b+" rect").attr("width",n).attr("height",0<e?e:0),c.attr("clip-path",V?"url(#nv-edge-clip-"+b+")":""),J=!0;var a=u.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});a.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a.exit().remove(),a.attr("class",function(t,n){return"nv-group nv-series-"+n}).classed("hover",function(t){return t.hover}),a.watchTransition(K,"scatter: groups").style("fill",function(t,n){return x(t,n)}).style("stroke",function(t,n){return x(t,n)}).style("stroke-opacity",1).style("fill-opacity",.5);var f=a.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,n){return[t,n]}).filter(function(t,n){return O(t[0],n)})});f.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+p(M(t[0],t[1]))+","+d(P(t[0],t[1]))+")"}).attr("d",nv.utils.symbol().type(function(t){return D(t[0])}).size(function(t){return I(C(t[0],t[1]))})),f.exit().remove(),a.exit().selectAll("path.nv-point").watchTransition(K,"scatter exit").attr("transform",function(t){return"translate("+w(M(t[0],t[1]))+","+A(P(t[0],t[1]))+")"}).remove(),f.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!T).classed("hover",!1)}),f.watchTransition(K,"scatter points").attr("transform",function(t){return"translate("+w(M(t[0],t[1]))+","+A(P(t[0],t[1]))+")"}).attr("d",nv.utils.symbol().type(function(t){return D(t[0])}).size(function(t){return I(C(t[0],t[1]))})),clearTimeout(g),g=setTimeout(t,300),p=w.copy(),d=A.copy(),v=I.copy()}),K.renderEnd("scatter immediate"),n}var p,d,v,g,m={top:0,right:0,bottom:0,left:0},h=null,y=null,x=nv.utils.defaultColor(),b=Math.floor(1e5*Math.random()),k=null,w=d3.scale.linear(),A=d3.scale.linear(),I=d3.scale.linear(),M=function(t){return t.x},P=function(t){return t.y},C=function(t){return t.size||1},D=function(t){return t.shape||"circle"},E=[],z=[],S=[],T=!0,O=function(t){return!t.notActive},R=!1,N=.1,V=!1,_=!0,j=!1,H=function(){return 25},W=null,X=null,Y=null,B=null,F=null,G=null,L=!1,Z=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),q=!0,e=250,J=!1,K=nv.utils.renderWatch(Z,e),Q=[16,256];return n.dispatch=Z,n.options=nv.utils.optionsFunc.bind(n),n._calls=new function(){this.clearHighlights=function(){return nv.dom.write(function(){k.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,n,e){nv.dom.write(function(){k.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+n).classed("hover",e)})}},Z.on("elementMouseover.point",function(t){T&&n._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),Z.on("elementMouseout.point",function(t){T&&n._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),n._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return w},set:function(t){w=t}},yScale:{get:function(){return A},set:function(t){A=t}},pointScale:{get:function(){return I},set:function(t){I=t}},xDomain:{get:function(){return W},set:function(t){W=t}},yDomain:{get:function(){return X},set:function(t){X=t}},pointDomain:{get:function(){return F},set:function(t){F=t}},xRange:{get:function(){return Y},set:function(t){Y=t}},yRange:{get:function(){return B},set:function(t){B=t}},pointRange:{get:function(){return G},set:function(t){G=t}},forceX:{get:function(){return E},set:function(t){E=t}},forceY:{get:function(){return z},set:function(t){z=t}},forcePoint:{get:function(){return S},set:function(t){S=t}},interactive:{get:function(){return T},set:function(t){T=t}},pointActive:{get:function(){return O},set:function(t){O=t}},padDataOuter:{get:function(){return N},set:function(t){N=t}},padData:{get:function(){return R},set:function(t){R=t}},clipEdge:{get:function(){return V},set:function(t){V=t}},clipVoronoi:{get:function(){return _},set:function(t){_=t}},clipRadius:{get:function(){return H},set:function(t){H=t}},showVoronoi:{get:function(){return j},set:function(t){j=t}},id:{get:function(){return b},set:function(t){b=t}},x:{get:function(){return M},set:function(t){M=d3.functor(t)}},y:{get:function(){return P},set:function(t){P=d3.functor(t)}},pointSize:{get:function(){return C},set:function(t){C=d3.functor(t)}},pointShape:{get:function(){return D},set:function(t){D=d3.functor(t)}},margin:{get:function(){return m},set:function(t){m.top=t.top!==undefined?t.top:m.top,m.right=t.right!==undefined?t.right:m.right,m.bottom=t.bottom!==undefined?t.bottom:m.bottom,m.left=t.left!==undefined?t.left:m.left}},duration:{get:function(){return e},set:function(t){e=t,K.reset(e)}},color:{get:function(){return x},set:function(t){x=nv.utils.getColor(t)}},useVoronoi:{get:function(){return q},set:function(t){!1===(q=t)&&(_=!1)}}}),nv.utils.initOptions(n),n};