nv.models.candlestickBar=function(){"use strict";function e(t){return t.each(function(t){f=d3.select(this);var n=nv.utils.availableWidth(m,f,p),e=nv.utils.availableHeight(k,f,p);nv.utils.initSVG(f);var i=n/t[0].values.length*.45;b.domain(d||d3.extent(t[0].values.map(w).concat(H))),E?b.range(v||[.5*n/t[0].values.length,n*(t[0].values.length-.5)/t[0].values.length]):b.range(v||[5+i/2,n-i/2-5]),y.domain(g||[d3.min(t[0].values.map(S).concat(A)),d3.max(t[0].values.map(D).concat(A))]).range(h||[e,0]),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),y.domain()[0]===y.domain()[1]&&(y.domain()[0]?y.domain([y.domain()[0]+.01*y.domain()[0],y.domain()[1]-.01*y.domain()[1]]):y.domain([-1,1]));var r=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([t[0].values]),a=r.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),c=a.append("defs"),o=a.append("g"),u=r.select("g");o.append("g").attr("class","nv-ticks"),r.attr("transform","translate("+p.left+","+p.top+")"),f.on("click",function(t,n){P.chartClick({data:t,index:n,pos:d3.event,id:x})}),c.append("clipPath").attr("id","nv-chart-clip-path-"+x).append("rect"),r.select("#nv-chart-clip-path-"+x+" rect").attr("width",n).attr("height",e),u.attr("clip-path",O?"url(#nv-chart-clip-path-"+x+")":"");var s=r.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});s.exit().remove();var l=s.enter().append("g");s.attr("class",function(t,n,e){return(B(t,n)>M(t,n)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+n});l.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,n){return"translate("+b(w(t,n))+",0)"}).attr("x1",0).attr("y1",function(t,n){return y(D(t,n))}).attr("x2",0).attr("y2",function(t,n){return y(S(t,n))}),l.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,n){return"translate("+(b(w(t,n))-i/2)+","+(y(C(t,n))-(B(t,n)>M(t,n)?y(M(t,n))-y(B(t,n)):0))+")"}).attr("x",0).attr("y",0).attr("width",i).attr("height",function(t,n){var e=B(t,n),i=M(t,n);return i<e?y(i)-y(e):y(e)-y(i)});s.select(".nv-candlestick-lines").transition().attr("transform",function(t,n){return"translate("+b(w(t,n))+",0)"}).attr("x1",0).attr("y1",function(t,n){return y(D(t,n))}).attr("x2",0).attr("y2",function(t,n){return y(S(t,n))}),s.select(".nv-candlestick-rects").transition().attr("transform",function(t,n){return"translate("+(b(w(t,n))-i/2)+","+(y(C(t,n))-(B(t,n)>M(t,n)?y(M(t,n))-y(B(t,n)):0))+")"}).attr("x",0).attr("y",0).attr("width",i).attr("height",function(t,n){var e=B(t,n),i=M(t,n);return i<e?y(i)-y(e):y(e)-y(i)})}),e}var f,d,g,v,h,p={top:0,right:0,bottom:0,left:0},m=null,k=null,x=Math.floor(1e4*Math.random()),b=d3.scale.linear(),y=d3.scale.linear(),w=function(t){return t.x},C=function(t){return t.y},B=function(t){return t.open},M=function(t){return t.close},D=function(t){return t.high},S=function(t){return t.low},H=[],A=[],E=!1,O=!0,n=nv.utils.defaultColor(),i=!1,P=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,n){e.clearHighlights(),f.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",n)},e.clearHighlights=function(){f.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},e.dispatch=P,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return m},set:function(t){m=t}},height:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return y},set:function(t){y=t}},xDomain:{get:function(){return d},set:function(t){d=t}},yDomain:{get:function(){return g},set:function(t){g=t}},xRange:{get:function(){return v},set:function(t){v=t}},yRange:{get:function(){return h},set:function(t){h=t}},forceX:{get:function(){return H},set:function(t){H=t}},forceY:{get:function(){return A},set:function(t){A=t}},padData:{get:function(){return E},set:function(t){E=t}},clipEdge:{get:function(){return O},set:function(t){O=t}},id:{get:function(){return x},set:function(t){x=t}},interactive:{get:function(){return i},set:function(t){i=t}},x:{get:function(){return w},set:function(t){w=t}},y:{get:function(){return C},set:function(t){C=t}},open:{get:function(){return B()},set:function(t){B=t}},close:{get:function(){return M()},set:function(t){M=t}},high:{get:function(){return D},set:function(t){D=t}},low:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return p},set:function(t){p.top=t.top!=undefined?t.top:p.top,p.right=t.right!=undefined?t.right:p.right,p.bottom=t.bottom!=undefined?t.bottom:p.bottom,p.left=t.left!=undefined?t.left:p.left}},color:{get:function(){return n},set:function(t){n=nv.utils.getColor(t)}}}),nv.utils.initOptions(e),e};