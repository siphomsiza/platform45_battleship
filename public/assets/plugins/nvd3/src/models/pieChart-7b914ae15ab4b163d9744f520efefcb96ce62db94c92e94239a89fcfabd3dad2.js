nv.models.pieChart=function(){"use strict";function s(t){return o.reset(),o.models(c),t.each(function(t){var e=d3.select(this);nv.utils.initSVG(e);var n,i=nv.utils.availableWidth(h,e,p),a=nv.utils.availableHeight(v,e,p);if(s.update=function(){e.transition().call(s)},s.container=this,b.setter(y(t),s.update).getter(W(t)).update(),b.disabled=t.map(function(t){return!!t.disabled}),!w)for(n in w={},b)b[n]instanceof Array?w[n]=b[n].slice(0):w[n]=b[n];if(!t||!t.length)return nv.utils.noData(s,e),s;e.selectAll(".nv-noData").remove();var o=e.selectAll("g.nv-wrap.nv-pieChart").data([t]),r=o.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),l=o.select("g");if(r.append("g").attr("class","nv-pieWrap"),r.append("g").attr("class","nv-legendWrap"),g)if("top"===m)f.width(i).key(c.x()),o.select(".nv-legendWrap").datum(t).call(f),p.top!=f.height()&&(p.top=f.height(),a=nv.utils.availableHeight(v,e,p)),o.select(".nv-legendWrap").attr("transform","translate(0,"+-p.top+")");else if("right"===m){var d=nv.models.legend().width();i/2<d&&(d=i/2),f.height(a).key(c.x()),f.width(d),i-=f.width(),o.select(".nv-legendWrap").datum(t).call(f).attr("transform","translate("+i+",0)")}o.attr("transform","translate("+p.left+","+p.top+")"),c.width(i).height(a);var u=l.select(".nv-pieWrap").datum([t]);d3.transition(u).call(c),f.dispatch.on("stateChange",function(t){for(var e in t)b[e]=t[e];C.stateChange(b),s.update()}),C.on("changeState",function(n){"undefined"!=typeof n.disabled&&(t.forEach(function(t,e){t.disabled=n.disabled[e]}),b.disabled=n.disabled),s.update()})}),o.renderEnd("pieChart immediate"),s}var c=nv.models.pie(),f=nv.models.legend(),e=nv.models.tooltip(),p={top:30,right:20,bottom:20,left:20},h=null,v=null,g=!0,m="top",n=nv.utils.defaultColor(),b=nv.utils.state(),w=null,i=null,a=250,C=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return c.valueFormat()(t,e)});var o=nv.utils.renderWatch(C),W=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},y=function(t){return function(n){n.active!==undefined&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};return c.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:s.x()(t.data),value:s.y()(t.data),color:t.color},e.data(t).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(){e()}),s.legend=f,s.dispatch=C,s.pie=c,s.tooltip=e,s.options=nv.utils.optionsFunc.bind(s),s._options=Object.create({},{noData:{get:function(){return i},set:function(t){i=t}},showLegend:{get:function(){return g},set:function(t){g=t}},legendPosition:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return w},set:function(t){w=t}},color:{get:function(){return n},set:function(t){n=t,f.color(n),c.color(n)}},duration:{get:function(){return a},set:function(t){a=t,o.reset(a)}},margin:{get:function(){return p},set:function(t){p.top=t.top!==undefined?t.top:p.top,p.right=t.right!==undefined?t.right:p.right,p.bottom=t.bottom!==undefined?t.bottom:p.bottom,p.left=t.left!==undefined?t.left:p.left}}}),nv.utils.inheritOptions(s,c),nv.utils.initOptions(s),s};