nv.models.lineWithFocusChart=function(){"use strict";function b(t){return t.each(function(a){function t(t){var n=+("e"==t),e=n?1:-1,i=s/3;return"M"+.5*e+","+i+"A6,6 0 0 "+n+" "+6.5*e+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+n+" "+.5*e+","+2*i+"ZM"+2.5*e+","+(i+8)+"V"+(2*i-8)+"M"+4.5*e+","+(i+8)+"V"+(2*i-8)}function n(){z.empty()||z.extent(P),g.data([z.empty()?F.domain():P]).each(function(t){var n=F(t[0])-k.range()[0],e=o-F(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",F(t[1])).attr("width",e<0?0:e)})}function e(){P=z.empty()?null:z.extent();var e=z.empty()?F.domain():z.extent();Math.abs(e[0]-e[1])<=1||(X.brush({extent:e,brush:z}),n(),f.select(".nv-focus .nv-linesWrap").datum(a.filter(function(t){return!t.disabled}).map(function(t){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,n){return A.x()(t,n)>=e[0]&&A.x()(t,n)<=e[1]})}})).transition().duration(Y).call(A),f.select(".nv-focus .nv-x.nv-axis").transition().duration(Y).call(w),f.select(".nv-focus .nv-y.nv-axis").transition().duration(Y).call(C))}var i=d3.select(this),u=this;nv.utils.initSVG(i);var r,o=nv.utils.availableWidth(I,i,H),l=nv.utils.availableHeight(B,i,H)-D,s=D-_.top-_.bottom;if(b.update=function(){i.transition().duration(Y).call(b)},b.container=this,N.setter(q(a),b.update).getter(Z(a)).update(),N.disabled=a.map(function(t){return!!t.disabled}),!j)for(r in j={},N)N[r]instanceof Array?j[r]=N[r].slice(0):j[r]=N[r];if(!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return nv.utils.noData(b,i),b;i.selectAll(".nv-noData").remove(),k=A.xScale(),y=A.yScale(),F=W.xScale(),S=W.yScale();var c=i.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([a]),d=c.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),f=c.select("g");d.append("g").attr("class","nv-legendWrap");var v=d.append("g").attr("class","nv-focus");v.append("g").attr("class","nv-x nv-axis"),v.append("g").attr("class","nv-y nv-axis"),v.append("g").attr("class","nv-linesWrap"),v.append("g").attr("class","nv-interactive");var p=d.append("g").attr("class","nv-context");p.append("g").attr("class","nv-x nv-axis"),p.append("g").attr("class","nv-y nv-axis"),p.append("g").attr("class","nv-linesWrap"),p.append("g").attr("class","nv-brushBackground"),p.append("g").attr("class","nv-x nv-brush"),O&&(T.width(o),f.select(".nv-legendWrap").datum(a).call(T),H.top!=T.height()&&(H.top=T.height(),l=nv.utils.availableHeight(B,i,H)-D),f.select(".nv-legendWrap").attr("transform","translate(0,"+-H.top+")")),c.attr("transform","translate("+H.left+","+H.top+")"),L&&(E.width(o).height(l).margin({left:H.left,top:H.top}).svgContainer(i).xScale(k),c.select(".nv-interactive").call(E)),A.width(o).height(l).color(a.map(function(t,n){return t.color||G(t,n)}).filter(function(t,n){return!a[n].disabled})),W.defined(A.defined()).width(o).height(s).color(a.map(function(t,n){return t.color||G(t,n)}).filter(function(t,n){return!a[n].disabled})),f.select(".nv-context").attr("transform","translate(0,"+(l+H.bottom+_.top)+")");var h=f.select(".nv-context .nv-linesWrap").datum(a.filter(function(t){return!t.disabled}));d3.transition(h).call(W),w.scale(k)._ticks(nv.utils.calcTicksX(o/100,a)).tickSize(-l,0),C.scale(y)._ticks(nv.utils.calcTicksY(l/36,a)).tickSize(-o,0),f.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+l+")"),z.x(F).on("brush",function(){e()}),P&&z.extent(P);var g=f.select(".nv-brushBackground").selectAll("g").data([P||z.extent()]),m=g.enter().append("g");m.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",s),m.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",s);var x=f.select(".nv-x.nv-brush").call(z);x.selectAll("rect").attr("height",s),x.selectAll(".resize").append("path").attr("d",t),e(),M.scale(F)._ticks(nv.utils.calcTicksX(o/100,a)).tickSize(-s,0),f.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")"),d3.transition(f.select(".nv-context .nv-x.nv-axis")).call(M),V.scale(S)._ticks(nv.utils.calcTicksY(s/36,a)).tickSize(-o,0),d3.transition(f.select(".nv-context .nv-y.nv-axis")).call(V),f.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")"),T.dispatch.on("stateChange",function(t){for(var n in t)N[n]=t[n];X.stateChange(N),b.update()}),E.dispatch.on("elementMousemove",function(r){A.clearHighlights();var o,l,s,c=[];if(a.filter(function(t,n){return t.seriesIndex=n,!t.disabled}).forEach(function(t,n){var e=z.empty()?F.domain():z.extent(),i=t.values.filter(function(t,n){return A.x()(t,n)>=e[0]&&A.x()(t,n)<=e[1]}),a=i[l=nv.interactiveBisect(i,r.pointXValue,A.x())];null!=b.y()(a,l)&&A.highlightPoint(n,l,!0),a!==undefined&&(o===undefined&&(o=a),s===undefined&&(s=b.xScale()(b.x()(a,l))),c.push({key:t.key,value:b.y()(a,l),color:G(t,t.seriesIndex)}))}),2<c.length){var t=b.yScale().invert(r.mouseY),n=.03*Math.abs(b.yScale().domain()[0]-b.yScale().domain()[1]),e=nv.nearestValueIndex(c.map(function(t){return t.value}),t,n);null!==e&&(c[e].highlight=!0)}var i=w.tickFormat()(b.x()(o,l));E.tooltip.chartContainer(u.parentNode).valueFormatter(function(t){return null==t?"N/A":C.tickFormat()(t)}).data({value:i,index:l,series:c})(),E.renderGuideLine(s)}),E.dispatch.on("elementMouseout",function(){A.clearHighlights()}),X.on("changeState",function(e){"undefined"!=typeof e.disabled&&a.forEach(function(t,n){t.disabled=e.disabled[n]}),b.update()})}),b}var k,y,F,S,A=nv.models.line(),W=nv.models.line(),w=nv.models.axis(),C=nv.models.axis(),M=nv.models.axis(),V=nv.models.axis(),T=nv.models.legend(),z=d3.svg.brush(),n=nv.models.tooltip(),E=nv.interactiveGuideline(),H={top:30,right:30,bottom:30,left:60},_={top:0,right:30,bottom:20,left:60},G=nv.utils.defaultColor(),I=null,B=null,D=50,L=!1,O=!0,P=null,e=null,X=d3.dispatch("brush","stateChange","changeState"),Y=250,N=nv.utils.state(),j=null;A.clipEdge(!0).duration(0),W.interactive(!1),W.pointActive(function(){return!1}),w.orient("bottom").tickPadding(5),C.orient("left"),M.orient("bottom").tickPadding(5),V.orient("left"),n.valueFormatter(function(t,n){return C.tickFormat()(t,n)}).headerFormatter(function(t,n){return w.tickFormat()(t,n)});var Z=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},q=function(t){return function(e){e.active!==undefined&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return A.dispatch.on("elementMouseover.tooltip",function(t){n.data(t).hidden(!1)}),A.dispatch.on("elementMouseout.tooltip",function(){n.hidden(!0)}),b.dispatch=X,b.legend=T,b.lines=A,b.lines2=W,b.xAxis=w,b.yAxis=C,b.x2Axis=M,b.y2Axis=V,b.interactiveLayer=E,b.tooltip=n,b.options=nv.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return I},set:function(t){I=t}},height:{get:function(){return B},set:function(t){B=t}},focusHeight:{get:function(){return D},set:function(t){D=t}},showLegend:{get:function(){return O},set:function(t){O=t}},brushExtent:{get:function(){return P},set:function(t){P=t}},defaultState:{get:function(){return j},set:function(t){j=t}},noData:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return H},set:function(t){H.top=t.top!==undefined?t.top:H.top,H.right=t.right!==undefined?t.right:H.right,H.bottom=t.bottom!==undefined?t.bottom:H.bottom,H.left=t.left!==undefined?t.left:H.left}},focusMargin:{get:function(){return _},set:function(t){_.top=t.top!==undefined?t.top:_.top,_.right=t.right!==undefined?t.right:_.right,_.bottom=t.bottom!==undefined?t.bottom:_.bottom,_.left=t.left!==undefined?t.left:_.left}},color:{get:function(){return G},set:function(t){G=nv.utils.getColor(t),T.color(G)}},interpolate:{get:function(){return A.interpolate()},set:function(t){A.interpolate(t),W.interpolate(t)}},xTickFormat:{get:function(){return w.tickFormat()},set:function(t){w.tickFormat(t),M.tickFormat(t)}},yTickFormat:{get:function(){return C.tickFormat()},set:function(t){C.tickFormat(t),V.tickFormat(t)}},duration:{get:function(){return Y},set:function(t){Y=t,C.duration(Y),V.duration(Y),w.duration(Y),M.duration(Y)}},x:{get:function(){return A.x()},set:function(t){A.x(t),W.x(t)}},y:{get:function(){return A.y()},set:function(t){A.y(t),W.y(t)}},useInteractiveGuideline:{get:function(){return L},set:function(t){(L=t)&&(A.interactive(!1),A.useVoronoi(!1))}}}),nv.utils.inheritOptions(b,A),nv.utils.initOptions(b),b};