nv.models.historicalBarChart=function(t){"use strict";function e(t){return t.each(function(c){F.reset(),F.models(a),p&&F.models(r),g&&F.models(o);var y=d3.select(this),w=this;nv.utils.initSVG(y);var B=nv.utils.availableWidth(v,y,d),S=nv.utils.availableHeight(h,y,d);if(e.update=function(){y.transition().duration(C).call(e)},e.container=this,x.disabled=c.map(function(t){return!!t.disabled}),!k){var G;k={};for(G in x)x[G]instanceof Array?k[G]=x[G].slice(0):k[G]=x[G]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return nv.utils.noData(e,y),e;y.selectAll(".nv-noData").remove(),n=a.xScale(),i=a.yScale();var W=y.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),E=W.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),H=W.select("g");E.append("g").attr("class","nv-x nv-axis"),E.append("g").attr("class","nv-y nv-axis"),E.append("g").attr("class","nv-barsWrap"),E.append("g").attr("class","nv-legendWrap"),E.append("g").attr("class","nv-interactive"),f&&(l.width(B),H.select(".nv-legendWrap").datum(c).call(l),d.top!=l.height()&&(d.top=l.height(),S=nv.utils.availableHeight(h,y,d)),W.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),W.attr("transform","translate("+d.left+","+d.top+")"),m&&H.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)"),b&&(s.width(B).height(S).margin({left:d.left,top:d.top}).svgContainer(y).xScale(n),W.select(".nv-interactive").call(s)),a.width(B).height(S).color(c.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!c[e].disabled}));var I=H.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled}));I.transition().call(a),p&&(r.scale(n)._ticks(nv.utils.calcTicksX(B/100,c)).tickSize(-S,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),H.select(".nv-x.nv-axis").transition().call(r)),g&&(o.scale(i)._ticks(nv.utils.calcTicksY(S/36,c)).tickSize(-B,0),H.select(".nv-y.nv-axis").transition().call(o)),s.dispatch.on("elementMousemove",function(t){a.clearHighlights();var n,i,l,d=[];c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r){i=nv.interactiveBisect(r.values,t.pointXValue,e.x()),a.highlightPoint(i,!0);var o=r.values[i];void 0!==o&&(void 0===n&&(n=o),void 0===l&&(l=e.xScale()(e.x()(o,i))),d.push({key:r.key,value:e.y()(o,i),color:u(r,r.seriesIndex),data:r.values[i]}))});var v=r.tickFormat()(e.x()(n,i));s.tooltip.chartContainer(w.parentNode).valueFormatter(function(t){return o.tickFormat()(t)}).data({value:v,index:i,series:d})(),s.renderGuideLine(l)}),s.dispatch.on("elementMouseout",function(){A.tooltipHide(),a.clearHighlights()}),l.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,c.filter(function(t){return!t.disabled}).length||c.map(function(t){return t.disabled=!1,W.selectAll(".nv-series").classed("disabled",!1),t}),x.disabled=c.map(function(t){return!!t.disabled}),A.stateChange(x),t.transition().call(e)}),l.dispatch.on("legendDblclick",function(t){c.forEach(function(t){t.disabled=!0}),t.disabled=!1,x.disabled=c.map(function(t){return!!t.disabled}),A.stateChange(x),e.update()}),A.on("changeState",function(t){"undefined"!=typeof t.disabled&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),x.disabled=t.disabled),e.update()})}),F.renderEnd("historicalBarChart immediate"),e}var n,i,a=t||nv.models.historicalBar(),r=nv.models.axis(),o=nv.models.axis(),l=nv.models.legend(),s=nv.interactiveGuideline(),c=nv.models.tooltip(),d={top:30,right:90,bottom:50,left:90},u=nv.utils.defaultColor(),v=null,h=null,f=!1,p=!0,g=!0,m=!1,b=!1,x={},k=null,y=null,A=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),C=250;r.orient("bottom").tickPadding(7),o.orient(m?"right":"left"),c.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return o.tickFormat()(t,e)}).headerFormatter(function(t,e){return r.tickFormat()(t,e)});var F=nv.utils.renderWatch(A,0);return a.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},c.data(t).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(){c()}),e.dispatch=A,e.bars=a,e.legend=l,e.xAxis=r,e.yAxis=o,e.interactiveLayer=s,e.tooltip=c,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return p},set:function(t){p=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return u},set:function(t){u=nv.utils.getColor(t),l.color(u),a.color(u)}},duration:{get:function(){return C},set:function(t){C=t,F.reset(C),o.duration(C),r.duration(C)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,o.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,t===!0&&e.interactive(!1)}}}),nv.utils.inheritOptions(e,a),nv.utils.initOptions(e),e},nv.models.ohlcBarChart=function(){var t=nv.models.historicalBarChart(nv.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data,i=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+i+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},nv.models.candlestickBarChart=function(){var t=nv.models.historicalBarChart(nv.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data,i=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+i+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t};