nv.models.discreteBar=function(){"use strict";function e(t){return E.reset(),t.each(function(t){var e=h-m.left-m.right,n=y-m.top-m.bottom;u=d3.select(this),nv.utils.initSVG(u),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var r=l&&f?[]:t.map(function(t){return t.values.map(function(t,e){return{x:B(t,e),y:k(t,e),y0:t.y0}})});x.domain(l||d3.merge(r).map(function(t){return t.x})).rangeBands(d||[0,e],.1),b.domain(f||d3.extent(d3.merge(r).map(function(t){return t.y}).concat(w))),C?b.range(g||[n-(b.domain()[0]<0?12:0),0<b.domain()[1]?12:0]):b.range(g||[n,0]),p=p||x,v=v||b.copy().range([b(0),b(0)]);var o=u.selectAll("g.nv-wrap.nv-discretebar").data([t]),i=o.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");o.select("g");i.append("g").attr("class","nv-groups"),o.attr("transform","translate("+m.left+","+m.top+")");var a=o.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});a.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a.exit().watchTransition(E,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),a.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),a.watchTransition(E,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var c=a.selectAll("g.nv-bar").data(function(t){return t.values});c.exit().remove();var s=c.enter().append("g").attr("transform",function(t,e){return"translate("+(x(B(t,e))+.05*x.rangeBand())+", "+b(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),A.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),A.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){A.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;A.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){A.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});s.append("rect").attr("height",0).attr("width",.9*x.rangeBand()/t.length),C?(s.append("text").attr("text-anchor","middle"),c.select("text").text(function(t,e){return T(k(t,e))}).watchTransition(E,"discreteBar: bars text").attr("x",.9*x.rangeBand()/2).attr("y",function(t,e){return k(t,e)<0?b(k(t,e))-b(0)+12:-4})):c.selectAll("text").remove(),c.attr("class",function(t,e){return k(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||M(t,e)}).style("stroke",function(t,e){return t.color||M(t,e)}).select("rect").attr("class",D).watchTransition(E,"discreteBar: bars rect").attr("width",.9*x.rangeBand()/t.length),c.watchTransition(E,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(x(B(t,e))+.05*x.rangeBand())+", "+(k(t,e)<0?b(0):b(0)-b(k(t,e))<1?b(0)-1:b(k(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(b(k(t,e))-b(0)),1)}),p=x.copy(),v=b.copy()}),E.renderEnd("discreteBar immediate"),e}var u,l,f,d,g,p,v,m={top:0,right:0,bottom:0,left:0},h=960,y=500,n=Math.floor(1e4*Math.random()),x=d3.scale.ordinal(),b=d3.scale.linear(),B=function(t){return t.x},k=function(t){return t.y},w=[0],M=nv.utils.defaultColor(),C=!1,T=d3.format(",.2f"),A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),D="discreteBar",r=250,E=nv.utils.renderWatch(A,r);return e.dispatch=A,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return C},set:function(t){C=t}},x:{get:function(){return B},set:function(t){B=t}},y:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return x},set:function(t){x=t}},yScale:{get:function(){return b},set:function(t){b=t}},xDomain:{get:function(){return l},set:function(t){l=t}},yDomain:{get:function(){return f},set:function(t){f=t}},xRange:{get:function(){return d},set:function(t){d=t}},yRange:{get:function(){return g},set:function(t){g=t}},valueFormat:{get:function(){return T},set:function(t){T=t}},id:{get:function(){return n},set:function(t){n=t}},rectClass:{get:function(){return D},set:function(t){D=t}},margin:{get:function(){return m},set:function(t){m.top=t.top!==undefined?t.top:m.top,m.right=t.right!==undefined?t.right:m.right,m.bottom=t.bottom!==undefined?t.bottom:m.bottom,m.left=t.left!==undefined?t.left:m.left}},color:{get:function(){return M},set:function(t){M=nv.utils.getColor(t)}},duration:{get:function(){return r},set:function(t){r=t,E.reset(r)}}}),nv.utils.initOptions(e),e};