nv.models.scatterChart=function(){"use strict";function t(S){return I.reset(),I.models(e),x&&I.models(n),b&&I.models(i),g&&I.models(a),h&&I.models(s),S.each(function(S){u=d3.select(this),nv.utils.initSVG(u);var X=nv.utils.availableWidth(c,u,l),z=nv.utils.availableHeight(d,u,l);if(t.update=function(){0===A?u.call(t):u.transition().duration(A).call(t)},t.container=this,k.setter(Y(S),t.update).getter(D(S)).update(),k.disabled=S.map(function(t){return!!t.disabled}),!w){var E;w={};for(E in k)k[E]instanceof Array?w[E]=k[E].slice(0):w[E]=k[E]}if(!(S&&S.length&&S.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,u),I.renderEnd("scatter immediate"),t;u.selectAll(".nv-noData").remove(),v=e.xScale(),p=e.yScale();var F=u.selectAll("g.nv-wrap.nv-scatterChart").data([S]),P=F.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),O=P.append("g"),T=F.select("g");if(O.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-scatterWrap"),O.append("g").attr("class","nv-regressionLinesWrap"),O.append("g").attr("class","nv-distWrap"),O.append("g").attr("class","nv-legendWrap"),y&&T.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)"),m){var _=X;r.width(_),F.select(".nv-legendWrap").datum(S).call(r),l.top!=r.height()&&(l.top=r.height(),z=nv.utils.availableHeight(d,u,l)),F.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")}F.attr("transform","translate("+l.left+","+l.top+")"),e.width(X).height(z).color(S.map(function(t,e){return t.color=t.color||f(t,e),t.color}).filter(function(t,e){return!S[e].disabled})),F.select(".nv-scatterWrap").datum(S.filter(function(t){return!t.disabled})).call(e),F.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var H=F.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});H.enter().append("g").attr("class","nv-regLines");var M=H.selectAll(".nv-regLine").data(function(t){return[t]});M.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),M.filter(function(t){return t.intercept&&t.slope}).watchTransition(I,"scatterPlusLineChart: regline").attr("x1",v.range()[0]).attr("x2",v.range()[1]).attr("y1",function(t){return p(v.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return p(v.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return f(t,n)}).style("stroke-opacity",function(t){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),x&&(n.scale(v)._ticks(nv.utils.calcTicksX(X/100,S)).tickSize(-z,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(n)),b&&(i.scale(p)._ticks(nv.utils.calcTicksY(z/36,S)).tickSize(-X,0),T.select(".nv-y.nv-axis").call(i)),g&&(a.getData(e.x()).scale(v).width(X).color(S.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!S[e].disabled})),O.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),T.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(S.filter(function(t){return!t.disabled})).call(a)),h&&(s.getData(e.y()).scale(p).width(z).color(S.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!S[e].disabled})),O.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),T.select(".nv-distributionY").attr("transform","translate("+(y?X:-s.size())+",0)").datum(S.filter(function(t){return!t.disabled})).call(s)),r.dispatch.on("stateChange",function(e){for(var n in e)k[n]=e[n];W.stateChange(k),t.update()}),W.on("changeState",function(e){"undefined"!=typeof e.disabled&&(S.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){o.hidden(!0),u.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),u.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",s.size())}),e.dispatch.on("elementMouseover.tooltip",function(t){u.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-z),u.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+a.size()),o.data(t).hidden(!1)}),C=v.copy(),L=p.copy()}),I.renderEnd("scatter with line immediate"),t}var e=nv.models.scatter(),n=nv.models.axis(),i=nv.models.axis(),r=nv.models.legend(),a=nv.models.distribution(),s=nv.models.distribution(),o=nv.models.tooltip(),l={top:30,right:20,bottom:50,left:75},c=null,d=null,u=null,f=nv.utils.defaultColor(),v=e.xScale(),p=e.yScale(),g=!1,h=!1,m=!0,x=!0,b=!0,y=!1,k=nv.utils.state(),w=null,W=d3.dispatch("stateChange","changeState","renderEnd"),S=null,A=250;e.xScale(v).yScale(p),n.orient("bottom").tickPadding(10),i.orient(y?"right":"left").tickPadding(10),a.axis("x"),s.axis("y"),o.headerFormatter(function(t,e){return n.tickFormat()(t,e)}).valueFormatter(function(t,e){return i.tickFormat()(t,e)});var C,L,I=nv.utils.renderWatch(W,A),D=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},Y=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return t.dispatch=W,t.scatter=e,t.legend=r,t.xAxis=n,t.yAxis=i,t.distX=a,t.distY=s,t.tooltip=o,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},container:{get:function(){return u},set:function(t){u=t}},showDistX:{get:function(){return g},set:function(t){g=t}},showDistY:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return S},set:function(t){S=t}},duration:{get:function(){return A},set:function(t){A=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,i.orient(t?"right":"left")}},color:{get:function(){return f},set:function(t){f=nv.utils.getColor(t),r.color(f),a.color(f),s.color(f)}}}),nv.utils.inheritOptions(t,e),nv.utils.initOptions(t),t};