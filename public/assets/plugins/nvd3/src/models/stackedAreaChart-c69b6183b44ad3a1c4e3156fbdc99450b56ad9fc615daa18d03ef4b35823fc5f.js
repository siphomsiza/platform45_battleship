nv.models.stackedAreaChart=function(){"use strict";function t(c){return O.reset(),O.models(a),g&&O.models(i),m&&O.models(r),c.each(function(c){var C=d3.select(this),O=this;nv.utils.initSVG(C);var K=nv.utils.availableWidth(u,C,d),G=nv.utils.availableHeight(f,C,d);if(t.update=function(){C.transition().duration(M).call(t)},t.container=this,S.setter(H(c),t.update).getter(V(c)).update(),S.disabled=c.map(function(t){return!!t.disabled}),!A){var Y;A={};for(Y in S)S[Y]instanceof Array?A[Y]=S[Y].slice(0):A[Y]=S[Y]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,C),t;C.selectAll(".nv-noData").remove(),e=a.xScale(),n=a.yScale();var D=C.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),X=D.select("g");if(P.append("rect").style("opacity",0),P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-stackedWrap"),P.append("g").attr("class","nv-legendWrap"),P.append("g").attr("class","nv-controlsWrap"),P.append("g").attr("class","nv-interactive"),X.select("rect").attr("width",K).attr("height",G),h){var z=v?K-w:K;o.width(z),X.select(".nv-legendWrap").datum(c).call(o),d.top!=o.height()&&(d.top=o.height(),G=nv.utils.availableHeight(f,C,d)),X.select(".nv-legendWrap").attr("transform","translate("+(K-z)+","+-d.top+")")}if(v){var j=[{key:W.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=a.style(),style:"stack"},{key:W.stream||"Stream",metaKey:"Stream",disabled:"stream"!=a.style(),style:"stream"},{key:W.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=a.style(),style:"expand"},{key:W.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=a.style(),style:"stack_percent"}];w=E.length/3*260,j=j.filter(function(t){return-1!==E.indexOf(t.metaKey)}),l.width(w).color(["#444","#444","#444"]),X.select(".nv-controlsWrap").datum(j).call(l),d.top!=Math.max(l.height(),o.height())&&(d.top=Math.max(l.height(),o.height()),G=nv.utils.availableHeight(f,C,d)),X.select(".nv-controlsWrap").attr("transform","translate(0,"+-d.top+")")}D.attr("transform","translate("+d.left+","+d.top+")"),y&&X.select(".nv-y.nv-axis").attr("transform","translate("+K+",0)"),k&&(s.width(K).height(G).margin({left:d.left,top:d.top}).svgContainer(C).xScale(e),D.select(".nv-interactive").call(s)),a.width(K).height(G);var B=X.select(".nv-stackedWrap").datum(c);if(B.transition().call(a),g&&(i.scale(e)._ticks(nv.utils.calcTicksX(K/100,c)).tickSize(-G,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+G+")"),X.select(".nv-x.nv-axis").transition().duration(0).call(i)),m){var N;if(N="wiggle"===a.offset()?0:nv.utils.calcTicksY(G/36,c),r.scale(n)._ticks(N).tickSize(-K,0),"expand"===a.style()||"stack_percent"===a.style()){var q=r.tickFormat();_&&q===I||(_=q),r.tickFormat(I)}else _&&(r.tickFormat(_),_=null);X.select(".nv-y.nv-axis").transition().duration(0).call(r)}a.dispatch.on("areaClick.toggle",function(e){1===c.filter(function(t){return!t.disabled}).length?c.forEach(function(t){t.disabled=!1}):c.forEach(function(t,n){t.disabled=n!=e.seriesIndex}),S.disabled=c.map(function(t){return!!t.disabled}),F.stateChange(S),t.update()}),o.dispatch.on("stateChange",function(e){for(var n in e)S[n]=e[n];F.stateChange(S),t.update()}),l.dispatch.on("legendClick",function(e){e.disabled&&(j=j.map(function(t){return t.disabled=!0,t}),e.disabled=!1,a.style(e.style),S.style=a.style(),F.stateChange(S),t.update())}),s.dispatch.on("elementMousemove",function(e){a.clearHighlights();var n,r,o,l=[],d=0;if(c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i,s){r=nv.interactiveBisect(i.values,e.pointXValue,t.x());var c=i.values[r],u=t.y()(c,r);if(null!=u&&a.highlightPoint(s,r,!0),"undefined"!=typeof c){"undefined"==typeof n&&(n=c),"undefined"==typeof o&&(o=t.xScale()(t.x()(c,r)));var f="expand"==a.style()?c.display.y:t.y()(c,r);l.push({key:i.key,value:f,color:p(i,i.seriesIndex),stackedValue:c.display}),x&&"expand"!=a.style()&&(d+=f)}}),l.reverse(),l.length>2){var u=t.yScale().invert(e.mouseY),f=null;l.forEach(function(t,e){u=Math.abs(u);var n=Math.abs(t.stackedValue.y0),a=Math.abs(t.stackedValue.y);return u>=n&&a+n>=u?void(f=e):void 0}),null!=f&&(l[f].highlight=!0)}x&&"expand"!=a.style()&&l.length>=2&&l.push({key:b,value:d,total:!0});var v=i.tickFormat()(t.x()(n,r)),h=s.tooltip.valueFormatter();"expand"===a.style()||"stack_percent"===a.style()?(L||(L=h),h=d3.format(".1%")):L&&(h=L,L=null),s.tooltip.chartContainer(O.parentNode).valueFormatter(h).data({value:v,series:l})(),s.renderGuideLine(o)}),s.dispatch.on("elementMouseout",function(){a.clearHighlights()}),F.on("changeState",function(e){"undefined"!=typeof e.disabled&&c.length===e.disabled.length&&(c.forEach(function(t,n){t.disabled=e.disabled[n]}),S.disabled=e.disabled),"undefined"!=typeof e.style&&(a.style(e.style),T=e.style),t.update()})}),O.renderEnd("stacked Area chart immediate"),t}var e,n,a=nv.models.stackedArea(),i=nv.models.axis(),r=nv.models.axis(),o=nv.models.legend(),l=nv.models.legend(),s=nv.interactiveGuideline(),c=nv.models.tooltip(),d={top:30,right:25,bottom:50,left:60},u=null,f=null,p=nv.utils.defaultColor(),v=!0,h=!0,g=!0,m=!0,y=!1,k=!1,x=!0,b="TOTAL",S=nv.utils.state(),A=null,C=null,F=d3.dispatch("stateChange","changeState","renderEnd"),w=250,E=["Stacked","Stream","Expanded"],W={},M=250;S.style=a.style(),i.orient("bottom").tickPadding(7),r.orient(y?"right":"left"),c.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return r.tickFormat()(t,e)}),s.tooltip.headerFormatter(function(t,e){return i.tickFormat()(t,e)}).valueFormatter(function(t,e){return r.tickFormat()(t,e)});var _=null,L=null;l.updateState(!1);var O=nv.utils.renderWatch(F),T=a.style(),V=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:a.style()}}},H=function(t){return function(e){void 0!==e.style&&(T=e.style),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},I=d3.format("%");return a.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=a.x()(t.point),t.point.y=a.y()(t.point),c.data(t).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)}),t.dispatch=F,t.stacked=a,t.legend=o,t.controls=l,t.xAxis=i,t.yAxis=r,t.interactiveLayer=s,t.tooltip=c,t.dispatch=F,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return W},set:function(t){W=t}},controlOptions:{get:function(){return E},set:function(t){E=t}},showTotalInTooltip:{get:function(){return x},set:function(t){x=t}},totalLabel:{get:function(){return b},set:function(t){b=t}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return M},set:function(t){M=t,O.reset(M),a.duration(M),i.duration(M),r.duration(M)}},color:{get:function(){return p},set:function(t){p=nv.utils.getColor(t),o.color(p),a.color(p)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,r.orient(y?"right":"left")}},useInteractiveGuideline:{get:function(){return k},set:function(e){k=!!e,t.interactive(!e),t.useVoronoi(!e),a.scatter.interactive(!e)}}}),nv.utils.inheritOptions(t,a),nv.utils.initOptions(t),t};