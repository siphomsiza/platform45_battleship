nv.models.stackedArea=function(){"use strict";function p(e){return W.reset(),W.models(A),e.each(function(e){var t=y-g.left-g.right,n=m-g.top-g.bottom;I=d3.select(this),nv.utils.initSVG(I),v=A.xScale(),h=A.yScale();var i=e;e.forEach(function(e,n){e.seriesIndex=n,e.values=e.values.map(function(e,t){return e.index=t,e.seriesIndex=n,e})});var r=e.filter(function(e){return!e.disabled});e=d3.layout.stack().order(C).offset(w).values(function(e){return e.values}).x(M).y(b).out(function(e,t,n){e.display={y:n,y0:t}})(r);var o=I.selectAll("g.nv-wrap.nv-stackedarea").data([e]),s=o.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),a=s.append("defs"),u=s.append("g"),c=o.select("g");u.append("g").attr("class","nv-areaWrap"),u.append("g").attr("class","nv-scatterWrap"),o.attr("transform","translate("+g.left+","+g.top+")"),0==A.forceY().length&&A.forceY().push(0),A.width(t).height(n).x(M).y(function(e){if(e.display!==undefined)return e.display.y+e.display.y0}).forceY([0]).color(e.map(function(e){return e.color||k(e,e.seriesIndex)})),c.select(".nv-scatterWrap").datum(e).call(A),a.append("clipPath").attr("id","nv-edge-clip-"+x).append("rect"),o.select("#nv-edge-clip-"+x+" rect").attr("width",t).attr("height",n),c.attr("clip-path",_?"url(#nv-edge-clip-"+x+")":"");var d=d3.svg.area().x(function(e,t){return v(M(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y+e.display.y0)}).interpolate(Y),l=d3.svg.area().x(function(e,t){return v(M(e,t))}).y0(function(e){return h(e.display.y0)}).y1(function(e){return h(e.display.y0)}),f=c.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});f.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).attr("d",function(e){return l(e.values,e.seriesIndex)}).on("mouseover",function(e){d3.select(this).classed("hover",!0),O.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("mouseout",function(e){d3.select(this).classed("hover",!1),O.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("click",function(e){d3.select(this).classed("hover",!1),O.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}),f.exit().remove(),f.style("fill",function(e){return e.color||k(e,e.seriesIndex)}).style("stroke",function(e){return e.color||k(e,e.seriesIndex)}),f.watchTransition(W,"stackedArea path").attr("d",function(e,t){return d(e.values,t)}),A.dispatch.on("elementMouseover.area",function(e){c.select(".nv-chart-"+x+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),A.dispatch.on("elementMouseout.area",function(e){c.select(".nv-chart-"+x+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),p.d3_stackedOffset_stackPercent=function(e){var t,n,r,o=e.length,s=e[0].length,a=[];for(n=0;n<s;++n){for(r=t=0;t<i.length;t++)r+=b(i[t].values[n]);if(r)for(t=0;t<o;t++)e[t][n][1]/=r;else for(t=0;t<o;t++)e[t][n][1]=0}for(n=0;n<s;++n)a[n]=0;return a}}),W.renderEnd("stackedArea immediate"),p}var v,h,g={top:0,right:0,bottom:0,left:0},y=960,m=500,k=nv.utils.defaultColor(),x=Math.floor(1e5*Math.random()),I=null,M=function(e){return e.x},b=function(e){return e.y},t="stack",w="zero",C="default",Y="linear",_=!1,A=nv.models.scatter(),n=250,O=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");A.pointSize(2.2).pointDomain([2.2,2.2]);var W=nv.utils.renderWatch(O,n);return p.dispatch=O,(p.scatter=A).dispatch.on("elementClick",function(){O.elementClick.apply(this,arguments)}),A.dispatch.on("elementMouseover",function(){O.elementMouseover.apply(this,arguments)}),A.dispatch.on("elementMouseout",function(){O.elementMouseout.apply(this,arguments)}),p.interpolate=function(e){return arguments.length?(Y=e,p):Y},p.duration=function(e){return arguments.length?(n=e,W.reset(n),A.duration(n),p):n},p.dispatch=O,p.scatter=A,p.options=nv.utils.optionsFunc.bind(p),p._options=Object.create({},{width:{get:function(){return y},set:function(e){y=e}},height:{get:function(){return m},set:function(e){m=e}},clipEdge:{get:function(){return _},set:function(e){_=e}},offset:{get:function(){return w},set:function(e){w=e}},order:{get:function(){return C},set:function(e){C=e}},interpolate:{get:function(){return Y},set:function(e){Y=e}},x:{get:function(){return M},set:function(e){M=d3.functor(e)}},y:{get:function(){return b},set:function(e){b=d3.functor(e)}},margin:{get:function(){return g},set:function(e){g.top=e.top!==undefined?e.top:g.top,g.right=e.right!==undefined?e.right:g.right,g.bottom=e.bottom!==undefined?e.bottom:g.bottom,g.left=e.left!==undefined?e.left:g.left}},color:{get:function(){return k},set:function(e){k=nv.utils.getColor(e)}},style:{get:function(){return t},set:function(e){switch(t=e){case"stack":p.offset("zero"),p.order("default");break;case"stream":p.offset("wiggle"),p.order("inside-out");break;case"stream-center":p.offset("silhouette"),p.order("inside-out");break;case"expand":p.offset("expand"),p.order("default");break;case"stack_percent":p.offset(p.d3_stackedOffset_stackPercent),p.order("default")}}},duration:{get:function(){return n},set:function(e){n=e,W.reset(n),A.duration(n)}}}),nv.utils.inheritOptions(p,A),nv.utils.initOptions(p),p};