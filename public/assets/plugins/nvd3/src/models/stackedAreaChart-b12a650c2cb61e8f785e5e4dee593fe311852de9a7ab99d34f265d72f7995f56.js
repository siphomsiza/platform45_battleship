nv.models.stackedAreaChart=function(){"use strict";function h(t){return a.reset(),a.models(g),W&&a.models(m),M&&a.models(y),t.each(function(a){var t=d3.select(this),n=this;nv.utils.initSVG(t);var e,i=nv.utils.availableWidth(A,t,S),r=nv.utils.availableHeight(C,t,S);if(h.update=function(){t.transition().duration(D).call(h)},h.container=this,T.setter(j(a),h.update).getter(z(a)).update(),T.disabled=a.map(function(t){return!!t.disabled}),!V)for(e in V={},T)T[e]instanceof Array?V[e]=T[e].slice(0):V[e]=T[e];if(!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return nv.utils.noData(h,t),h;t.selectAll(".nv-noData").remove(),p=g.xScale(),v=g.yScale();var l=t.selectAll("g.nv-wrap.nv-stackedAreaChart").data([a]),s=l.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),o=l.select("g");if(s.append("rect").style("opacity",0),s.append("g").attr("class","nv-x nv-axis"),s.append("g").attr("class","nv-y nv-axis"),s.append("g").attr("class","nv-stackedWrap"),s.append("g").attr("class","nv-legendWrap"),s.append("g").attr("class","nv-controlsWrap"),s.append("g").attr("class","nv-interactive"),o.select("rect").attr("width",i).attr("height",r),E){var c=w?i-K:i;k.width(c),o.select(".nv-legendWrap").datum(a).call(k),S.top!=k.height()&&(S.top=k.height(),r=nv.utils.availableHeight(C,t,S)),o.select(".nv-legendWrap").attr("transform","translate("+(i-c)+","+-S.top+")")}if(w){var d=[{key:Y.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=g.style(),style:"stack"},{key:Y.stream||"Stream",metaKey:"Stream",disabled:"stream"!=g.style(),style:"stream"},{key:Y.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=g.style(),style:"expand"},{key:Y.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=g.style(),style:"stack_percent"}];K=G.length/3*260,d=d.filter(function(t){return-1!==G.indexOf(t.metaKey)}),x.width(K).color(["#444","#444","#444"]),o.select(".nv-controlsWrap").datum(d).call(x),S.top!=Math.max(x.height(),k.height())&&(S.top=Math.max(x.height(),k.height()),r=nv.utils.availableHeight(C,t,S)),o.select(".nv-controlsWrap").attr("transform","translate(0,"+-S.top+")")}if(l.attr("transform","translate("+S.left+","+S.top+")"),_&&o.select(".nv-y.nv-axis").attr("transform","translate("+i+",0)"),I&&(b.width(i).height(r).margin({left:S.left,top:S.top}).svgContainer(t).xScale(p),l.select(".nv-interactive").call(b)),g.width(i).height(r),o.select(".nv-stackedWrap").datum(a).transition().call(g),W&&(m.scale(p)._ticks(nv.utils.calcTicksX(i/100,a)).tickSize(-r,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+r+")"),o.select(".nv-x.nv-axis").transition().duration(0).call(m)),M){var u;if(u="wiggle"===g.offset()?0:nv.utils.calcTicksY(r/36,a),y.scale(v)._ticks(u).tickSize(-i,0),"expand"===g.style()||"stack_percent"===g.style()){var f=y.tickFormat();P&&f===B||(P=f),y.tickFormat(B)}else P&&(y.tickFormat(P),P=null);o.select(".nv-y.nv-axis").transition().duration(0).call(y)}g.dispatch.on("areaClick.toggle",function(n){1===a.filter(function(t){return!t.disabled}).length?a.forEach(function(t){t.disabled=!1}):a.forEach(function(t,e){t.disabled=e!=n.seriesIndex}),T.disabled=a.map(function(t){return!!t.disabled}),H.stateChange(T),h.update()}),k.dispatch.on("stateChange",function(t){for(var e in t)T[e]=t[e];H.stateChange(T),h.update()}),x.dispatch.on("legendClick",function(t){t.disabled&&(d=d.map(function(t){return t.disabled=!0,t}),t.disabled=!1,g.style(t.style),T.style=g.style(),H.stateChange(T),h.update())}),b.dispatch.on("elementMousemove",function(i){g.clearHighlights();var r,l,s,o=[],c=0;if(a.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(t,e){l=nv.interactiveBisect(t.values,i.pointXValue,h.x());var n=t.values[l];if(null!=h.y()(n,l)&&g.highlightPoint(e,l,!0),void 0!==n){void 0===r&&(r=n),void 0===s&&(s=h.xScale()(h.x()(n,l)));var a="expand"==g.style()?n.display.y:h.y()(n,l);o.push({key:t.key,value:a,color:F(t,t.seriesIndex),stackedValue:n.display}),L&&"expand"!=g.style()&&(c+=a)}}),o.reverse(),2<o.length){var d=h.yScale().invert(i.mouseY),u=(Infinity,null);o.forEach(function(t,e){d=Math.abs(d);var n=Math.abs(t.stackedValue.y0),a=Math.abs(t.stackedValue.y);n<=d&&d<=a+n&&(u=e)}),null!=u&&(o[u].highlight=!0)}L&&"expand"!=g.style()&&2<=o.length&&o.push({key:O,value:c,total:!0});var t=m.tickFormat()(h.x()(r,l)),e=b.tooltip.valueFormatter();"expand"===g.style()||"stack_percent"===g.style()?(X||(X=e),e=d3.format(".1%")):X&&(e=X,X=null),b.tooltip.chartContainer(n.parentNode).valueFormatter(e).data({value:t,series:o})(),b.renderGuideLine(s)}),b.dispatch.on("elementMouseout",function(){g.clearHighlights()}),H.on("changeState",function(n){"undefined"!=typeof n.disabled&&a.length===n.disabled.length&&(a.forEach(function(t,e){t.disabled=n.disabled[e]}),T.disabled=n.disabled),"undefined"!=typeof n.style&&(g.style(n.style),n.style),h.update()})}),a.renderEnd("stacked Area chart immediate"),h}var p,v,g=nv.models.stackedArea(),m=nv.models.axis(),y=nv.models.axis(),k=nv.models.legend(),x=nv.models.legend(),b=nv.interactiveGuideline(),e=nv.models.tooltip(),S={top:30,right:25,bottom:50,left:60},A=null,C=null,F=nv.utils.defaultColor(),w=!0,E=!0,W=!0,M=!0,_=!1,I=!1,L=!0,O="TOTAL",T=nv.utils.state(),V=null,n=null,H=d3.dispatch("stateChange","changeState","renderEnd"),K=250,G=["Stacked","Stream","Expanded"],Y={},D=250;T.style=g.style(),m.orient("bottom").tickPadding(7),y.orient(_?"right":"left"),e.headerFormatter(function(t,e){return m.tickFormat()(t,e)}).valueFormatter(function(t,e){return y.tickFormat()(t,e)}),b.tooltip.headerFormatter(function(t,e){return m.tickFormat()(t,e)}).valueFormatter(function(t,e){return y.tickFormat()(t,e)});var P=null,X=null;x.updateState(!1);var a=nv.utils.renderWatch(H),z=(g.style(),function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:g.style()}}}),j=function(t){return function(n){n.style!==undefined&&n.style,n.active!==undefined&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},B=d3.format("%");return g.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=g.x()(t.point),t.point.y=g.y()(t.point),e.data(t).hidden(!1)}),g.dispatch.on("elementMouseout.tooltip",function(){e.hidden(!0)}),h.dispatch=H,h.stacked=g,h.legend=k,h.controls=x,h.xAxis=m,h.yAxis=y,h.interactiveLayer=b,h.tooltip=e,h.dispatch=H,h.options=nv.utils.optionsFunc.bind(h),h._options=Object.create({},{width:{get:function(){return A},set:function(t){A=t}},height:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return E},set:function(t){E=t}},showXAxis:{get:function(){return W},set:function(t){W=t}},showYAxis:{get:function(){return M},set:function(t){M=t}},defaultState:{get:function(){return V},set:function(t){V=t}},noData:{get:function(){return n},set:function(t){n=t}},showControls:{get:function(){return w},set:function(t){w=t}},controlLabels:{get:function(){return Y},set:function(t){Y=t}},controlOptions:{get:function(){return G},set:function(t){G=t}},showTotalInTooltip:{get:function(){return L},set:function(t){L=t}},totalLabel:{get:function(){return O},set:function(t){O=t}},margin:{get:function(){return S},set:function(t){S.top=t.top!==undefined?t.top:S.top,S.right=t.right!==undefined?t.right:S.right,S.bottom=t.bottom!==undefined?t.bottom:S.bottom,S.left=t.left!==undefined?t.left:S.left}},duration:{get:function(){return D},set:function(t){D=t,a.reset(D),g.duration(D),m.duration(D),y.duration(D)}},color:{get:function(){return F},set:function(t){F=nv.utils.getColor(t),k.color(F),g.color(F)}},rightAlignYAxis:{get:function(){return _},set:function(t){_=t,y.orient(_?"right":"left")}},useInteractiveGuideline:{get:function(){return I},set:function(t){I=!!t,h.interactive(!t),h.useVoronoi(!t),g.scatter.interactive(!t)}}}),nv.utils.inheritOptions(h,g),nv.utils.initOptions(h),h};