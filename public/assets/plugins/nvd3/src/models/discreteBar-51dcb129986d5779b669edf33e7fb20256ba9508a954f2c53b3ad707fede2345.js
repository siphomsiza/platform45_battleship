nv.models.discreteBar=function(){"use strict";function t(f){return w.reset(),f.each(function(t){var f=u-s.left-s.right,k=l-s.top-s.bottom;e=d3.select(this),nv.utils.initSVG(e),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var M=n&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:v(t,e),y:p(t,e),y0:t.y0}})});d.domain(n||d3.merge(M).map(function(t){return t.x})).rangeBands(o||[0,f],.1),g.domain(r||d3.extent(d3.merge(M).map(function(t){return t.y}).concat(m))),y?g.range(i||[k-(g.domain()[0]<0?12:0),g.domain()[1]>0?12:0]):g.range(i||[k,0]),a=a||d,c=c||g.copy().range([g(0),g(0)]);var C=e.selectAll("g.nv-wrap.nv-discretebar").data([t]),T=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),A=T.append("g");C.select("g");A.append("g").attr("class","nv-groups"),C.attr("transform","translate("+s.left+","+s.top+")");var D=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(w,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),D.watchTransition(w,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var E=D.selectAll("g.nv-bar").data(function(t){return t.values});E.exit().remove();var S=E.enter().append("g").attr("transform",function(t,e){return"translate("+(d(v(t,e))+.05*d.rangeBand())+", "+g(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;b.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});S.append("rect").attr("height",0).attr("width",.9*d.rangeBand()/t.length),y?(S.append("text").attr("text-anchor","middle"),E.select("text").text(function(t,e){return x(p(t,e))}).watchTransition(w,"discreteBar: bars text").attr("x",.9*d.rangeBand()/2).attr("y",function(t,e){return p(t,e)<0?g(p(t,e))-g(0)+12:-4})):E.selectAll("text").remove(),E.attr("class",function(t,e){return p(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||h(t,e)}).style("stroke",function(t,e){return t.color||h(t,e)}).select("rect").attr("class",B).watchTransition(w,"discreteBar: bars rect").attr("width",.9*d.rangeBand()/t.length),E.watchTransition(w,"discreteBar: bars").attr("transform",function(t,e){var n=d(v(t,e))+.05*d.rangeBand(),r=p(t,e)<0?g(0):g(0)-g(p(t,e))<1?g(0)-1:g(p(t,e));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(g(p(t,e))-g(0)),1)}),a=d.copy(),c=g.copy()}),w.renderEnd("discreteBar immediate"),t}var e,n,r,o,i,a,c,s={top:0,right:0,bottom:0,left:0},u=960,l=500,f=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),g=d3.scale.linear(),v=function(t){return t.x},p=function(t){return t.y},m=[0],h=nv.utils.defaultColor(),y=!1,x=d3.format(",.2f"),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),B="discreteBar",k=250,w=nv.utils.renderWatch(b,k);return t.dispatch=b,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return l},set:function(t){l=t}},forceY:{get:function(){return m},set:function(t){m=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return g},set:function(t){g=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return i},set:function(t){i=t}},valueFormat:{get:function(){return x},set:function(t){x=t}},id:{get:function(){return f},set:function(t){f=t}},rectClass:{get:function(){return B},set:function(t){B=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return h},set:function(t){h=nv.utils.getColor(t)}},duration:{get:function(){return k},set:function(t){k=t,w.reset(k)}}}),nv.utils.initOptions(t),t};