nv.models.historicalBar=function(){"use strict";function n(t){return t.each(function(e){Z.reset(),p=d3.select(this);var i=nv.utils.availableWidth(v,p,h),t=nv.utils.availableHeight(m,p,h);nv.utils.initSVG(p),b.domain(u||d3.extent(e[0].values.map(y).concat(k))),N?b.range(d||[.5*i/e[0].values.length,i*(e[0].values.length-.5)/e[0].values.length]):b.range(d||[0,i]),x.domain(s||d3.extent(e[0].values.map(M).concat(C))).range(f||[t,0]),b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]+.01*x.domain()[0],x.domain()[1]-.01*x.domain()[1]]):x.domain([-1,1]));var n=p.selectAll("g.nv-wrap.nv-historicalBar-"+g).data([e[0].values]),o=n.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+g),a=o.append("defs"),r=o.append("g"),l=n.select("g");r.append("g").attr("class","nv-bars"),n.attr("transform","translate("+h.left+","+h.top+")"),p.on("click",function(t,n){B.chartClick({data:t,index:n,pos:d3.event,id:g})}),a.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect"),n.select("#nv-chart-clip-path-"+g+" rect").attr("width",i).attr("height",t),l.attr("clip-path",w?"url(#nv-chart-clip-path-"+g+")":"");var c=n.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,n){return y(t,n)});c.exit().remove(),c.enter().append("rect").attr("x",0).attr("y",function(t,n){return nv.utils.NaNtoZero(x(Math.max(0,M(t,n))))}).attr("height",function(t,n){return nv.utils.NaNtoZero(Math.abs(x(M(t,n))-x(0)))}).attr("transform",function(t,n){return"translate("+(b(y(t,n))-i/e[0].values.length*.45)+",0)"}).on("mouseover",function(t,n){P&&(d3.select(this).classed("hover",!0),B.elementMouseover({data:t,index:n,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,n){P&&(d3.select(this).classed("hover",!1),B.elementMouseout({data:t,index:n,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,n){P&&B.elementMousemove({data:t,index:n,color:d3.select(this).style("fill")})}).on("click",function(t,n){P&&(B.elementClick({data:t,index:n,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(t,n){P&&(B.elementDblClick({data:t,index:n,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),c.attr("fill",function(t,n){return D(t,n)}).attr("class",function(t,n,e){return(M(t,n)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+n}).watchTransition(Z,"bars").attr("transform",function(t,n){return"translate("+(b(y(t,n))-i/e[0].values.length*.45)+",0)"}).attr("width",i/e[0].values.length*.9),c.watchTransition(Z,"bars").attr("y",function(t,n){var e=M(t,n)<0?x(0):x(0)-x(M(t,n))<1?x(0)-1:x(M(t,n));return nv.utils.NaNtoZero(e)}).attr("height",function(t,n){return nv.utils.NaNtoZero(Math.max(Math.abs(x(M(t,n))-x(0)),1))})}),Z.renderEnd("historicalBar immediate"),n}var u,s,d,f,h={top:0,right:0,bottom:0,left:0},v=null,m=null,g=Math.floor(1e4*Math.random()),p=null,b=d3.scale.linear(),x=d3.scale.linear(),y=function(t){return t.x},M=function(t){return t.y},k=[],C=[0],N=!1,w=!0,D=nv.utils.defaultColor(),B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),P=!0,Z=nv.utils.renderWatch(B,0);return n.highlightPoint=function(t,n){p.select(".nv-bars .nv-bar-0-"+t).classed("hover",n)},n.clearHighlights=function(){p.select(".nv-bars .nv-bar.hover").classed("hover",!1)},n.dispatch=B,n.options=nv.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},forceX:{get:function(){return k},set:function(t){k=t}},forceY:{get:function(){return C},set:function(t){C=t}},padData:{get:function(){return N},set:function(t){N=t}},x:{get:function(){return y},set:function(t){y=t}},y:{get:function(){return M},set:function(t){M=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return x},set:function(t){x=t}},xDomain:{get:function(){return u},set:function(t){u=t}},yDomain:{get:function(){return s},set:function(t){s=t}},xRange:{get:function(){return d},set:function(t){d=t}},yRange:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return g},set:function(t){g=t}},interactive:{get:function(){return P},set:function(t){P=t}},margin:{get:function(){return h},set:function(t){h.top=t.top!==undefined?t.top:h.top,h.right=t.right!==undefined?t.right:h.right,h.bottom=t.bottom!==undefined?t.bottom:h.bottom,h.left=t.left!==undefined?t.left:h.left}},color:{get:function(){return D},set:function(t){D=nv.utils.getColor(t)}}}),nv.utils.initOptions(n),n};