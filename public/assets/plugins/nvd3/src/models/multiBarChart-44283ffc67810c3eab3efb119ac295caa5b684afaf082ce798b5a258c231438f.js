nv.models.multiBarChart=function(){"use strict";function t(l){return L.reset(),L.models(a),h&&L.models(i),m&&L.models(r),l.each(function(l){var S=d3.select(this);nv.utils.initSVG(S);var L=nv.utils.availableWidth(u,S,c),D=nv.utils.availableHeight(d,S,c);if(t.update=function(){0===F?S.call(t):S.transition().duration(F).call(t)},t.container=this,w.setter(T(l),t.update).getter(E(l)).update(),w.disabled=l.map(function(t){return!!t.disabled}),!C){var G;C={};for(G in w)w[G]instanceof Array?C[G]=w[G].slice(0):C[G]=w[G]}if(!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,S),t;S.selectAll(".nv-noData").remove(),e=a.xScale(),n=a.yScale();var O=S.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([l]),X=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),Y=O.select("g");if(X.append("g").attr("class","nv-x nv-axis"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-barsWrap"),X.append("g").attr("class","nv-legendWrap"),X.append("g").attr("class","nv-controlsWrap"),p&&(o.width(L-M()),Y.select(".nv-legendWrap").datum(l).call(o),c.top!=o.height()&&(c.top=o.height(),D=nv.utils.availableHeight(d,S,c)),Y.select(".nv-legendWrap").attr("transform","translate("+M()+","+-c.top+")")),v){var _=[{key:g.grouped||"Grouped",disabled:a.stacked()},{key:g.stacked||"Stacked",disabled:!a.stacked()}];s.width(M()).color(["#444","#444","#444"]),Y.select(".nv-controlsWrap").datum(_).attr("transform","translate(0,"+-c.top+")").call(s)}O.attr("transform","translate("+c.left+","+c.top+")"),k&&Y.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),a.disabled(l.map(function(t){return t.disabled})).width(L).height(D).color(l.map(function(t,e){return t.color||f(t,e)}).filter(function(t,e){return!l[e].disabled}));var z=Y.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled}));if(z.call(a),h){i.scale(e)._ticks(nv.utils.calcTicksX(L/100,l)).tickSize(-D,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),Y.select(".nv-x.nv-axis").call(i);var H=Y.select(".nv-x.nv-axis > g").selectAll("g");if(H.selectAll("line, text").style("opacity",1),b){var j=function(t,e){return"translate("+t+","+e+")"},P=5,V=17;H.selectAll("text").attr("transform",function(t,e,n){return j(0,n%2==0?P:V)});var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;Y.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return j(0,0===e||q%2!==0?V:P)})}y&&Y.selectAll(".tick text").call(nv.utils.wrapTicks,t.xAxis.rangeBand()),x&&H.filter(function(t,e){return e%Math.ceil(l[0].values.length/(L/100))!==0}).selectAll("text, line").style("opacity",0),A&&H.selectAll(".tick text").attr("transform","rotate("+A+" 0,0)").style("text-anchor",A>0?"start":"end"),Y.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(r.scale(n)._ticks(nv.utils.calcTicksY(D/36,l)).tickSize(-L,0),Y.select(".nv-y.nv-axis").call(r)),o.dispatch.on("stateChange",function(e){for(var n in e)w[n]=e[n];W.stateChange(w),t.update()}),s.dispatch.on("legendClick",function(e){if(e.disabled){switch(_=_.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":case g.grouped:a.stacked(!1);break;case"Stacked":case g.stacked:a.stacked(!0)}w.stacked=a.stacked(),W.stateChange(w),t.update()}}),W.on("changeState",function(e){"undefined"!=typeof e.disabled&&(l.forEach(function(t,n){t.disabled=e.disabled[n]}),w.disabled=e.disabled),"undefined"!=typeof e.stacked&&(a.stacked(e.stacked),w.stacked=e.stacked,B=e.stacked),t.update()})}),L.renderEnd("multibarchart immediate"),t}var e,n,a=nv.models.multiBar(),i=nv.models.axis(),r=nv.models.axis(),o=nv.models.legend(),s=nv.models.legend(),l=nv.models.tooltip(),c={top:30,right:20,bottom:50,left:60},u=null,d=null,f=nv.utils.defaultColor(),v=!0,g={},p=!0,h=!0,m=!0,k=!1,x=!0,b=!1,y=!1,A=0,w=nv.utils.state(),C=null,S=null,W=d3.dispatch("stateChange","changeState","renderEnd"),M=function(){return v?180:0},F=250;w.stacked=!1,a.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),r.orient(k?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter(function(t,e){return r.tickFormat()(t,e)}).headerFormatter(function(t,e){return i.tickFormat()(t,e)}),s.updateState(!1);var L=nv.utils.renderWatch(W),B=!1,E=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:B}}},T=function(t){return function(e){void 0!==e.stacked&&(B=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return a.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={key:e.data.key,value:t.y()(e.data),color:e.color},l.data(e).hidden(!1)}),a.dispatch.on("elementMouseout.tooltip",function(){l.hidden(!0)}),a.dispatch.on("elementMousemove.tooltip",function(){l()}),t.dispatch=W,t.multibar=a,t.legend=o,t.controls=s,t.xAxis=i,t.yAxis=r,t.state=w,t.tooltip=l,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return p},set:function(t){p=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return h},set:function(t){h=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return C},set:function(t){C=t}},noData:{get:function(){return S},set:function(t){S=t}},reduceXTicks:{get:function(){return x},set:function(t){x=t}},rotateLabels:{get:function(){return A},set:function(t){A=t}},staggerLabels:{get:function(){return b},set:function(t){b=t}},wrapLabels:{get:function(){return y},set:function(t){y=!!t}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return F},set:function(t){F=t,a.duration(F),i.duration(F),r.duration(F),L.reset(F)}},color:{get:function(){return f},set:function(t){f=nv.utils.getColor(t),o.color(f)}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,r.orient(k?"right":"left")}},barColor:{get:function(){return a.barColor},set:function(t){a.barColor(t),o.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),nv.utils.inheritOptions(t,a),nv.utils.initOptions(t),t};