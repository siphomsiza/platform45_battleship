nv.models.stackedArea=function(){"use strict";function e(d){return k.reset(),k.models(g),d.each(function(d){var y=o-r.left-r.right,x=a-r.top-r.bottom;c=d3.select(this),nv.utils.initSVG(c),t=g.xScale(),n=g.yScale();var I=d;d.forEach(function(e,t){e.seriesIndex=t,e.values=e.values.map(function(e,n){return e.index=n,e.seriesIndex=t,e})});var M=d.filter(function(e){return!e.disabled});d=d3.layout.stack().order(p).offset(f).values(function(e){return e.values}).x(u).y(l).out(function(e,t,n){e.display={y:n,y0:t}})(M);var b=c.selectAll("g.nv-wrap.nv-stackedarea").data([d]),w=b.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=w.append("defs"),Y=w.append("g"),_=b.select("g");Y.append("g").attr("class","nv-areaWrap"),Y.append("g").attr("class","nv-scatterWrap"),b.attr("transform","translate("+r.left+","+r.top+")"),0==g.forceY().length&&g.forceY().push(0),g.width(y).height(x).x(u).y(function(e){return void 0!==e.display?e.display.y+e.display.y0:void 0}).forceY([0]).color(d.map(function(e){return e.color||s(e,e.seriesIndex)}));var A=_.select(".nv-scatterWrap").datum(d);A.call(g),C.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),b.select("#nv-edge-clip-"+i+" rect").attr("width",y).attr("height",x),_.attr("clip-path",h?"url(#nv-edge-clip-"+i+")":"");var O=d3.svg.area().x(function(e,n){return t(u(e,n))}).y0(function(e){return n(e.display.y0)}).y1(function(e){return n(e.display.y+e.display.y0)}).interpolate(v),W=d3.svg.area().x(function(e,n){return t(u(e,n))}).y0(function(e){return n(e.display.y0)}).y1(function(e){return n(e.display.y0)}),E=_.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});E.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).attr("d",function(e){return W(e.values,e.seriesIndex)}).on("mouseover",function(e){d3.select(this).classed("hover",!0),m.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("mouseout",function(e){d3.select(this).classed("hover",!1),m.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("click",function(e){d3.select(this).classed("hover",!1),m.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}),E.exit().remove(),E.style("fill",function(e){return e.color||s(e,e.seriesIndex)}).style("stroke",function(e){return e.color||s(e,e.seriesIndex)}),E.watchTransition(k,"stackedArea path").attr("d",function(e,t){return O(e.values,t)}),g.dispatch.on("elementMouseover.area",function(e){_.select(".nv-chart-"+i+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),g.dispatch.on("elementMouseout.area",function(e){_.select(".nv-chart-"+i+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),e.d3_stackedOffset_stackPercent=function(e){var t,n,r,o=e.length,a=e[0].length,s=[];for(n=0;a>n;++n){for(t=0,r=0;t<I.length;t++)r+=l(I[t].values[n]);if(r)for(t=0;o>t;t++)e[t][n][1]/=r;else for(t=0;o>t;t++)e[t][n][1]=0}for(n=0;a>n;++n)s[n]=0;return s}}),k.renderEnd("stackedArea immediate"),e}var t,n,r={top:0,right:0,bottom:0,left:0},o=960,a=500,s=nv.utils.defaultColor(),i=Math.floor(1e5*Math.random()),c=null,u=function(e){return e.x},l=function(e){return e.y},d="stack",f="zero",p="default",v="linear",h=!1,g=nv.models.scatter(),y=250,m=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");g.pointSize(2.2).pointDomain([2.2,2.2]);var k=nv.utils.renderWatch(m,y);return e.dispatch=m,e.scatter=g,g.dispatch.on("elementClick",function(){m.elementClick.apply(this,arguments)}),g.dispatch.on("elementMouseover",function(){m.elementMouseover.apply(this,arguments)}),g.dispatch.on("elementMouseout",function(){m.elementMouseout.apply(this,arguments)}),e.interpolate=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(y=t,k.reset(y),g.duration(y),e):y},e.dispatch=m,e.scatter=g,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(e){o=e}},height:{get:function(){return a},set:function(e){a=e}},clipEdge:{get:function(){return h},set:function(e){h=e}},offset:{get:function(){return f},set:function(e){f=e}},order:{get:function(){return p},set:function(e){p=e}},interpolate:{get:function(){return v},set:function(e){v=e}},x:{get:function(){return u},set:function(e){u=d3.functor(e)}},y:{get:function(){return l},set:function(e){l=d3.functor(e)}},margin:{get:function(){return r},set:function(e){r.top=void 0!==e.top?e.top:r.top,r.right=void 0!==e.right?e.right:r.right,r.bottom=void 0!==e.bottom?e.bottom:r.bottom,r.left=void 0!==e.left?e.left:r.left}},color:{get:function(){return s},set:function(e){s=nv.utils.getColor(e)}},style:{get:function(){return d},set:function(t){switch(d=t){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}}},duration:{get:function(){return y},set:function(e){y=e,k.reset(y),g.duration(y)}}}),nv.utils.inheritOptions(e,g),nv.utils.initOptions(e),e};