nv.models.axis=function(){"use strict";function n(t){return Z.reset(),t.each(function(t){var n=d3.select(this);nv.utils.initSVG(n);var e=n.selectAll("g.nv-wrap.nv-axis").data([t]),a=(e.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),e.select("g"));null!==A?m.ticks(A):"top"!=m.orient()&&"bottom"!=m.orient()||m.ticks(Math.abs(v.range()[1]-v.range()[0])/100),a.watchTransition(Z,"axis").call(m),h=h||m.scale();var r=m.tickFormat();null==r&&(r=h.tickFormat());var i,s,o,c=a.selectAll("text.nv-axislabel").data([y||null]);switch(c.exit().remove(),m.orient()){case"top":c.enter().append("text").attr("class","nv-axislabel"),o=0,1===v.range().length?o=w?2*v.range()[0]+v.rangeBand():0:2===v.range().length?o=w?v.range()[0]+v.range()[1]+v.rangeBand():v.range()[1]:2<v.range().length&&(o=v.range()[v.range().length-1]+(v.range()[1]-v.range()[0])),c.attr("text-anchor","middle").attr("y",0).attr("x",o/2),b&&((s=e.selectAll("g.nv-axisMaxMin").data(v.domain())).enter().append("g").attr("class",function(t,n){return["nv-axisMaxMin","nv-axisMaxMin-x",0==n?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),s.exit().remove(),s.attr("transform",function(t){return"translate("+nv.utils.NaNtoZero(v(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-m.tickPadding()).attr("text-anchor","middle").text(function(t){var n=r(t);return(""+n).match("NaN")?"":n}),s.watchTransition(Z,"min-max top").attr("transform",function(t,n){return"translate("+nv.utils.NaNtoZero(v.range()[n])+",0)"}));break;case"bottom":i=P+36;var l=30,u=0,d=a.selectAll("g").select("text"),g="";if(N%360){d.each(function(){var t=this.getBoundingClientRect(),n=t.width;u=t.height,l<n&&(l=n)}),g="rotate("+N+" 0,"+(u/2+m.tickPadding())+")";var x=Math.abs(Math.sin(N*Math.PI/180));i=(x?x*l:l)+30,d.attr("transform",g).style("text-anchor",0<N%360?"start":"end")}c.enter().append("text").attr("class","nv-axislabel"),o=0,1===v.range().length?o=w?2*v.range()[0]+v.rangeBand():0:2===v.range().length?o=w?v.range()[0]+v.range()[1]+v.rangeBand():v.range()[1]:2<v.range().length&&(o=v.range()[v.range().length-1]+(v.range()[1]-v.range()[0])),c.attr("text-anchor","middle").attr("y",i).attr("x",o/2),b&&((s=e.selectAll("g.nv-axisMaxMin").data([v.domain()[0],v.domain()[v.domain().length-1]])).enter().append("g").attr("class",function(t,n){return["nv-axisMaxMin","nv-axisMaxMin-x",0==n?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),s.exit().remove(),s.attr("transform",function(t){return"translate("+nv.utils.NaNtoZero(v(t)+(w?v.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",m.tickPadding()).attr("transform",g).style("text-anchor",N?0<N%360?"start":"end":"middle").text(function(t){var n=r(t);return(""+n).match("NaN")?"":n}),s.watchTransition(Z,"min-max bottom").attr("transform",function(t){return"translate("+nv.utils.NaNtoZero(v(t)+(w?v.rangeBand()/2:0))+",0)"})),B&&d.attr("transform",function(t,n){return"translate(0,"+(n%2==0?"0":"12")+")"});break;case"right":c.enter().append("text").attr("class","nv-axislabel"),c.style("text-anchor",k?"middle":"begin").attr("transform",k?"rotate(90)":"").attr("y",k?12-Math.max(p.right,M):-10).attr("x",k?d3.max(v.range())/2:m.tickPadding()),b&&((s=e.selectAll("g.nv-axisMaxMin").data(v.domain())).enter().append("g").attr("class",function(t,n){return["nv-axisMaxMin","nv-axisMaxMin-y",0==n?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),s.exit().remove(),s.attr("transform",function(t){return"translate(0,"+nv.utils.NaNtoZero(v(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",m.tickPadding()).style("text-anchor","start").text(function(t){var n=r(t);return(""+n).match("NaN")?"":n}),s.watchTransition(Z,"min-max right").attr("transform",function(t,n){return"translate(0,"+nv.utils.NaNtoZero(v.range()[n])+")"}).select("text").style("opacity",1));break;case"left":c.enter().append("text").attr("class","nv-axislabel"),c.style("text-anchor",k?"middle":"end").attr("transform",k?"rotate(-90)":"").attr("y",k?25-Math.max(p.left,M)-(P||0):-10).attr("x",k?-d3.max(v.range())/2:-m.tickPadding()),b&&((s=e.selectAll("g.nv-axisMaxMin").data(v.domain())).enter().append("g").attr("class",function(t,n){return["nv-axisMaxMin","nv-axisMaxMin-y",0==n?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),s.exit().remove(),s.attr("transform",function(t){return"translate(0,"+nv.utils.NaNtoZero(h(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-m.tickPadding()).attr("text-anchor","end").text(function(t){var n=r(t);return(""+n).match("NaN")?"":n}),s.watchTransition(Z,"min-max right").attr("transform",function(t,n){return"translate(0,"+nv.utils.NaNtoZero(v.range()[n])+")"}).select("text").style("opacity",1))}if(c.text(function(t){return t}),!b||"left"!==m.orient()&&"right"!==m.orient()||(a.selectAll("g").each(function(t){d3.select(this).select("text").attr("opacity",1),(v(t)<v.range()[1]+10||v(t)>v.range()[0]-10)&&((1e-10<t||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),v.domain()[0]==v.domain()[1]&&0==v.domain()[0]&&e.selectAll("g.nv-axisMaxMin").style("opacity",function(t,n){return n?0:1})),b&&("top"===m.orient()||"bottom"===m.orient())){var f=[];e.selectAll("g.nv-axisMaxMin").each(function(t,n){try{n?f.push(v(t)-this.getBoundingClientRect().width-4):f.push(v(t)+this.getBoundingClientRect().width+4)}catch(e){n?f.push(v(t)-4):f.push(v(t)+4)}}),a.selectAll("g").each(function(t){(v(t)<f[0]||v(t)>f[1])&&(1e-10<t||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}a.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&t!==undefined}).classed("zero",!0),h=v.copy()}),Z.renderEnd("axis immediate"),n}var h,m=d3.svg.axis(),v=d3.scale.linear(),p={top:0,right:0,bottom:0,left:0},M=75,e=60,y=null,b=!0,N=0,k=!0,B=!1,w=!1,A=null,P=0,a=250,t=d3.dispatch("renderEnd");m.scale(v).orient("bottom").tickFormat(function(t){return t});var Z=nv.utils.renderWatch(t,a);return n.axis=m,n.dispatch=t,n.options=nv.utils.optionsFunc.bind(n),n._options=Object.create({},{axisLabelDistance:{get:function(){return P},set:function(t){P=t}},staggerLabels:{get:function(){return B},set:function(t){B=t}},rotateLabels:{get:function(){return N},set:function(t){N=t}},rotateYLabel:{get:function(){return k},set:function(t){k=t}},showMaxMin:{get:function(){return b},set:function(t){b=t}},axisLabel:{get:function(){return y},set:function(t){y=t}},height:{get:function(){return e},set:function(t){e=t}},ticks:{get:function(){return A},set:function(t){A=t}},width:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return p},set:function(t){p.top=t.top!==undefined?t.top:p.top,p.right=t.right!==undefined?t.right:p.right,p.bottom=t.bottom!==undefined?t.bottom:p.bottom,p.left=t.left!==undefined?t.left:p.left}},duration:{get:function(){return a},set:function(t){a=t,Z.reset(a)}},scale:{get:function(){return v},set:function(t){v=t,m.scale(v),w="function"==typeof v.rangeBands,nv.utils.inheritOptionsD3(n,v,["domain","range","rangeBand","rangeBands"])}}}),nv.utils.initOptions(n),nv.utils.inheritOptionsD3(n,m,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),nv.utils.inheritOptionsD3(n,v,["domain","range","rangeBand","rangeBands"]),n};