nv.models.linePlusBarChart=function(){"use strict";function W(t){return t.each(function(a){function t(t){var n=+("e"==t),e=n?1:-1,a=s/3;return"M"+.5*e+","+a+"A6,6 0 0 "+n+" "+6.5*e+","+(a+6)+"V"+(2*a-6)+"A6,6 0 0 "+n+" "+.5*e+","+2*a+"ZM"+2.5*e+","+(a+8)+"V"+(2*a-8)+"M"+4.5*e+","+(a+8)+"V"+(2*a-8)}function e(){G.empty()||G.extent(at),A.data([G.empty()?B.domain():at]).each(function(t){var n=B(t[0])-B.range()[0],e=B.range()[1]-B(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",B(t[1])).attr("width",e<0?0:e)})}function n(){at=G.empty()?null:G.extent(),M=G.empty()?B.domain():G.extent(),it.brush({extent:M,brush:G}),e(),P.width(o).height(l).color(a.map(function(t,n){return t.color||Q(t,n)}).filter(function(t,n){return!a[n].disabled&&a[n].bar})),H.width(o).height(l).color(a.map(function(t,n){return t.color||Q(t,n)}).filter(function(t,n){return!a[n].disabled&&!a[n].bar}));var t=g.select(".nv-focus .nv-barsWrap").datum(c.length?c.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return P.x()(t,n)>=M[0]&&P.x()(t,n)<=M[1]})}}):[{values:[]}]),n=g.select(".nv-focus .nv-linesWrap").datum(ft(u)?[{values:[]}]:u.filter(function(t){return!t.disabled}).map(function(t){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,n){return H.x()(t,n)>=M[0]&&H.x()(t,n)<=M[1]})}}));z=c.length?P.xScale():H.xScale(),T.scale(z)._ticks(nv.utils.calcTicksX(o/100,a)).tickSize(-l,0),T.domain([Math.ceil(M[0]),Math.floor(M[1])]),g.select(".nv-x.nv-axis").transition().duration(rt).call(T),t.transition().duration(rt).call(P),n.transition().duration(rt).call(H),g.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+F.range()[0]+")"),D.scale(F)._ticks(nv.utils.calcTicksY(l/36,a)).tickSize(-o,0),X.scale(_)._ticks(nv.utils.calcTicksY(l/36,a)).tickSize(c.length?0:-o,0),g.select(".nv-focus .nv-y1.nv-axis").style("opacity",c.length?1:0),g.select(".nv-focus .nv-y2.nv-axis").style("opacity",u.length&&!ft(u)?1:0).attr("transform","translate("+z.range()[1]+",0)"),g.select(".nv-focus .nv-y1.nv-axis").transition().duration(rt).call(D),g.select(".nv-focus .nv-y2.nv-axis").transition().duration(rt).call(X)}var i=d3.select(this);nv.utils.initSVG(i);var r,o=nv.utils.availableWidth(q,i,R),l=nv.utils.availableHeight(I,i,R)-($?et:0),s=et-Z.top-Z.bottom;if(W.update=function(){i.transition().duration(rt).call(W)},W.container=this,ot.setter(dt(a),W.update).getter(ut(a)).update(),ot.disabled=a.map(function(t){return!!t.disabled}),!lt)for(r in lt={},ot)ot[r]instanceof Array?lt[r]=ot[r].slice(0):lt[r]=ot[r];if(!(a&&a.length&&a.filter(function(t){return t.values.length}).length))return nv.utils.noData(W,i),W;i.selectAll(".nv-noData").remove();var c=a.filter(function(t){return!t.disabled&&t.bar}),u=a.filter(function(t){return!t.bar});z=P.xScale(),B=V.scale(),F=P.yScale(),_=H.yScale(),C=K.yScale(),E=O.yScale();var d=a.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,n){return{x:J(t,n),y:N(t,n)}})}),f=a.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,n){return{x:J(t,n),y:N(t,n)}})});z.range([0,o]),B.domain(d3.extent(d3.merge(d.concat(f)),function(t){return t.x})).range([0,o]);var v=i.selectAll("g.nv-wrap.nv-linePlusBar").data([a]),p=v.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),g=v.select("g");p.append("g").attr("class","nv-legendWrap");var h=p.append("g").attr("class","nv-focus");h.append("g").attr("class","nv-x nv-axis"),h.append("g").attr("class","nv-y1 nv-axis"),h.append("g").attr("class","nv-y2 nv-axis"),h.append("g").attr("class","nv-barsWrap"),h.append("g").attr("class","nv-linesWrap");var x=p.append("g").attr("class","nv-context");if(x.append("g").attr("class","nv-x nv-axis"),x.append("g").attr("class","nv-y1 nv-axis"),x.append("g").attr("class","nv-y2 nv-axis"),x.append("g").attr("class","nv-barsWrap"),x.append("g").attr("class","nv-linesWrap"),x.append("g").attr("class","nv-brushBackground"),x.append("g").attr("class","nv-x nv-brush"),U){var m=j.align()?o/2:o,b=j.align()?m:0;j.width(m),g.select(".nv-legendWrap").datum(a.map(function(t){return t.originalKey=t.originalKey===undefined?t.key:t.originalKey,t.key=t.originalKey+(t.bar?st:ct),t})).call(j),R.top!=j.height()&&(R.top=j.height(),l=nv.utils.availableHeight(I,i,R)-et),g.select(".nv-legendWrap").attr("transform","translate("+b+","+-R.top+")")}v.attr("transform","translate("+R.left+","+R.top+")"),g.select(".nv-context").style("display",$?"initial":"none"),K.width(o).height(s).color(a.map(function(t,n){return t.color||Q(t,n)}).filter(function(t,n){return!a[n].disabled&&a[n].bar})),O.width(o).height(s).color(a.map(function(t,n){return t.color||Q(t,n)}).filter(function(t,n){return!a[n].disabled&&!a[n].bar}));var y=g.select(".nv-context .nv-barsWrap").datum(c.length?c:[{values:[]}]),k=g.select(".nv-context .nv-linesWrap").datum(ft(u)?[{values:[]}]:u.filter(function(t){return!t.disabled}));g.select(".nv-context").attr("transform","translate(0,"+(l+R.bottom+Z.top)+")"),y.transition().call(K),k.transition().call(O),nt&&(V._ticks(nv.utils.calcTicksX(o/100,a)).tickSize(-s,0),g.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")"),g.select(".nv-context .nv-x.nv-axis").transition().call(V)),tt&&(Y.scale(C)._ticks(s/36).tickSize(-o,0),L.scale(E)._ticks(s/36).tickSize(c.length?0:-o,0),g.select(".nv-context .nv-y3.nv-axis").style("opacity",c.length?1:0).attr("transform","translate(0,"+B.range()[0]+")"),g.select(".nv-context .nv-y2.nv-axis").style("opacity",u.length?1:0).attr("transform","translate("+B.range()[1]+",0)"),g.select(".nv-context .nv-y1.nv-axis").transition().call(Y),g.select(".nv-context .nv-y2.nv-axis").transition().call(L)),G.x(B).on("brush",n),at&&G.extent(at);var A=g.select(".nv-brushBackground").selectAll("g").data([at||G.extent()]),S=A.enter().append("g");S.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",s),S.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",s);var w=g.select(".nv-x.nv-brush").call(G);w.selectAll("rect").attr("height",s),w.selectAll(".resize").append("path").attr("d",t),j.dispatch.on("stateChange",function(t){for(var n in t)ot[n]=t[n];it.stateChange(ot),W.update()}),it.on("changeState",function(e){"undefined"!=typeof e.disabled&&(a.forEach(function(t,n){t.disabled=e.disabled[n]}),ot.disabled=e.disabled),W.update()}),n()}),W}var M,z,B,F,_,C,E,H=nv.models.line(),O=nv.models.line(),P=nv.models.historicalBar(),K=nv.models.historicalBar(),T=nv.models.axis(),V=nv.models.axis(),D=nv.models.axis(),X=nv.models.axis(),Y=nv.models.axis(),L=nv.models.axis(),j=nv.models.legend(),G=d3.svg.brush(),n=nv.models.tooltip(),R={top:30,right:30,bottom:30,left:60},Z={top:0,right:30,bottom:20,left:60},q=null,I=null,J=function(t){return t.x},N=function(t){return t.y},Q=nv.utils.defaultColor(),U=!0,$=!0,tt=!1,nt=!0,et=50,at=null,e=null,it=d3.dispatch("brush","stateChange","changeState"),rt=0,ot=nv.utils.state(),lt=null,st=" (left axis)",ct=" (right axis)";H.clipEdge(!0),O.interactive(!1),O.pointActive(function(){return!1}),T.orient("bottom").tickPadding(5),D.orient("left"),X.orient("right"),V.orient("bottom").tickPadding(5),Y.orient("left"),L.orient("right"),n.headerEnabled(!0).headerFormatter(function(t,n){return T.tickFormat()(t,n)});var ut=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},dt=function(t){return function(e){e.active!==undefined&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},ft=function(t){return t.every(function(t){return t.disabled})};return H.dispatch.on("elementMouseover.tooltip",function(t){n.duration(100).valueFormatter(function(t,n){return X.tickFormat()(t,n)}).data(t).hidden(!1)}),H.dispatch.on("elementMouseout.tooltip",function(){n.hidden(!0)}),P.dispatch.on("elementMouseover.tooltip",function(t){t.value=W.x()(t.data),t.series={value:W.y()(t.data),color:t.color},n.duration(0).valueFormatter(function(t,n){return D.tickFormat()(t,n)}).data(t).hidden(!1)}),P.dispatch.on("elementMouseout.tooltip",function(){n.hidden(!0)}),P.dispatch.on("elementMousemove.tooltip",function(){n()}),W.dispatch=it,W.legend=j,W.lines=H,W.lines2=O,W.bars=P,W.bars2=K,W.xAxis=T,W.x2Axis=V,W.y1Axis=D,W.y2Axis=X,W.y3Axis=Y,W.y4Axis=L,W.tooltip=n,W.options=nv.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return q},set:function(t){q=t}},height:{get:function(){return I},set:function(t){I=t}},showLegend:{get:function(){return U},set:function(t){U=t}},brushExtent:{get:function(){return at},set:function(t){at=t}},noData:{get:function(){return e},set:function(t){e=t}},focusEnable:{get:function(){return $},set:function(t){$=t}},focusHeight:{get:function(){return et},set:function(t){et=t}},focusShowAxisX:{get:function(){return nt},set:function(t){nt=t}},focusShowAxisY:{get:function(){return tt},set:function(t){tt=t}},legendLeftAxisHint:{get:function(){return st},set:function(t){st=t}},legendRightAxisHint:{get:function(){return ct},set:function(t){ct=t}},margin:{get:function(){return R},set:function(t){R.top=t.top!==undefined?t.top:R.top,R.right=t.right!==undefined?t.right:R.right,R.bottom=t.bottom!==undefined?t.bottom:R.bottom,R.left=t.left!==undefined?t.left:R.left}},focusMargin:{get:function(){return Z},set:function(t){Z.top=t.top!==undefined?t.top:Z.top,Z.right=t.right!==undefined?t.right:Z.right,Z.bottom=t.bottom!==undefined?t.bottom:Z.bottom,Z.left=t.left!==undefined?t.left:Z.left}},duration:{get:function(){return rt},set:function(t){rt=t}},color:{get:function(){return Q},set:function(t){Q=nv.utils.getColor(t),j.color(Q)}},x:{get:function(){return J},set:function(t){J=t,H.x(t),O.x(t),P.x(t),K.x(t)}},y:{get:function(){return N},set:function(t){N=t,H.y(t),O.y(t),P.y(t),K.y(t)}}}),nv.utils.inheritOptions(W,H),nv.utils.initOptions(W),W};