nv.models.scatter=function(){"use strict";function t(j){return W.reset(),j.each(function(t){function j(){if(H=!1,!k)return!1;if(_===!0){var n=d3.merge(t.map(function(t,n){return t.values.map(function(t,e){var o=v(t,e),i=g(t,e);return[f(o)+1e-4*Math.random(),p(i)+1e-4*Math.random(),n,e,t]}).filter(function(t,n){return w(t[4],n)})}));if(0==n.length)return!1;n.length<3&&(n.push([f.range()[0]-20,p.range()[0]-20,null,null]),n.push([f.range()[1]+20,p.range()[1]+20,null,null]),n.push([f.range()[0]-20,p.range()[0]+20,null,null]),n.push([f.range()[1]+20,p.range()[1]-20,null,null]));var e=d3.geom.polygon([[-10,-10],[-10,s+10],[u+10,s+10],[u+10,-10]]),o=d3.geom.voronoi(n).map(function(t,o){return{data:e.clip(t),series:n[o][2],point:n[o][3]}});G.select(".nv-point-paths").selectAll("path").remove();var i=G.select(".nv-point-paths").selectAll("path").data(o),d=i.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,n){return"nv-path-"+n}).attr("clip-path",function(t,n){return"url(#nv-clip-"+c+"-"+n+")"});if(C&&d.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),P){G.select(".nv-point-clips").selectAll("*").remove();var m=G.select(".nv-point-clips").selectAll("clipPath").data(n);m.enter().append("svg:clipPath").attr("id",function(t,n){return"nv-clip-"+c+"-"+n}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",D)}var h=function(n,e){if(H)return 0;var o=t[n.series];if(void 0!==o){var i=o.values[n.point];i.color=l(o,n.series),i.x=v(i),i.y=g(i);var u=a.node().getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft,d={left:f(v(i,n.point))+u.left+c+r.left+10,top:p(g(i,n.point))+u.top+s+r.top+10};e({point:i,series:o,pos:d,relativePos:[f(v(i,n.point))+r.left,p(g(i,n.point))+r.top],seriesIndex:n.series,pointIndex:n.point})}};i.on("click",function(t){h(t,V.elementClick)}).on("dblclick",function(t){h(t,V.elementDblClick)}).on("mouseover",function(t){h(t,V.elementMouseover)}).on("mouseout",function(t){h(t,V.elementMouseout)})}else G.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,e){if(H||!t[n.series])return 0;var o=t[n.series],i=o.values[e];V.elementClick({point:i,series:o,pos:[f(v(i,e))+r.left,p(g(i,e))+r.top],relativePos:[f(v(i,e))+r.left,p(g(i,e))+r.top],seriesIndex:n.series,pointIndex:e})}).on("dblclick",function(n,e){if(H||!t[n.series])return 0;var o=t[n.series],i=o.values[e];V.elementDblClick({point:i,series:o,pos:[f(v(i,e))+r.left,p(g(i,e))+r.top],relativePos:[f(v(i,e))+r.left,p(g(i,e))+r.top],seriesIndex:n.series,pointIndex:e})}).on("mouseover",function(n,e){if(H||!t[n.series])return 0;var o=t[n.series],i=o.values[e];V.elementMouseover({point:i,series:o,pos:[f(v(i,e))+r.left,p(g(i,e))+r.top],relativePos:[f(v(i,e))+r.left,p(g(i,e))+r.top],seriesIndex:n.series,pointIndex:e,color:l(n,e)})}).on("mouseout",function(n,e){if(H||!t[n.series])return 0;var o=t[n.series],i=o.values[e];V.elementMouseout({point:i,series:o,pos:[f(v(i,e))+r.left,p(g(i,e))+r.top],relativePos:[f(v(i,e))+r.left,p(g(i,e))+r.top],seriesIndex:n.series,pointIndex:e,color:l(n,e)})})}a=d3.select(this);var Y=nv.utils.availableWidth(u,a,r),B=nv.utils.availableHeight(s,a,r);nv.utils.initSVG(a),t.forEach(function(t,n){t.values.forEach(function(t){t.series=n})});var F=E&&z&&O?[]:d3.merge(t.map(function(t){return t.values.map(function(t,n){return{x:v(t,n),y:g(t,n),size:m(t,n)}})}));f.domain(E||d3.extent(F.map(function(t){return t.x}).concat(y))),A&&t[0]?f.range(S||[(Y*I+Y)/(2*t[0].values.length),Y-Y*(1+I)/(2*t[0].values.length)]):f.range(S||[0,Y]),p.domain(z||d3.extent(F.map(function(t){return t.y}).concat(x))).range(T||[B,0]),d.domain(O||d3.extent(F.map(function(t){return t.size}).concat(b))).range(R||X),N=f.domain()[0]===f.domain()[1]||p.domain()[0]===p.domain()[1],f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1])),isNaN(f.domain()[0])&&f.domain([-1,1]),isNaN(p.domain()[0])&&p.domain([-1,1]),n=n||f,e=e||p,o=o||d;var G=a.selectAll("g.nv-wrap.nv-scatter").data([t]),L=G.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c),Z=L.append("defs"),q=L.append("g"),J=G.select("g");G.classed("nv-single-point",N),q.append("g").attr("class","nv-groups"),q.append("g").attr("class","nv-point-paths"),L.append("g").attr("class","nv-point-clips"),G.attr("transform","translate("+r.left+","+r.top+")"),Z.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),G.select("#nv-edge-clip-"+c+" rect").attr("width",Y).attr("height",B>0?B:0),J.attr("clip-path",M?"url(#nv-edge-clip-"+c+")":""),H=!0;var K=G.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().remove(),K.attr("class",function(t,n){return"nv-group nv-series-"+n}).classed("hover",function(t){return t.hover}),K.watchTransition(W,"scatter: groups").style("fill",function(t,n){return l(t,n)}).style("stroke",function(t,n){return l(t,n)}).style("stroke-opacity",1).style("fill-opacity",.5);var Q=K.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,n){return[t,n]}).filter(function(t,n){return w(t[0],n)})});Q.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t){return"translate("+n(v(t[0],t[1]))+","+e(g(t[0],t[1]))+")"}).attr("d",nv.utils.symbol().type(function(t){return h(t[0])}).size(function(t){return d(m(t[0],t[1]))})),Q.exit().remove(),K.exit().selectAll("path.nv-point").watchTransition(W,"scatter exit").attr("transform",function(t){return"translate("+f(v(t[0],t[1]))+","+p(g(t[0],t[1]))+")"}).remove(),Q.each(function(t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t[1],!0).classed("nv-noninteractive",!k).classed("hover",!1)}),Q.watchTransition(W,"scatter points").attr("transform",function(t){return"translate("+f(v(t[0],t[1]))+","+p(g(t[0],t[1]))+")"}).attr("d",nv.utils.symbol().type(function(t){return h(t[0])}).size(function(t){return d(m(t[0],t[1]))})),clearTimeout(i),i=setTimeout(j,300),n=f.copy(),e=p.copy(),o=d.copy()}),W.renderEnd("scatter immediate"),t}var n,e,o,i,r={top:0,right:0,bottom:0,left:0},u=null,s=null,l=nv.utils.defaultColor(),c=Math.floor(1e5*Math.random()),a=null,f=d3.scale.linear(),p=d3.scale.linear(),d=d3.scale.linear(),v=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.size||1},h=function(t){return t.shape||"circle"},y=[],x=[],b=[],k=!0,w=function(t){return!t.notActive},A=!1,I=.1,M=!1,P=!0,C=!1,D=function(){return 25},E=null,z=null,S=null,T=null,O=null,R=null,N=!1,V=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),_=!0,j=250,H=!1,W=nv.utils.renderWatch(V,j),X=[16,256];return t.dispatch=V,t.options=nv.utils.optionsFunc.bind(t),t._calls=new function(){this.clearHighlights=function(){return nv.dom.write(function(){a.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,n,e){nv.dom.write(function(){a.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+n).classed("hover",e)})}},V.on("elementMouseover.point",function(n){k&&t._calls.highlightPoint(n.seriesIndex,n.pointIndex,!0)}),V.on("elementMouseout.point",function(n){k&&t._calls.highlightPoint(n.seriesIndex,n.pointIndex,!1)}),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return p},set:function(t){p=t}},pointScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return E},set:function(t){E=t}},yDomain:{get:function(){return z},set:function(t){z=t}},pointDomain:{get:function(){return O},set:function(t){O=t}},xRange:{get:function(){return S},set:function(t){S=t}},yRange:{get:function(){return T},set:function(t){T=t}},pointRange:{get:function(){return R},set:function(t){R=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return x},set:function(t){x=t}},forcePoint:{get:function(){return b},set:function(t){b=t}},interactive:{get:function(){return k},set:function(t){k=t}},pointActive:{get:function(){return w},set:function(t){w=t}},padDataOuter:{get:function(){return I},set:function(t){I=t}},padData:{get:function(){return A},set:function(t){A=t}},clipEdge:{get:function(){return M},set:function(t){M=t}},clipVoronoi:{get:function(){return P},set:function(t){P=t}},clipRadius:{get:function(){return D},set:function(t){D=t}},showVoronoi:{get:function(){return C},set:function(t){C=t}},id:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return v},set:function(t){v=d3.functor(t)}},y:{get:function(){return g},set:function(t){g=d3.functor(t)}},pointSize:{get:function(){return m},set:function(t){m=d3.functor(t)}},pointShape:{get:function(){return h},set:function(t){h=d3.functor(t)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},duration:{get:function(){return j},set:function(t){j=t,W.reset(j)}},color:{get:function(){return l},set:function(t){l=nv.utils.getColor(t)}},useVoronoi:{get:function(){return _},set:function(t){_=t,_===!1&&(P=!1)}}}),nv.utils.initOptions(t),t};