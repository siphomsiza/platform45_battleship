nv.models.linePlusBarChart=function(){"use strict";function t(y){return y.each(function(y){function O(t){var n=+("e"==t),e=n?1:-1,a=J/3;return"M"+.5*e+","+a+"A6,6 0 0 "+n+" "+6.5*e+","+(a+6)+"V"+(2*a-6)+"A6,6 0 0 "+n+" "+.5*e+","+2*a+"ZM"+2.5*e+","+(a+8)+"V"+(2*a-8)+"M"+4.5*e+","+(a+8)+"V"+(2*a-8)}function G(){b.empty()||b.extent(H),ut.data([b.empty()?a.domain():H]).each(function(t){var n=a(t[0])-a.range()[0],e=a.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",0>e?0:e)})}function R(){H=b.empty()?null:b.extent(),n=b.empty()?a.domain():b.extent(),P.brush({extent:n,brush:b}),G(),u.width(q).height(I).color(y.map(function(t,n){return t.color||z(t,n)}).filter(function(t,n){return!y[n].disabled&&y[n].bar})),s.width(q).height(I).color(y.map(function(t,n){return t.color||z(t,n)}).filter(function(t,n){return!y[n].disabled&&!y[n].bar}));var t=at.select(".nv-focus .nv-barsWrap").datum(Q.length?Q.map(function(t){return{key:t.key,values:t.values.filter(function(t,e){return u.x()(t,e)>=n[0]&&u.x()(t,e)<=n[1]})}}):[{values:[]}]),o=at.select(".nv-focus .nv-linesWrap").datum(j(U)?[{values:[]}]:U.filter(function(t){return!t.disabled}).map(function(t){return{area:t.area,fillOpacity:t.fillOpacity,key:t.key,values:t.values.filter(function(t,e){return s.x()(t,e)>=n[0]&&s.x()(t,e)<=n[1]})}}));e=Q.length?u.xScale():s.xScale(),v.scale(e)._ticks(nv.utils.calcTicksX(q/100,y)).tickSize(-I,0),v.domain([Math.ceil(n[0]),Math.floor(n[1])]),at.select(".nv-x.nv-axis").transition().duration(K).call(v),t.transition().duration(K).call(u),o.transition().duration(K).call(s),at.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),p.scale(i)._ticks(nv.utils.calcTicksY(I/36,y)).tickSize(-q,0),g.scale(r)._ticks(nv.utils.calcTicksY(I/36,y)).tickSize(Q.length?0:-q,0),at.select(".nv-focus .nv-y1.nv-axis").style("opacity",Q.length?1:0),at.select(".nv-focus .nv-y2.nv-axis").style("opacity",U.length&&!j(U)?1:0).attr("transform","translate("+e.range()[1]+",0)"),at.select(".nv-focus .nv-y1.nv-axis").transition().duration(K).call(p),at.select(".nv-focus .nv-y2.nv-axis").transition().duration(K).call(g)}var Z=d3.select(this);nv.utils.initSVG(Z);var q=nv.utils.availableWidth(S,Z,k),I=nv.utils.availableHeight(w,Z,k)-(F?E:0),J=E-A.top-A.bottom;if(t.update=function(){Z.transition().duration(K).call(t)},t.container=this,T.setter(L(y),t.update).getter(Y(y)).update(),T.disabled=y.map(function(t){return!!t.disabled}),!V){var N;V={};for(N in T)T[N]instanceof Array?V[N]=T[N].slice(0):V[N]=T[N]}if(!(y&&y.length&&y.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,Z),t;Z.selectAll(".nv-noData").remove();var Q=y.filter(function(t){return!t.disabled&&t.bar}),U=y.filter(function(t){return!t.bar});e=u.xScale(),a=f.scale(),i=u.yScale(),r=s.yScale(),o=d.yScale(),l=c.yScale();var $=y.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,n){return{x:W(t,n),y:M(t,n)}})}),tt=y.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,n){return{x:W(t,n),y:M(t,n)}})});e.range([0,q]),a.domain(d3.extent(d3.merge($.concat(tt)),function(t){return t.x})).range([0,q]);var nt=Z.selectAll("g.nv-wrap.nv-linePlusBar").data([y]),et=nt.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),at=nt.select("g");et.append("g").attr("class","nv-legendWrap");var it=et.append("g").attr("class","nv-focus");it.append("g").attr("class","nv-x nv-axis"),it.append("g").attr("class","nv-y1 nv-axis"),it.append("g").attr("class","nv-y2 nv-axis"),it.append("g").attr("class","nv-barsWrap"),it.append("g").attr("class","nv-linesWrap");var rt=et.append("g").attr("class","nv-context");if(rt.append("g").attr("class","nv-x nv-axis"),rt.append("g").attr("class","nv-y1 nv-axis"),rt.append("g").attr("class","nv-y2 nv-axis"),rt.append("g").attr("class","nv-barsWrap"),rt.append("g").attr("class","nv-linesWrap"),rt.append("g").attr("class","nv-brushBackground"),rt.append("g").attr("class","nv-x nv-brush"),B){var ot=m.align()?q/2:q,lt=m.align()?ot:0;m.width(ot),at.select(".nv-legendWrap").datum(y.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?D:X),t})).call(m),k.top!=m.height()&&(k.top=m.height(),I=nv.utils.availableHeight(w,Z,k)-E),at.select(".nv-legendWrap").attr("transform","translate("+lt+","+-k.top+")")}nt.attr("transform","translate("+k.left+","+k.top+")"),at.select(".nv-context").style("display",F?"initial":"none"),d.width(q).height(J).color(y.map(function(t,n){return t.color||z(t,n)}).filter(function(t,n){return!y[n].disabled&&y[n].bar})),c.width(q).height(J).color(y.map(function(t,n){return t.color||z(t,n)}).filter(function(t,n){return!y[n].disabled&&!y[n].bar}));var st=at.select(".nv-context .nv-barsWrap").datum(Q.length?Q:[{values:[]}]),ct=at.select(".nv-context .nv-linesWrap").datum(j(U)?[{values:[]}]:U.filter(function(t){return!t.disabled}));at.select(".nv-context").attr("transform","translate(0,"+(I+k.bottom+A.top)+")"),st.transition().call(d),ct.transition().call(c),C&&(f._ticks(nv.utils.calcTicksX(q/100,y)).tickSize(-J,0),at.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),at.select(".nv-context .nv-x.nv-axis").transition().call(f)),_&&(h.scale(o)._ticks(J/36).tickSize(-q,0),x.scale(l)._ticks(J/36).tickSize(Q.length?0:-q,0),at.select(".nv-context .nv-y3.nv-axis").style("opacity",Q.length?1:0).attr("transform","translate(0,"+a.range()[0]+")"),at.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),at.select(".nv-context .nv-y1.nv-axis").transition().call(h),at.select(".nv-context .nv-y2.nv-axis").transition().call(x)),b.x(a).on("brush",R),H&&b.extent(H);var ut=at.select(".nv-brushBackground").selectAll("g").data([H||b.extent()]),dt=ut.enter().append("g");dt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",J),dt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",J);var vt=at.select(".nv-x.nv-brush").call(b);vt.selectAll("rect").attr("height",J),vt.selectAll(".resize").append("path").attr("d",O),m.dispatch.on("stateChange",function(n){for(var e in n)T[e]=n[e];P.stateChange(T),t.update()}),P.on("changeState",function(n){"undefined"!=typeof n.disabled&&(y.forEach(function(t,e){t.disabled=n.disabled[e]}),T.disabled=n.disabled),t.update()}),R()}),t}var n,e,a,i,r,o,l,s=nv.models.line(),c=nv.models.line(),u=nv.models.historicalBar(),d=nv.models.historicalBar(),v=nv.models.axis(),f=nv.models.axis(),p=nv.models.axis(),g=nv.models.axis(),h=nv.models.axis(),x=nv.models.axis(),m=nv.models.legend(),b=d3.svg.brush(),y=nv.models.tooltip(),k={top:30,right:30,bottom:30,left:60},A={top:0,right:30,bottom:20,left:60},S=null,w=null,W=function(t){return t.x},M=function(t){return t.y},z=nv.utils.defaultColor(),B=!0,F=!0,_=!1,C=!0,E=50,H=null,O=null,P=d3.dispatch("brush","stateChange","changeState"),K=0,T=nv.utils.state(),V=null,D=" (left axis)",X=" (right axis)";s.clipEdge(!0),c.interactive(!1),c.pointActive(function(){return!1}),v.orient("bottom").tickPadding(5),p.orient("left"),g.orient("right"),f.orient("bottom").tickPadding(5),h.orient("left"),x.orient("right"),y.headerEnabled(!0).headerFormatter(function(t,n){return v.tickFormat()(t,n)});var Y=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},L=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}},j=function(t){return t.every(function(t){return t.disabled})};return s.dispatch.on("elementMouseover.tooltip",function(t){y.duration(100).valueFormatter(function(t,n){return g.tickFormat()(t,n)}).data(t).hidden(!1)}),s.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)}),u.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data),n.series={value:t.y()(n.data),color:n.color},y.duration(0).valueFormatter(function(t,n){return p.tickFormat()(t,n)}).data(n).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)}),u.dispatch.on("elementMousemove.tooltip",function(){y()}),t.dispatch=P,t.legend=m,t.lines=s,t.lines2=c,t.bars=u,t.bars2=d,t.xAxis=v,t.x2Axis=f,t.y1Axis=p,t.y2Axis=g,t.y3Axis=h,t.y4Axis=x,t.tooltip=y,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return S},set:function(t){S=t}},height:{get:function(){return w},set:function(t){w=t}},showLegend:{get:function(){return B},set:function(t){B=t}},brushExtent:{get:function(){return H},set:function(t){H=t}},noData:{get:function(){return O},set:function(t){O=t}},focusEnable:{get:function(){return F},set:function(t){F=t}},focusHeight:{get:function(){return E},set:function(t){E=t}},focusShowAxisX:{get:function(){return C},set:function(t){C=t}},focusShowAxisY:{get:function(){return _},set:function(t){_=t}},legendLeftAxisHint:{get:function(){return D},set:function(t){D=t}},legendRightAxisHint:{get:function(){return X},set:function(t){X=t}},margin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},focusMargin:{get:function(){return A},set:function(t){A.top=void 0!==t.top?t.top:A.top,A.right=void 0!==t.right?t.right:A.right,A.bottom=void 0!==t.bottom?t.bottom:A.bottom,A.left=void 0!==t.left?t.left:A.left}},duration:{get:function(){return K},set:function(t){K=t}},color:{get:function(){return z},set:function(t){z=nv.utils.getColor(t),m.color(z)}},x:{get:function(){return W},set:function(t){W=t,s.x(t),c.x(t),u.x(t),d.x(t)}},y:{get:function(){return M},set:function(t){M=t,s.y(t),c.y(t),u.y(t),d.y(t)}}}),nv.utils.inheritOptions(t,s),nv.utils.initOptions(t),t};