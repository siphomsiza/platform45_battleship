nv.models.lineWithFocusChart=function(){"use strict";function t(f){return f.each(function(f){function A(t){var n=+("e"==t),e=n?1:-1,i=B/3;return"M"+.5*e+","+i+"A6,6 0 0 "+n+" "+6.5*e+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+n+" "+.5*e+","+2*i+"ZM"+2.5*e+","+(i+8)+"V"+(2*i-8)+"M"+4.5*e+","+(i+8)+"V"+(2*i-8)}function z(){v.empty()||v.extent(S),j.data([v.empty()?i.domain():S]).each(function(t){var e=i(t[0])-n.range()[0],a=G-i(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",0>a?0:a)})}function E(){S=v.empty()?null:v.extent();var t=v.empty()?i.domain():v.extent();if(!(Math.abs(t[0]-t[1])<=1)){W.brush({extent:t,brush:v}),z();var n=P.select(".nv-focus .nv-linesWrap").datum(f.filter(function(t){return!t.disabled}).map(function(n){return{key:n.key,area:n.area,classed:n.classed,values:n.values.filter(function(n,e){return r.x()(n,e)>=t[0]&&r.x()(n,e)<=t[1]})}}));n.transition().duration(w).call(r),P.select(".nv-focus .nv-x.nv-axis").transition().duration(w).call(l),P.select(".nv-focus .nv-y.nv-axis").transition().duration(w).call(s)}}var H=d3.select(this),_=this;nv.utils.initSVG(H);var G=nv.utils.availableWidth(x,H,h),I=nv.utils.availableHeight(b,H,h)-k,B=k-g.top-g.bottom;if(t.update=function(){H.transition().duration(w).call(t)},t.container=this,C.setter(T(f),t.update).getter(V(f)).update(),C.disabled=f.map(function(t){return!!t.disabled}),!M){var D;M={};for(D in C)C[D]instanceof Array?M[D]=C[D].slice(0):M[D]=C[D]}if(!(f&&f.length&&f.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,H),t;H.selectAll(".nv-noData").remove(),n=r.xScale(),e=r.yScale(),i=o.xScale(),a=o.yScale();var L=H.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([f]),O=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),P=L.select("g");O.append("g").attr("class","nv-legendWrap");var X=O.append("g").attr("class","nv-focus");X.append("g").attr("class","nv-x nv-axis"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-linesWrap"),X.append("g").attr("class","nv-interactive");var Y=O.append("g").attr("class","nv-context");Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-linesWrap"),Y.append("g").attr("class","nv-brushBackground"),Y.append("g").attr("class","nv-x nv-brush"),F&&(d.width(G),P.select(".nv-legendWrap").datum(f).call(d),h.top!=d.height()&&(h.top=d.height(),I=nv.utils.availableHeight(b,H,h)-k),P.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")")),L.attr("transform","translate("+h.left+","+h.top+")"),y&&(p.width(G).height(I).margin({left:h.left,top:h.top}).svgContainer(H).xScale(n),L.select(".nv-interactive").call(p)),r.width(G).height(I).color(f.map(function(t,n){return t.color||m(t,n)}).filter(function(t,n){return!f[n].disabled})),o.defined(r.defined()).width(G).height(B).color(f.map(function(t,n){return t.color||m(t,n)}).filter(function(t,n){return!f[n].disabled})),P.select(".nv-context").attr("transform","translate(0,"+(I+h.bottom+g.top)+")");var N=P.select(".nv-context .nv-linesWrap").datum(f.filter(function(t){return!t.disabled}));d3.transition(N).call(o),l.scale(n)._ticks(nv.utils.calcTicksX(G/100,f)).tickSize(-I,0),s.scale(e)._ticks(nv.utils.calcTicksY(I/36,f)).tickSize(-G,0),P.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+I+")"),v.x(i).on("brush",function(){E()}),S&&v.extent(S);var j=P.select(".nv-brushBackground").selectAll("g").data([S||v.extent()]),Z=j.enter().append("g");Z.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",B),Z.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",B);var q=P.select(".nv-x.nv-brush").call(v);q.selectAll("rect").attr("height",B),q.selectAll(".resize").append("path").attr("d",A),E(),c.scale(i)._ticks(nv.utils.calcTicksX(G/100,f)).tickSize(-B,0),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(P.select(".nv-context .nv-x.nv-axis")).call(c),u.scale(a)._ticks(nv.utils.calcTicksY(B/36,f)).tickSize(-G,0),d3.transition(P.select(".nv-context .nv-y.nv-axis")).call(u),P.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d.dispatch.on("stateChange",function(n){for(var e in n)C[e]=n[e];W.stateChange(C),t.update()}),p.dispatch.on("elementMousemove",function(n){r.clearHighlights();var e,a,o,c=[];if(f.filter(function(t,n){return t.seriesIndex=n,!t.disabled}).forEach(function(l,s){var u=v.empty()?i.domain():v.extent(),d=l.values.filter(function(t,n){return r.x()(t,n)>=u[0]&&r.x()(t,n)<=u[1]});a=nv.interactiveBisect(d,n.pointXValue,r.x());var f=d[a],p=t.y()(f,a);null!=p&&r.highlightPoint(s,a,!0),void 0!==f&&(void 0===e&&(e=f),void 0===o&&(o=t.xScale()(t.x()(f,a))),c.push({key:l.key,value:t.y()(f,a),color:m(l,l.seriesIndex)}))}),c.length>2){var u=t.yScale().invert(n.mouseY),d=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),h=.03*d,g=nv.nearestValueIndex(c.map(function(t){return t.value}),u,h);null!==g&&(c[g].highlight=!0)}var x=l.tickFormat()(t.x()(e,a));p.tooltip.chartContainer(_.parentNode).valueFormatter(function(t){return null==t?"N/A":s.tickFormat()(t)}).data({value:x,index:a,series:c})(),p.renderGuideLine(o)}),p.dispatch.on("elementMouseout",function(){r.clearHighlights()}),W.on("changeState",function(n){"undefined"!=typeof n.disabled&&f.forEach(function(t,e){t.disabled=n.disabled[e]}),t.update()})}),t}var n,e,i,a,r=nv.models.line(),o=nv.models.line(),l=nv.models.axis(),s=nv.models.axis(),c=nv.models.axis(),u=nv.models.axis(),d=nv.models.legend(),v=d3.svg.brush(),f=nv.models.tooltip(),p=nv.interactiveGuideline(),h={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},m=nv.utils.defaultColor(),x=null,b=null,k=50,y=!1,F=!0,S=null,A=null,W=d3.dispatch("brush","stateChange","changeState"),w=250,C=nv.utils.state(),M=null;r.clipEdge(!0).duration(0),o.interactive(!1),o.pointActive(function(){return!1}),l.orient("bottom").tickPadding(5),s.orient("left"),c.orient("bottom").tickPadding(5),u.orient("left"),f.valueFormatter(function(t,n){return s.tickFormat()(t,n)}).headerFormatter(function(t,n){return l.tickFormat()(t,n)});var V=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},T=function(t){return function(n){void 0!==n.active&&t.forEach(function(t,e){t.disabled=!n.active[e]})}};return r.dispatch.on("elementMouseover.tooltip",function(t){f.data(t).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(){f.hidden(!0)}),t.dispatch=W,t.legend=d,t.lines=r,t.lines2=o,t.xAxis=l,t.yAxis=s,t.x2Axis=c,t.y2Axis=u,t.interactiveLayer=p,t.tooltip=f,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return x},set:function(t){x=t}},height:{get:function(){return b},set:function(t){b=t}},focusHeight:{get:function(){return k},set:function(t){k=t}},showLegend:{get:function(){return F},set:function(t){F=t}},brushExtent:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return A},set:function(t){A=t}},margin:{get:function(){return h},set:function(t){h.top=void 0!==t.top?t.top:h.top,h.right=void 0!==t.right?t.right:h.right,h.bottom=void 0!==t.bottom?t.bottom:h.bottom,h.left=void 0!==t.left?t.left:h.left}},focusMargin:{get:function(){return g},set:function(t){g.top=void 0!==t.top?t.top:g.top,g.right=void 0!==t.right?t.right:g.right,g.bottom=void 0!==t.bottom?t.bottom:g.bottom,g.left=void 0!==t.left?t.left:g.left}},color:{get:function(){return m},set:function(t){m=nv.utils.getColor(t),d.color(m)}},interpolate:{get:function(){return r.interpolate()},set:function(t){r.interpolate(t),o.interpolate(t)}},xTickFormat:{get:function(){return l.tickFormat()},set:function(t){l.tickFormat(t),c.tickFormat(t)}},yTickFormat:{get:function(){return s.tickFormat()},set:function(t){s.tickFormat(t),u.tickFormat(t)}},duration:{get:function(){return w},set:function(t){w=t,s.duration(w),u.duration(w),l.duration(w),c.duration(w)}},x:{get:function(){return r.x()},set:function(t){r.x(t),o.x(t)}},y:{get:function(){return r.y()},set:function(t){r.y(t),o.y(t)}},useInteractiveGuideline:{get:function(){return y},set:function(t){y=t,y&&(r.interactive(!1),r.useVoronoi(!1))}}}),nv.utils.inheritOptions(t,r),nv.utils.initOptions(t),t};