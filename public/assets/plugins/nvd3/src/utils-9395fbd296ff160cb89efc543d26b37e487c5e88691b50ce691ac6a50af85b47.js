nv.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight):document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),t},nv.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):nv.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},nv.utils.getColor=function(t){if(t===undefined)return nv.utils.defaultColor();if(Array.isArray(t)){var i=d3.scale.ordinal().range(t);return function(t,n){var e=n===undefined?t:n;return t.color||i(e)}}return t},nv.utils.defaultColor=function(){return nv.utils.getColor(d3.scale.category20().range())},nv.utils.customTheme=function(e,i,r){i=i||function(t){return t.key};var o=(r=r||d3.scale.category20().range()).length;return function(t){var n=i(t);return"function"==typeof e[n]?e[n]():e[n]!==undefined?e[n]:(o||(o=r.length),r[o-=1])}},nv.utils.pjax=function(e,i){var t=function(t){d3.html(t,function(t){var n=d3.select(i).node();n.parentNode.replaceChild(d3.select(t).select(i).node(),n),nv.utils.pjax(e,i)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),t(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&t(d3.event.state)})},nv.utils.calcApproxTextWidth=function(t){if("function"!=typeof t.style||"function"!=typeof t.text)return 0;var n=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*n*.5},nv.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===Infinity||t===-Infinity?0:t},d3.selection.prototype.watchTransition=function(t){var n=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,n)},nv.utils.renderWatch=function(t,n){if(!(this instanceof nv.utils.renderWatch))return new nv.utils.renderWatch(t,n);var r=n!==undefined?n:250,o=[],u=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach(function(t){var n;t.__rendered=!1,(n=t).dispatch.on("renderEnd",function(){n.__rendered=!0,u.renderEnd("model")}),o.indexOf(t)<0&&o.push(t)}),this},this.reset=function(t){t!==undefined&&(r=t),o=[]},this.transition=function(t,n,e){if(e=1<(n=1<arguments.length?[].slice.call(arguments,1):[]).length?n.pop():r!==undefined?r:250,t.__rendered=!1,o.indexOf(t)<0&&o.push(t),0===e)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every(function(t){return!t.length})?t.__rendered=!0:t.__rendered=!1;var i=0;return t.transition().duration(e).each(function(){++i}).each("end",function(){0==--i&&(t.__rendered=!0,u.renderEnd.apply(this,n))})},this.renderEnd=function(){o.every(function(t){return t.__rendered})&&(o.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},nv.utils.deepExtend=function(o){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(t){for(var n in t){var e=o[n]instanceof Array,i="object"==typeof o[n],r="object"==typeof t[n];i&&!e&&r?nv.utils.deepExtend(o[n],t[n]):o[n]=t[n]}})},nv.utils.state=function(){if(!(this instanceof nv.utils.state))return new nv.utils.state;var e={},n=function(){},i=function(){return{}},r=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return i=t,this},this.setter=function(e,i){return i||(i=function(){}),n=function(t,n){e(t),n&&i()},this},this.init=function(t){r=r||{},nv.utils.deepExtend(r,t)};var t=function(){var t=i();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)e[n]===undefined&&(e[n]={}),e[n]=t[n],!0;return!0};this.update=function(){r&&(n(r,!1),r=null),t.call(this)&&this.dispatch.change(e)}},nv.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,n){"function"==typeof this[t]&&this[t](n)}.bind(this)),this},nv.utils.calcTicksX=function(t,n){for(var e=1,i=0;i<n.length;i+=1){var r=n[i]&&n[i].values?n[i].values.length:0;e=e<r?r:e}return nv.log("Requested number of ticks: ",t),nv.log("Calculated max values to be: ",e),t=(t=e<t?t=e-1:t)<1?1:t,t=Math.floor(t),nv.log("Calculating tick count as: ",t),t},nv.utils.calcTicksY=function(t,n){return nv.utils.calcTicksX(t,n)},nv.utils.initOption=function(n,e){n._calls&&n._calls[e]?n[e]=n._calls[e]:(n[e]=function(t){return arguments.length?(n._overrides[e]=!0,n._options[e]=t,n):n._options[e]},n["_"+e]=function(t){return arguments.length?(n._overrides[e]||(n._options[e]=t),n):n._options[e]})},nv.utils.initOptions=function(t){t._overrides=t._overrides||{};var n=Object.getOwnPropertyNames(t._options||{}),e=Object.getOwnPropertyNames(t._calls||{});for(var i in n=n.concat(e))nv.utils.initOption(t,n[i])},nv.utils.inheritOptionsD3=function(t,n,e){t._d3options=e.concat(t._d3options||[]),e.unshift(n),e.unshift(t),d3.rebind.apply(this,e)},nv.utils.arrayUnique=function(e){return e.sort().filter(function(t,n){return!n||t!=e[n-1]})},nv.utils.symbolMap=d3.map(),nv.utils.symbol=function(){function n(t,n){var e=r.call(this,t,n),i=o.call(this,t,n);return-1!==d3.svg.symbolTypes.indexOf(e)?d3.svg.symbol().type(e).size(i)():nv.utils.symbolMap.get(e)(i)}var r,o=64;return n.type=function(t){return arguments.length?(r=d3.functor(t),n):r},n.size=function(t){return arguments.length?(o=d3.functor(t),n):o},n},nv.utils.inheritOptions=function(t,n){var e=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),r=n._inherited||[],o=n._d3options||[],u=e.concat(i).concat(r).concat(o);u.unshift(n),u.unshift(t),d3.rebind.apply(this,u),t._inherited=nv.utils.arrayUnique(e.concat(i).concat(r).concat(e).concat(t._inherited||[])),t._d3options=nv.utils.arrayUnique(o.concat(t._d3options||[]))},nv.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},nv.utils.sanitizeHeight=function(t,n){return t||parseInt(n.style("height"),10)||400},nv.utils.sanitizeWidth=function(t,n){return t||parseInt(n.style("width"),10)||960},nv.utils.availableHeight=function(t,n,e){return nv.utils.sanitizeHeight(t,n)-e.top-e.bottom},nv.utils.availableWidth=function(t,n,e){return nv.utils.sanitizeWidth(t,n)-e.left-e.right},nv.utils.noData=function(t,n){var e=t.options(),i=e.margin(),r=e.noData(),o=null==r?["No Data Available."]:[r],u=nv.utils.availableHeight(null,n,i),s=nv.utils.availableWidth(null,n,i),a=i.left+s/2,c=i.top+u/2;n.selectAll("g").remove();var l=n.selectAll(".nv-noData").data(o);l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",a).attr("y",c).text(function(t){return t})},nv.utils.wrapTicks=function(t,c){t.each(function(){for(var t,n=d3.select(this),e=n.text().split(/\s+/).reverse(),i=[],r=0,o=1.1,u=n.attr("y"),s=parseFloat(n.attr("dy")),a=n.text(null).append("tspan").attr("x",0).attr("y",u).attr("dy",s+"em");t=e.pop();)i.push(t),a.text(i.join(" ")),a.node().getComputedTextLength()>c&&(i.pop(),a.text(i.join(" ")),i=[t],a=n.append("tspan").attr("x",0).attr("y",u).attr("dy",++r*o+s+"em").text(t))})},nv.utils.arrayEquals=function(t,n){if(t===n)return!0;if(!t||!n)return!1;if(t.length!=n.length)return!1;for(var e=0,i=t.length;e<i;e++)if(t[e]instanceof Array&&n[e]instanceof Array){if(!nv.arrayEquals(t[e],n[e]))return!1}else if(t[e]!=n[e])return!1;return!0};