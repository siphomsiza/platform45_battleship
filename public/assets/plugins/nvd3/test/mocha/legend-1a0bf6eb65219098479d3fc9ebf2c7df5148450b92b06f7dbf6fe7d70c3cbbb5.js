(function(){describe("NVD3",function(){return describe("Legend",function(){var r,d,s,n;return s=[{values:[{x:1,y:2},{x:3,y:4},{x:5,y:6}],key:"key 1"},{values:[{x:7,y:8},{x:9,y:10},{x:11,y:12}],key:"key 2"},{values:[{x:13,y:14},{x:15,y:16},{x:17,y:18}],key:"key 3"}],n=[{key:"series 1"},{key:"series 2"},{key:"series 3"},{key:"series 4"}],d={margin:{top:0,right:0,bottom:0,left:0},width:100,height:100,key:function(e){return e.key},color:nv.utils.defaultColor(),align:!0,rightAlign:!1,updateState:!0,radioButtonMode:!1},r=null,beforeEach(function(){var e,n,l,t;for(n in(r=new ChartBuilder(nv.models.legend())).build(d,s),e=r.model,l=[],d)t=d[n],l.push(e[n](t));return l}),afterEach(function(){return r.teardown()}),it("api check",function(){var e,n,l;for(n in e=r.model,l=[],d)d[n],l.push(should.exist(e[n](),n+" can be called"));return l}),it("exists",function(){var e;return e=r.$(".nvd3.nv-legend"),should.exist(e[0],".nvd3.nv-legend")}),describe("appends items correctly",function(){var e,n,l,t,d;for(d=[],e=l=0,t=s.length;l<t;e=++l)n=s[e],d.push(function(e,d){var u;return u=n.key,it("'"+u+"' text, position and structure",function(){var e,n,l,t;return l=r.$(".nvd3.nv-legend .nv-series")[d],t="translate(0,"+(20*d+5)+")",l.getAttribute("transform").should.be.equal(t),e=l.querySelector(".nv-legend-symbol"),n=l.querySelector(".nv-legend-text"),should.exist(e),should.exist(n),n.textContent.should.be.equal(u)})}(0,e));return d}),describe("clicking and double clicking",function(){return it("clicking one legend turns it off",function(){var e,n;return(n=r.$(".nv-legend .nv-series")).length.should.equal(3),(e=d3.select(n[0]).on("click"))(s[0]),s[0].disabled.should.equal(!0),e(s[1]),s[1].disabled.should.equal(!0),e(s[2]),s[0].disabled.should.equal(!1),s[1].disabled.should.equal(!1),s[2].disabled.should.equal(!1)}),it("double clicking legend keeps only one on",function(){var e;return e=r.$(".nv-legend .nv-series"),d3.select(e[0]).on("dblclick")(s[0]),s[0].disabled.should.equal(!1),s[1].disabled.should.equal(!0),s[2].disabled.should.equal(!0)}),it("updating legend data does not break double click (issue 784)",function(){var e;return r.updateData(n),e=r.$(".nv-legend .nv-series"),d3.select(e[0]).on("dblclick")(n[0]),n[0].disabled.should.equal(!1),n[1].disabled.should.equal(!0),n[2].disabled.should.equal(!0),n[3].disabled.should.equal(!0)})}),it("legend padding",function(){var e,n,l,t,d,u,i;for((r=new ChartBuilder(nv.models.legend())).build({padding:40},s),i=[0,80,160],d=[],e=n=0,t=(l=r.$(".nv-legend .nv-series")).length;n<t;e=++n)u=l[e].getAttribute("transform"),d.push(u.should.equal("translate("+i[e]+",5)"));return d})})})}).call(this);