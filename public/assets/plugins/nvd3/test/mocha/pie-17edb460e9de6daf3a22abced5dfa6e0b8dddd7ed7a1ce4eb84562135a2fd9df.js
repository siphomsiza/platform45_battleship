(function(){describe("NVD3",function(){return describe("Pie Chart",function(){var u,t,s;return s=[{label:"America",value:100},{label:"Europe",value:200},{label:"Asia",value:50},{label:"Africa",value:70}],t={x:function(e){return e.label},y:function(e){return e.value},margin:{top:30,right:20,bottom:50,left:75},width:200,height:200,color:nv.utils.defaultColor(),showLegend:!0,valueFormat:function(e){return e.toFixed(2)},showLabels:!0,labelsOutside:!0,donut:!1,donutRatio:.5,labelThreshold:.02,labelType:"key",noData:"No Data Available",duration:0,startAngle:!1,endAngle:!1,padAngle:!1,cornerRadius:0,labelSunbeamLayout:!1},u=null,beforeEach(function(){return(u=new ChartBuilder(nv.models.pieChart())).build(t,s)}),afterEach(function(){return u.teardown()}),it("api check",function(){var e,n;for(e in should.exist(u.model.options,"options exposed"),n=[],t)n.push(should.exist(u.model[e](),e+" can be called"));return n}),describe("renders",function(){var a,o;return a=o=null,beforeEach(function(){return o=u.$("g.nvd3.nv-pieChart"),a=o[0].querySelectorAll(".nv-label text")}),it(".nv-pieChart",function(){return should.exist(o[0])}),it("can access margin",function(){return u.model.margin({top:31,right:21,bottom:51,left:76}),u.model.margin().should.deep.equal({top:31,right:21,bottom:51,left:76})}),describe("labels correctly",function(){var e,n,t,l,r;for(it("["+s.length+"] labels",function(){return o[0].querySelectorAll(".nv-label").should.have.length(s.length)}),r=[],e=t=0,l=s.length;t<l;e=++t)n=s[e],r.push(function(e,n){return it("label '"+e.label+"'",function(){return e.label.should.be.equal(a[n].textContent)})}(n,e));return r})}),it("clears chart objects for no data",function(){return(u=new ChartBuilder(nv.models.pieChart())).buildover(t,s,[]),u.$("g").length.should.equal(0,"removes chart components")}),it("has correct structure",function(){var e,n,t,l,r,a;for(r=[],t=0,l=(n=[".nv-pieWrap",".nv-pie",".nv-pieLabels",".nv-legendWrap"]).length;t<l;t++)e=n[t],r.push((a=e,should.exist(u.$("g.nvd3.nv-pieChart "+a)[0])));return r}),it("can handle donut mode and options",function(e){return u.teardown(),t.donut=!0,t.labelSunbeamLayout=!0,t.startAngle=function(e){return e.startAngle/2-Math.PI/2},t.endAngle=function(e){return e.endAngle/2-Math.PI/2},u.build(t,s),e()}),it("can handle cornerRadius and padAngle options",function(e){return u.teardown(),t.padAngle=5,t.cornerRadius=5,u.build(t,s),e()}),it("can render pie labels in other formats",function(){var e,n,t,l,r,a,o,u,i,d,c;for(d={x:function(e){return e.label},y:function(e){return e.value},labelType:"value",valueFormat:d3.format(".2f")},(e=new ChartBuilder(nv.models.pie())).build(d,[s]),(o=e.$(".nv-pieLabels .nv-label text")).length.should.equal(4),n=["100.00","200.00","50.00","70.00"],t=l=0,u=o.length;l<u;t=++l)(a=o[t]).textContent.should.equal(n[t]);for(e.teardown(),d.labelType="percent",d.valueFormat=d3.format("%"),e.build(d,[s]),(o=e.$(".nv-pieLabels .nv-label text")).length.should.equal(4),n=["24%","48%","12%","17%"],c=[],t=r=0,i=o.length;r<i;t=++r)a=o[t],c.push(a.textContent.should.equal(n[t]));return c})})})}).call(this);